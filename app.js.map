{"version":3,"file":"app.js","mappings":";;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;ACVa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAe;AACf;AACA;;;;;;;ACpBa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B,GAAG,sBAAsB,GAAG,wBAAwB,GAAG,sBAAsB,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,eAAe,GAAG,gBAAgB,GAAG,iBAAiB,GAAG,cAAc,GAAG,6BAA6B,GAAG,oBAAoB,GAAG,uBAAuB,GAAG,mBAAmB,GAAG,uBAAuB,GAAG,kBAAkB,GAAG,mBAAmB,GAAG,sBAAsB;AAC7b,yCAAyC,mBAAO,CAAC,kCAAkB;AACnE,wBAAwB;AACxB,0CAA0C,mBAAO,CAAC,mCAAmB;AACrE,sBAAsB;AACtB,0CAA0C,mBAAO,CAAC,mCAAmB;AACrE,8BAA8B;AAC9B,iCAAiC,mBAAO,CAAC,0BAAU;AACnD,sBAAsB;AACtB,sBAAsB,mBAAO,CAAC,iCAAiB;AAC/C,kDAAiD,EAAE,qCAAqC,0CAA0C,EAAC;AACnI,+CAA8C,EAAE,qCAAqC,uCAAuC,EAAC;AAC7H,oBAAoB,mBAAO,CAAC,+BAAe;AAC3C,8CAA6C,EAAE,qCAAqC,oCAAoC,EAAC;AACzH,sBAAsB,mBAAO,CAAC,iCAAiB;AAC/C,mDAAkD,EAAE,qCAAqC,2CAA2C,EAAC;AACrI,+CAA8C,EAAE,qCAAqC,uCAAuC,EAAC;AAC7H,mDAAkD,EAAE,qCAAqC,2CAA2C,EAAC;AACrI,gDAA+C,EAAE,qCAAqC,wCAAwC,EAAC;AAC/H,kBAAkB,mBAAO,CAAC,6BAAa;AACvC,yDAAwD,EAAE,qCAAqC,6CAA6C,EAAC;AAC7I,0CAAyC,EAAE,qCAAqC,8BAA8B,EAAC;AAC/G,6CAA4C,EAAE,qCAAqC,iCAAiC,EAAC;AACrH,4CAA2C,EAAE,qCAAqC,gCAAgC,EAAC;AACnH,2CAA0C,EAAE,qCAAqC,+BAA+B,EAAC;AACjH,gDAA+C,EAAE,qCAAqC,oCAAoC,EAAC;AAC3H,cAAc,mBAAO,CAAC,yBAAS;AAC/B,+CAA8C,EAAE,qCAAqC,+BAA+B,EAAC;AACrH,qBAAqB,mBAAO,CAAC,gCAAgB;AAC7C,+CAA8C,EAAE,qCAAqC,sCAAsC,EAAC;AAC5H;;;;;;;ACnCa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,WAAW;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,cAAc;AAC3D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAe;AACf;;;;;;;ACpDa;AACb;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,8BAA8B,mBAAO,CAAC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAe;AACf;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;;;;;;;AC9Ga;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB,GAAG,kBAAkB;AACjE,wBAAwB,mBAAO,CAAC,eAAe;AAC/C,6BAA6B,mBAAO,CAAC,IAAI;AACzC,wCAAwC,mBAAO,CAAC,eAAe;AAC/D,+BAA+B,mBAAO,CAAC,MAAM;AAC7C,iCAAiC,mBAAO,CAAC,QAAQ;AACjD,qCAAqC,mBAAO,CAAC,YAAY;AACzD;AACA;AACA,kBAAkB;AAClB;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,2DAA2D,KAAK;AAChE;AACA;AACA;AACA,uDAAuD,IAAI;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;AC/Ia;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB,GAAG,uBAAuB,GAAG,mBAAmB,GAAG,uBAAuB;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;;;;;;;ACnHa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;ACZa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,6BAA6B,mBAAO,CAAC,IAAI;AACzC,mCAAmC,mBAAO,CAAC,UAAU;AACrD,6BAA6B,mBAAO,CAAC,IAAI;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,mBAAmB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;;;;;;;AClFa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,mBAAO,CAAC,MAAM;AAC7C,mCAAmC,mBAAO,CAAC,UAAU;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,mBAAmB;AAChF;AACA;AACA;AACA,6DAA6D,mBAAmB;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,MAAM;AAC1C,yDAAyD,KAAK;AAC9D;AACA,2DAA2D,mBAAmB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,MAAM;AAC1C,yDAAyD,KAAK;AAC9D;AACA;AACA,iEAAiE,mBAAmB;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,KAAK;AAC3F;AACA;AACA;AACA;AACA;AACA,kBAAe;AACf;AACA;AACA;;;;;;;ACpHa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB,GAAG,eAAe,GAAG,iBAAiB,GAAG,gBAAgB,GAAG,cAAc,GAAG,6BAA6B;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oGAAoG,SAAS;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AAC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","sources":["webpack://mcsmanager-panel/../common/dist/array.js","webpack://mcsmanager-panel/../common/dist/global_variable.js","webpack://mcsmanager-panel/../common/dist/index.js","webpack://mcsmanager-panel/../common/dist/instance_stream.js","webpack://mcsmanager-panel/../common/dist/mcping.js","webpack://mcsmanager-panel/../common/dist/process_tools.js","webpack://mcsmanager-panel/../common/dist/query_wrapper.js","webpack://mcsmanager-panel/../common/dist/string_utils.js","webpack://mcsmanager-panel/../common/dist/system_info.js","webpack://mcsmanager-panel/../common/dist/system_storage.js","webpack://mcsmanager-panel/../common/dist/typecheck.js","webpack://mcsmanager-panel/../daemon/src/common/compress.ts","webpack://mcsmanager-panel/../daemon/src/common/system_storage.ts","webpack://mcsmanager-panel/../daemon/src/const.ts","webpack://mcsmanager-panel/../daemon/src/entity/config.ts","webpack://mcsmanager-panel/../daemon/src/i18n/index.ts","webpack://mcsmanager-panel/../daemon/src/service/log.ts","webpack://mcsmanager-panel/../daemon/src/service/system_file.ts","webpack://mcsmanager-panel/./src/app.ts","webpack://mcsmanager-panel/./src/app/common/storage/file_storage.ts","webpack://mcsmanager-panel/./src/app/common/storage/redis_storage.ts","webpack://mcsmanager-panel/./src/app/common/storage/sys_storage.ts","webpack://mcsmanager-panel/./src/app/common/system_storage.ts","webpack://mcsmanager-panel/./src/app/const.ts","webpack://mcsmanager-panel/./src/app/entity/entity_interface.ts","webpack://mcsmanager-panel/./src/app/entity/remote_service.ts","webpack://mcsmanager-panel/./src/app/entity/setting.ts","webpack://mcsmanager-panel/./src/app/entity/user.ts","webpack://mcsmanager-panel/./src/app/i18n/index.ts","webpack://mcsmanager-panel/./src/app/index.ts","webpack://mcsmanager-panel/./src/app/middleware/permission.ts","webpack://mcsmanager-panel/./src/app/middleware/protocol.ts","webpack://mcsmanager-panel/./src/app/middleware/validator.ts","webpack://mcsmanager-panel/./src/app/routers/business_instance_router.ts","webpack://mcsmanager-panel/./src/app/routers/daemon_router.ts","webpack://mcsmanager-panel/./src/app/routers/environment_router.ts","webpack://mcsmanager-panel/./src/app/routers/filemananger_router.ts","webpack://mcsmanager-panel/./src/app/routers/general_user_router.ts","webpack://mcsmanager-panel/./src/app/routers/instance_admin_router.ts","webpack://mcsmanager-panel/./src/app/routers/instance_exchange_router.ts","webpack://mcsmanager-panel/./src/app/routers/instance_operate_router.ts","webpack://mcsmanager-panel/./src/app/routers/login_router.ts","webpack://mcsmanager-panel/./src/app/routers/manage_user_router.ts","webpack://mcsmanager-panel/./src/app/routers/overview_router.ts","webpack://mcsmanager-panel/./src/app/routers/schedule_router.ts","webpack://mcsmanager-panel/./src/app/routers/settings_router.ts","webpack://mcsmanager-panel/./src/app/routers/user_overview_router.ts","webpack://mcsmanager-panel/./src/app/service/base/urs.ts","webpack://mcsmanager-panel/./src/app/service/exchange_service.ts","webpack://mcsmanager-panel/./src/app/service/frontend_layout.ts","webpack://mcsmanager-panel/./src/app/service/instance_service.ts","webpack://mcsmanager-panel/./src/app/service/log.ts","webpack://mcsmanager-panel/./src/app/service/passport_service.ts","webpack://mcsmanager-panel/./src/app/service/password.ts","webpack://mcsmanager-panel/./src/app/service/permission_service.ts","webpack://mcsmanager-panel/./src/app/service/remote_command.ts","webpack://mcsmanager-panel/./src/app/service/remote_service.ts","webpack://mcsmanager-panel/./src/app/service/user_service.ts","webpack://mcsmanager-panel/./src/app/service/user_sso_service.ts","webpack://mcsmanager-panel/./src/app/service/user_statistics.ts","webpack://mcsmanager-panel/./src/app/service/version_adapter.ts","webpack://mcsmanager-panel/./src/app/service/visual_data.ts","webpack://mcsmanager-panel/./src/app/setting.ts","webpack://mcsmanager-panel/./src/app/version.ts","webpack://mcsmanager-panel/external commonjs \"@koa/router\"","webpack://mcsmanager-panel/external commonjs \"axios\"","webpack://mcsmanager-panel/external commonjs \"bcryptjs\"","webpack://mcsmanager-panel/external commonjs \"events\"","webpack://mcsmanager-panel/external commonjs \"fs-extra\"","webpack://mcsmanager-panel/external commonjs \"i18next\"","webpack://mcsmanager-panel/external commonjs \"iconv-lite\"","webpack://mcsmanager-panel/external commonjs \"koa\"","webpack://mcsmanager-panel/external commonjs \"koa-body-patch\"","webpack://mcsmanager-panel/external commonjs \"koa-session\"","webpack://mcsmanager-panel/external commonjs \"koa-static\"","webpack://mcsmanager-panel/external commonjs \"log4js\"","webpack://mcsmanager-panel/external commonjs \"md5\"","webpack://mcsmanager-panel/external commonjs \"module-alias/register\"","webpack://mcsmanager-panel/external commonjs \"nanoid\"","webpack://mcsmanager-panel/external commonjs \"open\"","webpack://mcsmanager-panel/external commonjs \"os-utils\"","webpack://mcsmanager-panel/external commonjs \"otplib\"","webpack://mcsmanager-panel/external commonjs \"qrcode\"","webpack://mcsmanager-panel/external commonjs \"redis\"","webpack://mcsmanager-panel/external commonjs \"socket.io-client\"","webpack://mcsmanager-panel/external commonjs \"uuid\"","webpack://mcsmanager-panel/external node-commonjs \"child_process\"","webpack://mcsmanager-panel/external node-commonjs \"fs\"","webpack://mcsmanager-panel/external node-commonjs \"http\"","webpack://mcsmanager-panel/external node-commonjs \"net\"","webpack://mcsmanager-panel/external node-commonjs \"os\"","webpack://mcsmanager-panel/external node-commonjs \"path\"","webpack://mcsmanager-panel/external node-commonjs \"stream\"","webpack://mcsmanager-panel/webpack/bootstrap","webpack://mcsmanager-panel/webpack/before-startup","webpack://mcsmanager-panel/webpack/startup","webpack://mcsmanager-panel/webpack/after-startup"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.arrayUnique = void 0;\r\nfunction arrayUnique(arr, felidName) {\r\n    if (!felidName)\r\n        return Array.from(new Set(arr));\r\n    const map = new Map();\r\n    return arr.filter((v) => !map.has(v[felidName]) && map.set(v[felidName], v));\r\n}\r\nexports.arrayUnique = arrayUnique;\r\n//# sourceMappingURL=array.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass GlobalVariable {\r\n    static set(k, v) {\r\n        GlobalVariable.map.set(k, v);\r\n    }\r\n    static get(k, def) {\r\n        if (GlobalVariable.map.has(k)) {\r\n            return GlobalVariable.map.get(k);\r\n        }\r\n        else {\r\n            return def;\r\n        }\r\n    }\r\n    static del(k) {\r\n        return GlobalVariable.map.delete(k);\r\n    }\r\n}\r\nexports.default = GlobalVariable;\r\nGlobalVariable.map = new Map();\r\n//# sourceMappingURL=global_variable.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InstanceStreamListener = exports.GlobalVariable = exports.StorageSubsystem = exports.MCServerStatus = exports.removeTrail = exports.arrayUnique = exports.supposeValue = exports.isEmpty = exports.toNumber = exports.toBoolean = exports.toText = exports.configureEntityParams = exports.QueryWrapper = exports.LocalFileSource = exports.MySqlSource = exports.QueryMapWrapper = exports.systemInfo = exports.killProcess = exports.ProcessWrapper = void 0;\r\nconst system_storage_1 = __importDefault(require(\"./system_storage\"));\r\nexports.StorageSubsystem = system_storage_1.default;\r\nconst global_variable_1 = __importDefault(require(\"./global_variable\"));\r\nexports.GlobalVariable = global_variable_1.default;\r\nconst instance_stream_1 = __importDefault(require(\"./instance_stream\"));\r\nexports.InstanceStreamListener = instance_stream_1.default;\r\nconst mcping_1 = __importDefault(require(\"./mcping\"));\r\nexports.MCServerStatus = mcping_1.default;\r\nvar process_tools_1 = require(\"./process_tools\");\r\nObject.defineProperty(exports, \"ProcessWrapper\", { enumerable: true, get: function () { return process_tools_1.ProcessWrapper; } });\r\nObject.defineProperty(exports, \"killProcess\", { enumerable: true, get: function () { return process_tools_1.killProcess; } });\r\nvar system_info_1 = require(\"./system_info\");\r\nObject.defineProperty(exports, \"systemInfo\", { enumerable: true, get: function () { return system_info_1.systemInfo; } });\r\nvar query_wrapper_1 = require(\"./query_wrapper\");\r\nObject.defineProperty(exports, \"QueryMapWrapper\", { enumerable: true, get: function () { return query_wrapper_1.QueryMapWrapper; } });\r\nObject.defineProperty(exports, \"MySqlSource\", { enumerable: true, get: function () { return query_wrapper_1.MySqlSource; } });\r\nObject.defineProperty(exports, \"LocalFileSource\", { enumerable: true, get: function () { return query_wrapper_1.LocalFileSource; } });\r\nObject.defineProperty(exports, \"QueryWrapper\", { enumerable: true, get: function () { return query_wrapper_1.QueryWrapper; } });\r\nvar typecheck_1 = require(\"./typecheck\");\r\nObject.defineProperty(exports, \"configureEntityParams\", { enumerable: true, get: function () { return typecheck_1.configureEntityParams; } });\r\nObject.defineProperty(exports, \"toText\", { enumerable: true, get: function () { return typecheck_1.toText; } });\r\nObject.defineProperty(exports, \"toBoolean\", { enumerable: true, get: function () { return typecheck_1.toBoolean; } });\r\nObject.defineProperty(exports, \"toNumber\", { enumerable: true, get: function () { return typecheck_1.toNumber; } });\r\nObject.defineProperty(exports, \"isEmpty\", { enumerable: true, get: function () { return typecheck_1.isEmpty; } });\r\nObject.defineProperty(exports, \"supposeValue\", { enumerable: true, get: function () { return typecheck_1.supposeValue; } });\r\nvar array_1 = require(\"./array\");\r\nObject.defineProperty(exports, \"arrayUnique\", { enumerable: true, get: function () { return array_1.arrayUnique; } });\r\nvar string_utils_1 = require(\"./string_utils\");\r\nObject.defineProperty(exports, \"removeTrail\", { enumerable: true, get: function () { return string_utils_1.removeTrail; } });\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Application instance data stream forwarding adapter\r\nclass InstanceStreamListener {\r\n    constructor() {\r\n        this.listenMap = new Map();\r\n    }\r\n    requestForward(socket, instanceUuid) {\r\n        if (this.listenMap.has(instanceUuid)) {\r\n            const sockets = this.listenMap.get(instanceUuid);\r\n            if (!sockets)\r\n                return;\r\n            for (const iterator of sockets)\r\n                if (iterator.id === socket.id)\r\n                    throw new Error(`This Socket ${socket.id} already exists in the specified instance listening table`);\r\n            sockets.push(socket);\r\n        }\r\n        else {\r\n            this.listenMap.set(instanceUuid, [socket]);\r\n        }\r\n    }\r\n    cannelForward(socket, instanceUuid) {\r\n        if (!this.listenMap.has(instanceUuid))\r\n            throw new Error(`The specified ${instanceUuid} does not exist in the listening table`);\r\n        const socketList = this.listenMap.get(instanceUuid);\r\n        socketList === null || socketList === void 0 ? void 0 : socketList.forEach((v, index) => {\r\n            if (v.id === socket.id)\r\n                socketList === null || socketList === void 0 ? void 0 : socketList.splice(index, 1);\r\n        });\r\n    }\r\n    forward(instanceUuid, data) {\r\n        const sockets = this.listenMap.get(instanceUuid);\r\n        sockets === null || sockets === void 0 ? void 0 : sockets.forEach((socket) => {\r\n            if (socket && socket.connected)\r\n                socket.emit(\"instance/stdout\", data);\r\n        });\r\n    }\r\n    forwardViaCallback(instanceUuid, callback) {\r\n        if (this.listenMap.has(instanceUuid)) {\r\n            const sockets = this.listenMap.get(instanceUuid);\r\n            sockets === null || sockets === void 0 ? void 0 : sockets.forEach((socket) => {\r\n                if (socket && socket.connected)\r\n                    callback(socket);\r\n            });\r\n        }\r\n    }\r\n    hasListenInstance(instanceUuid) {\r\n        var _a;\r\n        return this.listenMap.has(instanceUuid) && ((_a = this.listenMap) === null || _a === void 0 ? void 0 : _a.get(instanceUuid).length) > 0;\r\n    }\r\n}\r\nexports.default = InstanceStreamListener;\r\n//# sourceMappingURL=instance_stream.js.map","\"use strict\";\r\n// Using SLT (Server List Ping) provided by Minecraft.\r\n// https://wiki.vg/Server_List_Ping#Response\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = __importDefault(require(\"net\"));\r\nclass PingMinecraftServer {\r\n    constructor(port, host) {\r\n        this.port = port;\r\n        this.host = host;\r\n        this.status = {\r\n            online: false,\r\n            host,\r\n            port,\r\n            version: \"\",\r\n            motd: \"\",\r\n            current_players: 0,\r\n            max_players: 0,\r\n            latency: 0\r\n        };\r\n    }\r\n    getStatus() {\r\n        return new Promise((resolve, reject) => {\r\n            var _a, _b, _c;\r\n            var start_time = new Date().getTime();\r\n            this.client = net_1.default.connect({\r\n                host: this.host,\r\n                port: this.port,\r\n                timeout: 1000 * 15\r\n            }, () => {\r\n                var _a;\r\n                this.status.latency = Math.round(new Date().getTime() - start_time);\r\n                // 0xFE packet identifier for a server list ping\r\n                // 0x01 server list ping's payload (always 1)\r\n                let data = Buffer.from([0xfe, 0x01]);\r\n                (_a = this === null || this === void 0 ? void 0 : this.client) === null || _a === void 0 ? void 0 : _a.write(data);\r\n            });\r\n            // The client can also receive data from the server by reading from its socket.\r\n            (_a = this === null || this === void 0 ? void 0 : this.client) === null || _a === void 0 ? void 0 : _a.on(\"data\", (response) => {\r\n                var _a;\r\n                // Check the readme for a simple explanation\r\n                var server_info = response.toString().split(\"\\x00\\x00\");\r\n                this.status = {\r\n                    online: true,\r\n                    host: this.host,\r\n                    port: this.port,\r\n                    version: server_info[2].replace(/\\u0000/g, \"\"),\r\n                    motd: server_info[3].replace(/\\u0000/g, \"\"),\r\n                    current_players: server_info[4].replace(/\\u0000/g, \"\"),\r\n                    max_players: server_info[5].replace(/\\u0000/g, \"\"),\r\n                    latency: this.status.latency\r\n                };\r\n                // Request an end to the connection after the data has been received.\r\n                (_a = this === null || this === void 0 ? void 0 : this.client) === null || _a === void 0 ? void 0 : _a.end();\r\n                resolve(this.status);\r\n                this.destroy();\r\n            });\r\n            (_b = this === null || this === void 0 ? void 0 : this.client) === null || _b === void 0 ? void 0 : _b.on(\"end\", () => {\r\n                resolve(this.status);\r\n                this.destroy();\r\n            });\r\n            (_c = this === null || this === void 0 ? void 0 : this.client) === null || _c === void 0 ? void 0 : _c.on(\"error\", (err) => {\r\n                reject(err);\r\n                this.destroy();\r\n            });\r\n        });\r\n    }\r\n    destroy() {\r\n        var _a;\r\n        (_a = this.client) === null || _a === void 0 ? void 0 : _a.removeAllListeners();\r\n    }\r\n    async asyncStatus() {\r\n        let status = await this.getStatus();\r\n        return status;\r\n    }\r\n}\r\nexports.default = PingMinecraftServer;\r\n// async function test() {\r\n//   try {\r\n//     var status = await new MCServStatus(25565, \"localhost\").asyncStatus();\r\n//     // console.log(\"status: \", status);\r\n//   } catch (error) {\r\n//     console.error(\":\", error);\r\n//   }\r\n//   const memoryUsage = process.memoryUsage();\r\n//   console.log(\r\n//     \"RSS (Resident Set Size):\",\r\n//     (memoryUsage.rss / 1024 / 1024).toFixed(2),\r\n//     \"MB\",\r\n//     \"Heap Total:\",\r\n//     (memoryUsage.heapTotal / 1024 / 1024).toFixed(2),\r\n//     \"MB\",\r\n//     \"Heap Used:\",\r\n//     (memoryUsage.heapUsed / 1024 / 1024).toFixed(2),\r\n//     \"MB\",\r\n//     \"External:\",\r\n//     (memoryUsage.external / 1024 / 1024).toFixed(2),\r\n//     \"MB\"\r\n//   );\r\n//   // console.log(\"Heap Total:\", (memoryUsage.heapTotal / 1024 / 1024).toFixed(2), \"MB\");\r\n//   // console.log(\"External:\", (memoryUsage.external / 1024 / 1024).toFixed(2), \"MB\");\r\n//   // console.log(\"Heap Used:\", (memoryUsage.heapUsed / 1024 / 1024).toFixed(2), \"MB\");\r\n// }\r\n// for (let index = 0; index < 10000; index++) {\r\n//   test();\r\n//   // @ts-ignore\r\n//   // global.gc();\r\n// }\r\n//# sourceMappingURL=mcping.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.killProcess = exports.ProcessWrapper = exports.StartError = void 0;\r\nconst child_process_1 = require(\"child_process\");\r\nconst os_1 = __importDefault(require(\"os\"));\r\nconst child_process_2 = __importDefault(require(\"child_process\"));\r\nconst path_1 = __importDefault(require(\"path\"));\r\nconst events_1 = __importDefault(require(\"events\"));\r\nconst iconv_lite_1 = __importDefault(require(\"iconv-lite\"));\r\nclass StartError extends Error {\r\n}\r\nexports.StartError = StartError;\r\nclass ProcessWrapper extends events_1.default {\r\n    constructor(file, args, cwd, timeout = 0, code = \"utf-8\", option = {}) {\r\n        super();\r\n        this.file = file;\r\n        this.args = args;\r\n        this.cwd = cwd;\r\n        this.timeout = timeout;\r\n        this.code = code;\r\n        this.option = option;\r\n        this.errMsg = {\r\n            timeoutErr: \"task timeout!\",\r\n            exitErr: \"task error!\",\r\n            startErr: \"task start error!\"\r\n        };\r\n    }\r\n    setErrMsg(errMsg) {\r\n        this.errMsg = errMsg;\r\n    }\r\n    start() {\r\n        return new Promise((resolve, reject) => {\r\n            let timeTask;\r\n            const subProcess = child_process_2.default.spawn(this.file, this.args, {\r\n                stdio: \"pipe\",\r\n                windowsHide: true,\r\n                cwd: path_1.default.normalize(this.cwd),\r\n                ...this.option\r\n            });\r\n            this.process = subProcess;\r\n            this.pid = subProcess.pid;\r\n            this.emit(\"start\", subProcess.pid);\r\n            if (!subProcess || !subProcess.pid)\r\n                return reject(new Error(this.errMsg.startErr));\r\n            subProcess.stdout.on(\"data\", (text) => this.emit(\"data\", iconv_lite_1.default.decode(text, this.code)));\r\n            subProcess.stderr.on(\"data\", (text) => this.emit(\"data\", iconv_lite_1.default.decode(text, this.code)));\r\n            subProcess.on(\"exit\", (code) => {\r\n                try {\r\n                    this.emit(\"exit\", code);\r\n                    this.destroy();\r\n                }\r\n                catch (error) { }\r\n                if (timeTask)\r\n                    clearTimeout(timeTask);\r\n                if (code !== 0)\r\n                    return reject(new Error(this.errMsg.exitErr));\r\n                return resolve(true);\r\n            });\r\n            // timeout, terminate the task\r\n            if (this.timeout) {\r\n                timeTask = setTimeout(() => {\r\n                    if ((subProcess === null || subProcess === void 0 ? void 0 : subProcess.pid) && !subProcess.exitCode && subProcess.exitCode !== 0) {\r\n                        killProcess(subProcess.pid, subProcess);\r\n                        reject(new Error(this.errMsg.timeoutErr));\r\n                    }\r\n                    else {\r\n                        reject(new Error(this.errMsg.exitErr));\r\n                    }\r\n                }, 1000 * this.timeout);\r\n            }\r\n        });\r\n    }\r\n    getPid() {\r\n        var _a;\r\n        return (_a = this.process) === null || _a === void 0 ? void 0 : _a.pid;\r\n    }\r\n    write(data) {\r\n        var _a, _b;\r\n        return (_b = (_a = this.process) === null || _a === void 0 ? void 0 : _a.stdin) === null || _b === void 0 ? void 0 : _b.write(iconv_lite_1.default.encode(data, this.code));\r\n    }\r\n    kill() {\r\n        var _a, _b;\r\n        if ((_a = this.process) === null || _a === void 0 ? void 0 : _a.pid)\r\n            killProcess((_b = this.process) === null || _b === void 0 ? void 0 : _b.pid, this.process);\r\n    }\r\n    status() {\r\n        var _a;\r\n        return !!((_a = this.process) === null || _a === void 0 ? void 0 : _a.exitCode);\r\n    }\r\n    exitCode() {\r\n        var _a;\r\n        return (_a = this.process) === null || _a === void 0 ? void 0 : _a.exitCode;\r\n    }\r\n    async destroy() {\r\n        var _a, _b, _c, _d, _e, _f, _g;\r\n        try {\r\n            for (const n of this.eventNames())\r\n                this.removeAllListeners(n);\r\n            if ((_a = this.process) === null || _a === void 0 ? void 0 : _a.stdout)\r\n                for (const eventName of this.process.stdout.eventNames())\r\n                    this.process.stdout.removeAllListeners(eventName);\r\n            if ((_b = this.process) === null || _b === void 0 ? void 0 : _b.stderr)\r\n                for (const eventName of this.process.stderr.eventNames())\r\n                    this.process.stderr.removeAllListeners(eventName);\r\n            if (this.process)\r\n                for (const eventName of this.process.eventNames())\r\n                    this.process.removeAllListeners(eventName);\r\n            (_d = (_c = this.process) === null || _c === void 0 ? void 0 : _c.stdout) === null || _d === void 0 ? void 0 : _d.destroy();\r\n            (_f = (_e = this.process) === null || _e === void 0 ? void 0 : _e.stderr) === null || _f === void 0 ? void 0 : _f.destroy();\r\n            if (((_g = this.process) === null || _g === void 0 ? void 0 : _g.exitCode) === null) {\r\n                this.process.kill(\"SIGTERM\");\r\n                this.process.kill(\"SIGKILL\");\r\n            }\r\n        }\r\n        catch (error) {\r\n            console.log(\"[ProcessWrapper destroy() Error]\", error);\r\n        }\r\n        finally {\r\n            this.process = undefined;\r\n        }\r\n    }\r\n}\r\nexports.ProcessWrapper = ProcessWrapper;\r\nfunction killProcess(pid, process, signal) {\r\n    try {\r\n        if (os_1.default.platform() === \"win32\") {\r\n            (0, child_process_1.execSync)(`taskkill /PID ${pid} /T /F`);\r\n            return true;\r\n        }\r\n        if (os_1.default.platform() === \"linux\") {\r\n            (0, child_process_1.execSync)(`kill -s 9 ${pid}`);\r\n            return true;\r\n        }\r\n    }\r\n    catch (err) {\r\n        return signal ? process.kill(signal) : process.kill(\"SIGKILL\");\r\n    }\r\n    return signal ? process.kill(signal) : process.kill(\"SIGKILL\");\r\n}\r\nexports.killProcess = killProcess;\r\n//# sourceMappingURL=process_tools.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.QueryWrapper = exports.LocalFileSource = exports.MySqlSource = exports.QueryMapWrapper = void 0;\r\n// Provide the MAP query interface used by the routing layer\r\nclass QueryMapWrapper {\r\n    constructor(map) {\r\n        this.map = map;\r\n    }\r\n    select(condition) {\r\n        const result = [];\r\n        this.map.forEach((v) => {\r\n            if (condition(v))\r\n                result.push(v);\r\n        });\r\n        return result;\r\n    }\r\n    page(data, page = 1, pageSize = 10) {\r\n        const start = (page - 1) * pageSize;\r\n        const end = start + pageSize;\r\n        let size = data.length;\r\n        let maxPage = 0;\r\n        while (size > 0) {\r\n            size -= pageSize;\r\n            maxPage++;\r\n        }\r\n        return {\r\n            page,\r\n            pageSize,\r\n            maxPage,\r\n            data: data.slice(start, end)\r\n        };\r\n    }\r\n}\r\nexports.QueryMapWrapper = QueryMapWrapper;\r\n// MYSQL data source\r\nclass MySqlSource {\r\n    constructor(data) {\r\n        this.data = data;\r\n    }\r\n    selectPage(condition, page, pageSize) {\r\n        return {\r\n            page,\r\n            pageSize,\r\n            maxPage: 0,\r\n            total: 0,\r\n            data: []\r\n        };\r\n    }\r\n    select(condition) {\r\n        return [];\r\n    }\r\n    update(condition, data) { }\r\n    delete(condition) { }\r\n    insert(data) { }\r\n}\r\nexports.MySqlSource = MySqlSource;\r\n// local file data source (embedded microdatabase)\r\nclass LocalFileSource {\r\n    constructor(data) {\r\n        this.data = data;\r\n    }\r\n    selectPage(condition, page = 1, pageSize = 10) {\r\n        const result = [];\r\n        this.data.forEach((v) => {\r\n            for (const key in condition) {\r\n                const dataValue = v[key];\r\n                const targetValue = condition[key];\r\n                if (targetValue[0] == \"%\") {\r\n                    if (!dataValue.includes(targetValue.slice(1, targetValue.length - 1)))\r\n                        return false;\r\n                }\r\n                else {\r\n                    if (targetValue !== dataValue)\r\n                        return false;\r\n                }\r\n            }\r\n            result.push(v);\r\n        });\r\n        return this.page(result, page, pageSize);\r\n    }\r\n    page(data, page = 1, pageSize = 10) {\r\n        const start = (page - 1) * pageSize;\r\n        const end = start + pageSize;\r\n        let size = data.length;\r\n        let maxPage = 0;\r\n        while (size > 0) {\r\n            size -= pageSize;\r\n            maxPage++;\r\n        }\r\n        return {\r\n            page,\r\n            pageSize,\r\n            maxPage,\r\n            total: data.length,\r\n            data: data.slice(start, end)\r\n        };\r\n    }\r\n    select(condition) {\r\n        return [];\r\n    }\r\n    update(condition, data) { }\r\n    delete(condition) { }\r\n    insert(data) { }\r\n}\r\nexports.LocalFileSource = LocalFileSource;\r\n// Provide the unified data query interface used by the routing layer\r\nclass QueryWrapper {\r\n    constructor(dataSource) {\r\n        this.dataSource = dataSource;\r\n    }\r\n    selectPage(condition, page = 1, pageSize = 10) {\r\n        return this.dataSource.selectPage(condition, page, pageSize);\r\n    }\r\n}\r\nexports.QueryWrapper = QueryWrapper;\r\n//# sourceMappingURL=query_wrapper.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.removeTrail = void 0;\r\nfunction removeTrail(origin, trail) {\r\n    if (origin.endsWith(trail)) {\r\n        return origin.slice(0, origin.length - trail.length);\r\n    }\r\n    else {\r\n        return origin;\r\n    }\r\n}\r\nexports.removeTrail = removeTrail;\r\n//# sourceMappingURL=string_utils.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.systemInfo = void 0;\r\nconst os_1 = __importDefault(require(\"os\"));\r\nconst os_utils_1 = __importDefault(require(\"os-utils\"));\r\nconst fs_1 = __importDefault(require(\"fs\"));\r\n// System details are updated every time\r\nconst info = {\r\n    type: os_1.default.type(),\r\n    hostname: os_1.default.hostname(),\r\n    platform: os_1.default.platform(),\r\n    release: os_1.default.release(),\r\n    uptime: os_1.default.uptime(),\r\n    cwd: process.cwd(),\r\n    loadavg: os_1.default.loadavg(),\r\n    freemem: 0,\r\n    cpuUsage: 0,\r\n    memUsage: 0,\r\n    totalmem: 0,\r\n    processCpu: 0,\r\n    processMem: 0\r\n};\r\n// periodically refresh the cache\r\nsetInterval(() => {\r\n    if (os_1.default.platform() === \"linux\") {\r\n        return setLinuxSystemInfo();\r\n    }\r\n    if (os_1.default.platform() === \"win32\") {\r\n        return setWindowsSystemInfo();\r\n    }\r\n    return otherSystemInfo();\r\n}, 3000);\r\nfunction otherSystemInfo() {\r\n    info.freemem = os_1.default.freemem();\r\n    info.totalmem = os_1.default.totalmem();\r\n    info.memUsage = (os_1.default.totalmem() - os_1.default.freemem()) / os_1.default.totalmem();\r\n    os_utils_1.default.cpuUsage((p) => (info.cpuUsage = p));\r\n}\r\nfunction setWindowsSystemInfo() {\r\n    info.freemem = os_1.default.freemem();\r\n    info.totalmem = os_1.default.totalmem();\r\n    info.memUsage = (os_1.default.totalmem() - os_1.default.freemem()) / os_1.default.totalmem();\r\n    os_utils_1.default.cpuUsage((p) => (info.cpuUsage = p));\r\n}\r\nfunction setLinuxSystemInfo() {\r\n    var _a;\r\n    try {\r\n        // read memory data based on /proc/meminfo\r\n        const data = fs_1.default.readFileSync(\"/proc/meminfo\", { encoding: \"utf-8\" });\r\n        const list = data.split(\"\\n\");\r\n        const infoTable = {};\r\n        list.forEach((line) => {\r\n            const kv = line.split(\":\");\r\n            if (kv.length === 2) {\r\n                const k = kv[0].replace(/ /gim, \"\").replace(/\\t/gim, \"\").trim().toLowerCase();\r\n                let v = kv[1].replace(/ /gim, \"\").replace(/\\t/gim, \"\").trim().toLowerCase();\r\n                v = v.replace(/kb/gim, \"\").replace(/mb/gim, \"\").replace(/gb/gim, \"\");\r\n                let vNumber = parseInt(v);\r\n                if (isNaN(vNumber))\r\n                    vNumber = 0;\r\n                infoTable[k] = vNumber;\r\n            }\r\n        });\r\n        const memAvailable = (_a = infoTable[\"memavailable\"]) !== null && _a !== void 0 ? _a : infoTable[\"memfree\"];\r\n        const memTotal = infoTable[\"memtotal\"];\r\n        info.freemem = memAvailable * 1024;\r\n        info.totalmem = memTotal * 1024;\r\n        info.memUsage = (info.totalmem - info.freemem) / info.totalmem;\r\n        os_utils_1.default.cpuUsage((p) => (info.cpuUsage = p));\r\n    }\r\n    catch (error) {\r\n        // If the reading is wrong, the default general reading method is automatically used\r\n        otherSystemInfo();\r\n    }\r\n}\r\nfunction systemInfo() {\r\n    return info;\r\n}\r\nexports.systemInfo = systemInfo;\r\n//# sourceMappingURL=system_info.js.map","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = __importDefault(require(\"path\"));\r\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\r\nclass StorageSubsystem {\r\n    checkFileName(name) {\r\n        const blackList = [\"\\\\\", \"/\", \"..\"];\r\n        for (const ch of blackList) {\r\n            if (name.includes(ch))\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    writeFile(name, data) {\r\n        const targetPath = path_1.default.normalize(path_1.default.join(StorageSubsystem.DATA_PATH, name));\r\n        fs_extra_1.default.writeFileSync(targetPath, data, { encoding: \"utf-8\" });\r\n    }\r\n    readFile(name) {\r\n        const targetPath = path_1.default.normalize(path_1.default.join(StorageSubsystem.DATA_PATH, name));\r\n        return fs_extra_1.default.readFileSync(targetPath, { encoding: \"utf-8\" });\r\n    }\r\n    readDir(dirName) {\r\n        const targetPath = path_1.default.normalize(path_1.default.join(StorageSubsystem.DATA_PATH, dirName));\r\n        if (!fs_extra_1.default.existsSync(targetPath))\r\n            return [];\r\n        const files = fs_extra_1.default.readdirSync(targetPath).map((v) => path_1.default.normalize(path_1.default.join(dirName, v)));\r\n        return files;\r\n    }\r\n    deleteFile(name) {\r\n        const targetPath = path_1.default.normalize(path_1.default.join(StorageSubsystem.DATA_PATH, name));\r\n        fs_extra_1.default.removeSync(targetPath);\r\n    }\r\n    fileExists(name) {\r\n        const targetPath = path_1.default.normalize(path_1.default.join(StorageSubsystem.DATA_PATH, name));\r\n        return fs_extra_1.default.existsSync(targetPath);\r\n    }\r\n    // Stored in local file based on class definition and identifier\r\n    store(category, uuid, object) {\r\n        const dirPath = path_1.default.join(StorageSubsystem.DATA_PATH, category);\r\n        if (!fs_extra_1.default.existsSync(dirPath))\r\n            fs_extra_1.default.mkdirsSync(dirPath);\r\n        if (!this.checkFileName(uuid))\r\n            throw new Error(`UUID ${uuid} does not conform to specification`);\r\n        const filePath = path_1.default.join(dirPath, `${uuid}.json`);\r\n        const data = JSON.stringify(object, null, 4);\r\n        fs_extra_1.default.writeFileSync(filePath, data, { encoding: \"utf-8\" });\r\n    }\r\n    // deep copy of the primitive type with the copy target as the prototype\r\n    defineAttr(target, object) {\r\n        for (const v of Object.keys(target)) {\r\n            const objectValue = object[v];\r\n            if (objectValue === undefined)\r\n                continue;\r\n            if (objectValue instanceof Array) {\r\n                target[v] = objectValue;\r\n                continue;\r\n            }\r\n            if (objectValue instanceof Object && typeof objectValue === \"object\") {\r\n                this.defineAttr(target[v], objectValue);\r\n                continue;\r\n            }\r\n            target[v] = objectValue;\r\n        }\r\n        return target;\r\n    }\r\n    /**\r\n     * Instantiate an object based on the class definition and identifier\r\n     */\r\n    load(category, classz, uuid) {\r\n        const dirPath = path_1.default.join(StorageSubsystem.DATA_PATH, category);\r\n        if (!fs_extra_1.default.existsSync(dirPath))\r\n            fs_extra_1.default.mkdirsSync(dirPath);\r\n        if (!this.checkFileName(uuid))\r\n            throw new Error(`UUID ${uuid} does not conform to specification`);\r\n        const filePath = path_1.default.join(dirPath, `${uuid}.json`);\r\n        if (!fs_extra_1.default.existsSync(filePath))\r\n            return null;\r\n        const data = fs_extra_1.default.readFileSync(filePath, { encoding: \"utf-8\" });\r\n        const dataObject = JSON.parse(data);\r\n        const target = new classz();\r\n        // for (const v of Object. keys(target)) {\r\n        // if (dataObject[v] !== undefined) target[v] = dataObject[v];\r\n        // }\r\n        // deep object copy\r\n        return this.defineAttr(target, dataObject);\r\n    }\r\n    /**\r\n     * Return all identifiers related to this class through the class definition\r\n     */\r\n    list(category) {\r\n        const dirPath = path_1.default.join(StorageSubsystem.DATA_PATH, category);\r\n        if (!fs_extra_1.default.existsSync(dirPath))\r\n            fs_extra_1.default.mkdirsSync(dirPath);\r\n        const files = fs_extra_1.default.readdirSync(dirPath);\r\n        const result = new Array();\r\n        files.forEach((name) => {\r\n            result.push(name.replace(path_1.default.extname(name), \"\"));\r\n        });\r\n        return result;\r\n    }\r\n    /**\r\n     * Delete an identifier instance of the specified type through the class definition\r\n     */\r\n    delete(category, uuid) {\r\n        const filePath = path_1.default.join(StorageSubsystem.DATA_PATH, category, `${uuid}.json`);\r\n        if (!fs_extra_1.default.existsSync(filePath))\r\n            return;\r\n        fs_extra_1.default.removeSync(filePath);\r\n    }\r\n}\r\nexports.default = StorageSubsystem;\r\nStorageSubsystem.DATA_PATH = path_1.default.normalize(path_1.default.join(process.cwd(), \"data\"));\r\nStorageSubsystem.INDEX_PATH = path_1.default.normalize(path_1.default.join(process.cwd(), \"data\", \"index\"));\r\n//# sourceMappingURL=system_storage.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.supposeValue = exports.isEmpty = exports.toBoolean = exports.toNumber = exports.toText = exports.configureEntityParams = void 0;\r\nfunction configureEntityParams(self, args, key, typeFn) {\r\n    var _a;\r\n    const selfDefaultValue = (_a = self[key]) !== null && _a !== void 0 ? _a : null;\r\n    const v = args[key] != null ? args[key] : selfDefaultValue;\r\n    if (typeFn === Number) {\r\n        if (v === \"\" || v == null) {\r\n            self[key] = null;\r\n        }\r\n        else {\r\n            if (isNaN(Number(v)))\r\n                throw new Error(`ConfigureEntityParams Error: Expected type to be Number, but got ${typeof v}`);\r\n            self[key] = Number(v);\r\n        }\r\n        return;\r\n    }\r\n    if (typeFn === String) {\r\n        if (v == null) {\r\n            self[key] = null;\r\n        }\r\n        else {\r\n            self[key] = String(v);\r\n        }\r\n        return;\r\n    }\r\n    if (typeFn === Boolean) {\r\n        if (v == null) {\r\n            self[key] = false;\r\n        }\r\n        else {\r\n            self[key] = Boolean(v);\r\n        }\r\n        return;\r\n    }\r\n    if (typeFn) {\r\n        self[key] = typeFn(v);\r\n    }\r\n    else {\r\n        self[key] = v;\r\n    }\r\n}\r\nexports.configureEntityParams = configureEntityParams;\r\nfunction toText(v) {\r\n    if (isEmpty(v))\r\n        return null;\r\n    return String(v);\r\n}\r\nexports.toText = toText;\r\nfunction toNumber(v) {\r\n    if (isEmpty(v))\r\n        return null;\r\n    if (isNaN(Number(v)))\r\n        return null;\r\n    return Number(v);\r\n}\r\nexports.toNumber = toNumber;\r\nfunction toBoolean(v) {\r\n    if (isEmpty(v))\r\n        return null;\r\n    return Boolean(v);\r\n}\r\nexports.toBoolean = toBoolean;\r\nfunction isEmpty(v) {\r\n    return v === null || v === undefined;\r\n}\r\nexports.isEmpty = isEmpty;\r\nfunction supposeValue(v, def) {\r\n    if (isEmpty(v))\r\n        return def;\r\n    return v;\r\n}\r\nexports.supposeValue = supposeValue;\r\n//# sourceMappingURL=typecheck.js.map","import path from \"path\";\r\nimport { t } from \"i18next\";\r\nimport logger from \"../service/log\";\r\nimport { ProcessWrapper } from \"common\";\r\nimport fs from \"fs-extra\";\r\nimport { GOLANG_ZIP_PATH } from \"../const\";\r\nimport { ZIP_TIMEOUT_SECONDS } from \"../const\";\r\n\r\nconst COMPRESS_ERROR_MSG = {\r\n  invalidName: t(\"TXT_CODE_3aa9f36\"),\r\n  exitErr: t(\"TXT_CODE_2be83d36\"),\r\n  startErr: t(\"TXT_CODE_37d839a4\"),\r\n  timeoutErr: t(\"TXT_CODE_15c07350\")\r\n};\r\n\r\nfunction checkFileName(fileName: string) {\r\n  const disableList = ['\"', \"'\", \"?\", \"|\", \"&\"];\r\n  for (const iterator of disableList) {\r\n    if (fileName.includes(iterator)) return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nexport async function compress(\r\n  sourceZip: string,\r\n  files: string[],\r\n  fileCode?: string\r\n): Promise<boolean> {\r\n  if (!checkFileName(sourceZip) || files.some((v) => !checkFileName(v)))\r\n    throw new Error(COMPRESS_ERROR_MSG.invalidName);\r\n  return await useZip(sourceZip, files, fileCode);\r\n}\r\n\r\nexport async function decompress(\r\n  zipPath: string,\r\n  dest: string,\r\n  fileCode?: string\r\n): Promise<boolean> {\r\n  if (!checkFileName(zipPath) || !checkFileName(dest))\r\n    throw new Error(COMPRESS_ERROR_MSG.invalidName);\r\n  return await useUnzip(zipPath, dest, fileCode || \"utf-8\");\r\n}\r\n\r\n// ./file-zip -mode 2 --zipPath aaa.zip --DistDirPath 123412124 --code GBK\r\nasync function useUnzip(sourceZip: string, destDir: string, code = \"utf-8\"): Promise<boolean> {\r\n  const params = [\r\n    \"--mode=2\",\r\n    `--zipPath=${path.basename(sourceZip)}`,\r\n    `--distDirPath=${path.normalize(destDir)}`,\r\n    `--code=${code}`\r\n  ];\r\n  logger.info(`Function useUnzip(): Command: ${GOLANG_ZIP_PATH} ${params.join(\" \")}`);\r\n  const subProcess = new ProcessWrapper(\r\n    GOLANG_ZIP_PATH,\r\n    params,\r\n    path.dirname(sourceZip),\r\n    ZIP_TIMEOUT_SECONDS,\r\n    code\r\n  );\r\n  subProcess.setErrMsg(COMPRESS_ERROR_MSG);\r\n  return subProcess.start();\r\n}\r\n\r\n// ./file-zip -mode 1 --file main.go --file file-zip --file 123 --file README.md --zipPath aaabb.zip\r\nasync function useZip(distZip: string, files: string[], code = \"utf-8\"): Promise<boolean> {\r\n  if (!files || files.length == 0) throw new Error(t(\"TXT_CODE_2038ec2c\"));\r\n  const params = [\"--mode=1\", `--code=${code}`, `--zipPath=${path.basename(distZip)}`];\r\n  files.forEach((v) => {\r\n    params.push(`--file=${path.basename(v)}`);\r\n  });\r\n  logger.info(\r\n    `Function useZip(): Command: ${GOLANG_ZIP_PATH} ${params.join(\" \")}, CWD: ${path.dirname(\r\n      distZip\r\n    )}`\r\n  );\r\n  const subProcess = new ProcessWrapper(\r\n    GOLANG_ZIP_PATH,\r\n    params,\r\n    path.dirname(distZip),\r\n    ZIP_TIMEOUT_SECONDS,\r\n    code\r\n  );\r\n  subProcess.setErrMsg(COMPRESS_ERROR_MSG);\r\n  return subProcess.start();\r\n}\r\n","import { StorageSubsystem } from \"common\";\r\nexport default new StorageSubsystem();\r\n","import os from \"os\";\r\nimport path from \"path\";\r\n\r\nconst SYS_INFO = `${os.platform()}_${os.arch()}${os.platform() === \"win32\" ? \".exe\" : \"\"}`;\r\nconst ptyName = `pty_${SYS_INFO}`;\r\nconst frpcName = `frpc_${SYS_INFO}`;\r\nconst PTY_PATH = path.normalize(path.join(process.cwd(), \"lib\", ptyName));\r\nconst FRPC_PATH = path.normalize(path.join(process.cwd(), \"lib\", frpcName));\r\nconst FILENAME_BLACKLIST = [\"\\\\\", \"/\", \".\", \"'\", '\"', \"?\", \"*\", \"<\", \">\"];\r\nconst LOCAL_PRESET_LANG_PATH = path.normalize(path.join(process.cwd(), \"language\"));\r\nconst IGNORE = \"[IGNORE_LOG]\";\r\nconst SYSTEM_TYPE = os.platform();\r\nconst ZIP_TIMEOUT_SECONDS = 60 * 40;\r\nconst GOLANG_ZIP_NAME = `file_zip_${SYSTEM_TYPE}_${os.arch()}${\r\n  SYSTEM_TYPE === \"win32\" ? \".exe\" : \"\"\r\n}`;\r\nconst GOLANG_ZIP_PATH = path.normalize(path.join(process.cwd(), \"lib\", GOLANG_ZIP_NAME));\r\n\r\nexport {\r\n  GOLANG_ZIP_PATH,\r\n  FILENAME_BLACKLIST,\r\n  PTY_PATH,\r\n  LOCAL_PRESET_LANG_PATH,\r\n  FRPC_PATH,\r\n  IGNORE,\r\n  ZIP_TIMEOUT_SECONDS\r\n};\r\n","import { v4 } from \"uuid\";\r\nimport StorageSubsystem from \"../common/system_storage\";\r\n\r\nfunction builderPassword() {\r\n  const a = `${v4().replace(/\\-/gim, \"\")}`;\r\n  const b = a.slice(0, a.length / 2 - 1);\r\n  const c = `${v4().replace(/\\-/gim, \"\")}`;\r\n  return b + c;\r\n}\r\n\r\n// @Entity\r\nclass Config {\r\n  public version = 2;\r\n  public ip = \"\";\r\n  public port = 24444;\r\n  public prefix = \"\";\r\n  public key = builderPassword();\r\n  public maxFileTask = 2;\r\n  public maxZipFileSize = 200;\r\n  public language = \"en_us\";\r\n  public defaultInstancePath = \"\";\r\n}\r\n\r\n// daemon configuration class\r\nclass GlobalConfiguration {\r\n  public config = new Config();\r\n  private static readonly ID = \"global\";\r\n\r\n  load() {\r\n    let config: Config = StorageSubsystem.load(\"Config\", Config, GlobalConfiguration.ID);\r\n    if (config == null) {\r\n      config = new Config();\r\n      StorageSubsystem.store(\"Config\", GlobalConfiguration.ID, config);\r\n    }\r\n    this.config = config;\r\n  }\r\n\r\n  store() {\r\n    StorageSubsystem.store(\"Config\", GlobalConfiguration.ID, this.config);\r\n  }\r\n}\r\n\r\nclass GlobalEnv {\r\n  public fileTaskCount = 0;\r\n}\r\n\r\nconst globalConfiguration = new GlobalConfiguration();\r\nconst globalEnv = new GlobalEnv();\r\n\r\nexport { globalConfiguration, Config, globalEnv };\r\n","// I18n init configuration (Daemon)\r\n// If you want to add the language of your own country, you need to add the code here.\r\n\r\nimport i18next from \"i18next\";\r\n\r\nimport zh_cn from \"@languages/zh_CN.json\";\r\nimport en_us from \"@languages/en_US.json\";\r\nimport zh_tw from \"@languages/zh_TW.json\";\r\nimport ja_JP from \"@languages/ja_JP.json\";\r\nimport es_ES from \"@languages/es_ES.json\";\r\nimport fr_FR from \"@languages/fr_FR.json\";\r\nimport ru_RU from \"@languages/ru_RU.json\";\r\nimport ko_KR from \"@languages/ko_KR.json\";\r\nimport de_DE from \"@languages/de_DE.json\";\r\nimport pt_BR from \"@languages/pt_BR.json\";\r\n\r\ni18next.init({\r\n  interpolation: {\r\n    escapeValue: false\r\n  },\r\n  lng: \"en_us\",\r\n  fallbackLng: \"en_us\",\r\n  resources: {\r\n    en_us: {\r\n      translation: en_us\r\n    },\r\n    zh_cn: {\r\n      translation: zh_cn\r\n    },\r\n    zh_tw: {\r\n      translation: zh_tw\r\n    },\r\n    ja_jp: {\r\n      translation: ja_JP\r\n    },\r\n    es_es: {\r\n      translation: es_ES\r\n    },\r\n    fr_fr: {\r\n      translation: fr_FR\r\n    },\r\n    ru_ru: {\r\n      translation: ru_RU\r\n    },\r\n    ko_kr: {\r\n      translation: ko_KR\r\n    },\r\n    de_de: {\r\n      translation: de_DE\r\n    },\r\n    pt_br: {\r\n      translation: pt_BR\r\n    }\r\n  }\r\n});\r\n\r\n// alias\r\nconst $t = i18next.t;\r\n\r\nexport { $t, i18next };\r\n","import fs from \"fs-extra\";\r\nimport * as log4js from \"log4js\";\r\nimport { systemInfo } from \"common\";\r\nimport { $t } from \"../i18n\";\r\n\r\nconst LOG_FILE_PATH = \"logs/current.log\";\r\nconst LOG_SYS_INFO_FILE_PATH = \"logs/sysinfo.log\";\r\n\r\nconst time = new Date();\r\nconst timeString =\r\n  `${time.getFullYear()}-${time.getMonth() + 1}-${time.getDate()}` +\r\n  `_${time.getHours()}-${time.getMinutes()}-${time.getSeconds()}`;\r\n\r\nif (fs.existsSync(LOG_FILE_PATH)) {\r\n  fs.renameSync(LOG_FILE_PATH, `logs/${timeString}.log`);\r\n}\r\n\r\nif (fs.existsSync(LOG_SYS_INFO_FILE_PATH)) {\r\n  fs.renameSync(LOG_SYS_INFO_FILE_PATH, `logs/sysinfo_${timeString}.log`);\r\n}\r\n\r\nlog4js.configure({\r\n  appenders: {\r\n    out: {\r\n      type: \"stdout\",\r\n      layout: {\r\n        type: \"pattern\",\r\n        pattern: \"[%d{MM/dd hh:mm:ss}] [%[%p%]] %m\"\r\n      }\r\n    },\r\n    app: {\r\n      type: \"file\",\r\n      filename: LOG_FILE_PATH,\r\n      layout: {\r\n        type: \"pattern\",\r\n        pattern: \"[%d{MM/dd hh:mm:ss}] [%p] %m\"\r\n      }\r\n    },\r\n    sys: {\r\n      type: \"file\",\r\n      filename: LOG_SYS_INFO_FILE_PATH,\r\n      layout: {\r\n        type: \"pattern\",\r\n        pattern: \"[%d{MM/dd hh:mm:ss}] [%p] %m\"\r\n      }\r\n    }\r\n  },\r\n  categories: {\r\n    default: {\r\n      appenders: [\"out\", \"app\"],\r\n      level: \"info\"\r\n    },\r\n    sysinfo: {\r\n      appenders: [\"sys\"],\r\n      level: \"info\"\r\n    }\r\n  }\r\n});\r\n\r\nconst logger = log4js.getLogger(\"default\");\r\nconst loggerSysInfo = log4js.getLogger(\"sysinfo\");\r\nfunction toInt(v: number) {\r\n  return parseInt(String(v));\r\n}\r\n\r\nfunction systemInfoReport() {\r\n  const MB_SIZE = 1024 * 1024;\r\n  const info = systemInfo();\r\n\r\n  const self = process.memoryUsage();\r\n  const sysInfo =\r\n    `MEM: ${toInt((info.totalmem - info.freemem) / MB_SIZE)}MB/${toInt(\r\n      info.totalmem / MB_SIZE\r\n    )}MB` + ` CPU: ${toInt(info.cpuUsage * 100)}%`;\r\n  const selfInfo = `Heap: ${toInt(self.heapUsed / MB_SIZE)}MB/${toInt(self.heapTotal / MB_SIZE)}MB`;\r\n  const selfInfo2 = `RSS: ${toInt(self.rss / MB_SIZE)}MB`;\r\n  const logTip = $t(\"TXT_CODE_app.sysinfo\");\r\n  loggerSysInfo.info([`[${logTip}]`, sysInfo, selfInfo, selfInfo2].join(\" \"));\r\n}\r\n\r\nsetInterval(systemInfoReport, 1000 * 5);\r\n\r\nexport default logger;\r\n","import { $t, i18next } from \"../i18n\";\r\nimport path from \"path\";\r\nimport fs from \"fs-extra\";\r\nimport { compress, decompress } from \"../common/compress\";\r\nimport iconv from \"iconv-lite\";\r\nimport { globalConfiguration } from \"../entity/config\";\r\nimport { ProcessWrapper } from \"common\";\r\nimport os from \"os\";\r\n\r\nconst ERROR_MSG_01 = $t(\"TXT_CODE_system_file.illegalAccess\");\r\nconst MAX_EDIT_SIZE = 1024 * 1024 * 5;\r\n\r\ninterface IFile {\r\n  name: string;\r\n  size: number;\r\n  time: string;\r\n  type: number;\r\n  mode: number;\r\n}\r\n\r\nexport default class FileManager {\r\n  public cwd: string = \".\";\r\n\r\n  constructor(public topPath: string = \"\", public fileCode?: string) {\r\n    if (!path.isAbsolute(topPath)) {\r\n      this.topPath = path.normalize(path.join(process.cwd(), topPath));\r\n    } else {\r\n      this.topPath = path.normalize(topPath);\r\n    }\r\n    if (!fileCode) {\r\n      this.fileCode = \"utf-8\";\r\n      if (i18next.language == \"zh_cn\") this.fileCode = \"gbk\";\r\n    }\r\n  }\r\n\r\n  isRootTopRath() {\r\n    return this.topPath === \"/\" || this.topPath === \"\\\\\";\r\n  }\r\n\r\n  toAbsolutePath(fileName: string = \"\") {\r\n    const topAbsolutePath = this.topPath;\r\n    let finalPath: string = \"\";\r\n    if (os.platform() === \"win32\") {\r\n      const reg = new RegExp(\"^[A-Za-z]{1}:[\\\\\\\\/]{1}\");\r\n      if (reg.test(this.cwd)) {\r\n        finalPath = path.normalize(path.join(this.cwd, fileName));\r\n      } else if (reg.test(fileName)) {\r\n        finalPath = path.normalize(fileName);\r\n      }\r\n    }\r\n    if (!finalPath) {\r\n      finalPath = path.normalize(path.join(this.topPath, this.cwd, fileName));\r\n    }\r\n\r\n    if (\r\n      finalPath.indexOf(topAbsolutePath) !== 0 &&\r\n      topAbsolutePath !== \"/\" &&\r\n      topAbsolutePath !== \"\\\\\"\r\n    )\r\n      throw new Error(ERROR_MSG_01);\r\n    return finalPath;\r\n  }\r\n\r\n  checkPath(fileNameOrPath: string) {\r\n    if (this.isRootTopRath()) return true;\r\n    const destAbsolutePath = this.toAbsolutePath(fileNameOrPath);\r\n    const topAbsolutePath = this.topPath;\r\n    return destAbsolutePath.indexOf(topAbsolutePath) === 0;\r\n  }\r\n\r\n  check(destPath: string) {\r\n    if (this.isRootTopRath()) return true;\r\n    return this.checkPath(destPath) && fs.existsSync(this.toAbsolutePath(destPath));\r\n  }\r\n\r\n  cd(dirName: string) {\r\n    if (!this.check(dirName)) throw new Error(ERROR_MSG_01);\r\n    this.cwd = path.normalize(path.join(this.cwd, dirName));\r\n  }\r\n\r\n  list(page: 0, pageSize = 40, searchFileName?: string) {\r\n    if (pageSize > 100 || pageSize <= 0 || page < 0) throw new Error(\"Beyond the value limit\");\r\n    let fileNames = fs.readdirSync(this.toAbsolutePath());\r\n    if (searchFileName)\r\n      fileNames = fileNames.filter((name) =>\r\n        name.toLowerCase().includes(searchFileName.toLowerCase())\r\n      );\r\n\r\n    const total = fileNames.length;\r\n    const sliceStart = page * pageSize;\r\n    const sliceEnd = sliceStart + pageSize;\r\n    const files: IFile[] = [];\r\n    const dirs: IFile[] = [];\r\n    fileNames.forEach((name) => {\r\n      try {\r\n        const info = fs.statSync(this.toAbsolutePath(name));\r\n        const mode = parseInt(String(parseInt(info.mode?.toString(8), 10)).slice(-3));\r\n        const commonInfo = {\r\n          name: name,\r\n          size: info.size,\r\n          time: info.atime.toString(),\r\n          mode,\r\n          type: info.isFile() ? 1 : 0\r\n        };\r\n        if (info.isFile()) {\r\n          files.push(commonInfo);\r\n        } else {\r\n          dirs.push(commonInfo);\r\n        }\r\n      } catch (error: any) {\r\n        // Ignore a file information retrieval error to prevent an overall error\r\n      }\r\n    });\r\n    files.sort((a, b) => (a.name > b.name ? 1 : -1));\r\n    dirs.sort((a, b) => (a.name > b.name ? 1 : -1));\r\n    let resultList = dirs.concat(files);\r\n    resultList = resultList.slice(sliceStart, sliceEnd);\r\n    return {\r\n      items: resultList,\r\n      page,\r\n      pageSize,\r\n      total,\r\n      absolutePath: this.toAbsolutePath()\r\n    };\r\n  }\r\n\r\n  async chmod(fileName: string, chmodValue: number, deep: boolean) {\r\n    if (!this.check(fileName) || isNaN(parseInt(chmodValue as any))) throw new Error(ERROR_MSG_01);\r\n    const absPath = this.toAbsolutePath(fileName);\r\n    const defaultPath = \"/bin/chmod\";\r\n    let file = \"chmod\";\r\n    if (fs.existsSync(defaultPath)) file = defaultPath;\r\n    const params: string[] = [];\r\n    if (deep) params.push(\"-R\");\r\n    params.push(String(chmodValue));\r\n    params.push(absPath);\r\n    return await new ProcessWrapper(file, params, \".\", 60 * 10).start();\r\n  }\r\n\r\n  async readFile(fileName: string) {\r\n    if (!this.check(fileName)) throw new Error(ERROR_MSG_01);\r\n    const absPath = this.toAbsolutePath(fileName);\r\n    const buf = await fs.readFile(absPath);\r\n    const text = iconv.decode(buf, this.fileCode || \"utf-8\");\r\n    return text;\r\n  }\r\n\r\n  async writeFile(fileName: string, data: string) {\r\n    if (!this.check(fileName)) throw new Error(ERROR_MSG_01);\r\n    const absPath = this.toAbsolutePath(fileName);\r\n    const buf = iconv.encode(data, this.fileCode || \"utf-8\");\r\n    return await fs.writeFile(absPath, buf);\r\n  }\r\n\r\n  async newFile(fileName: string) {\r\n    // if (!FileManager.checkFileName(fileName)) throw new Error(ERROR_MSG_01);\r\n    if (!this.checkPath(fileName)) throw new Error(ERROR_MSG_01);\r\n    const target = this.toAbsolutePath(fileName);\r\n    fs.createFile(target);\r\n  }\r\n\r\n  async copy(target1: string, target2: string) {\r\n    if (!this.checkPath(target2) || !this.check(target1)) throw new Error(ERROR_MSG_01);\r\n    const targetPath = this.toAbsolutePath(target1);\r\n    target2 = this.toAbsolutePath(target2);\r\n    return await fs.copy(targetPath, target2);\r\n  }\r\n\r\n  mkdir(target: string) {\r\n    if (!this.checkPath(target)) throw new Error(ERROR_MSG_01);\r\n    const targetPath = this.toAbsolutePath(target);\r\n    return fs.mkdirSync(targetPath);\r\n  }\r\n\r\n  async delete(target: string): Promise<boolean> {\r\n    if (!this.check(target)) throw new Error(ERROR_MSG_01);\r\n    const targetPath = this.toAbsolutePath(target);\r\n    return new Promise((r, j) => {\r\n      fs.remove(targetPath, (err) => {\r\n        if (!err) r(true);\r\n        else j(err);\r\n      });\r\n    });\r\n  }\r\n\r\n  async move(target: string, destPath: string) {\r\n    if (!this.check(target)) throw new Error(ERROR_MSG_01);\r\n    if (!this.checkPath(destPath)) throw new Error(ERROR_MSG_01);\r\n    const targetPath = this.toAbsolutePath(target);\r\n    destPath = this.toAbsolutePath(destPath);\r\n    await fs.move(targetPath, destPath);\r\n  }\r\n\r\n  private zipFileCheck(path: string) {\r\n    const fileInfo = fs.statSync(path);\r\n    const MAX_ZIP_GB = globalConfiguration.config.maxZipFileSize;\r\n    if (fileInfo.size > 1024 * 1024 * 1024 * MAX_ZIP_GB)\r\n      throw new Error($t(\"TXT_CODE_system_file.unzipLimit\", { max: MAX_ZIP_GB }));\r\n  }\r\n\r\n  async unzip(sourceZip: string, destDir: string, code?: string) {\r\n    if (!code) code = this.fileCode;\r\n    if (!this.check(sourceZip) || !this.checkPath(destDir)) throw new Error(ERROR_MSG_01);\r\n    this.zipFileCheck(this.toAbsolutePath(sourceZip));\r\n    return await decompress(this.toAbsolutePath(sourceZip), this.toAbsolutePath(destDir), code);\r\n  }\r\n\r\n  async zip(sourceZip: string, files: string[], code?: string) {\r\n    if (!code) code = this.fileCode;\r\n    if (!this.checkPath(sourceZip)) throw new Error(ERROR_MSG_01);\r\n    const MAX_ZIP_GB = globalConfiguration.config.maxZipFileSize;\r\n    const MAX_TOTAL_FIELS_SIZE = 1024 * 1024 * 1024 * MAX_ZIP_GB;\r\n    const sourceZipPath = this.toAbsolutePath(sourceZip);\r\n    const filesPath = [];\r\n    let totalSize = 0;\r\n    for (const iterator of files) {\r\n      if (this.check(iterator)) {\r\n        filesPath.push(this.toAbsolutePath(iterator));\r\n        try {\r\n          totalSize += fs.statSync(this.toAbsolutePath(iterator))?.size;\r\n        } catch (error: any) {}\r\n      }\r\n    }\r\n    if (totalSize > MAX_TOTAL_FIELS_SIZE)\r\n      throw new Error($t(\"TXT_CODE_system_file.unzipLimit\", { max: MAX_ZIP_GB }));\r\n    return await compress(sourceZipPath, filesPath, code);\r\n  }\r\n\r\n  async edit(target: string, data?: string) {\r\n    if (!this.check(target)) throw new Error(ERROR_MSG_01);\r\n    if (data || typeof data === \"string\") {\r\n      return await this.writeFile(target, data);\r\n    } else {\r\n      const absPath = this.toAbsolutePath(target);\r\n      const info = fs.statSync(absPath);\r\n      if (info.size > MAX_EDIT_SIZE) {\r\n        throw new Error($t(\"TXT_CODE_system_file.execLimit\"));\r\n      }\r\n      return await this.readFile(target);\r\n    }\r\n  }\r\n\r\n  rename(target: string, newName: string) {\r\n    if (!this.check(target)) throw new Error(ERROR_MSG_01);\r\n    if (!this.checkPath(newName)) throw new Error(ERROR_MSG_01);\r\n    const targetPath = this.toAbsolutePath(target);\r\n    const newPath = this.toAbsolutePath(newName);\r\n    fs.renameSync(targetPath, newPath);\r\n  }\r\n\r\n  public static checkFileName(fileName?: string): boolean {\r\n    if (!fileName) return false;\r\n    const blackKeys = [\"/\", \"\\\\\", \"|\", \"?\", \"*\", \">\", \"<\", \";\", '\"'];\r\n    for (const ch of blackKeys) {\r\n      if (fileName.includes(ch)) return false;\r\n    }\r\n    return true;\r\n  }\r\n}\r\n","import \"module-alias/register\";\r\nimport os from \"os\";\r\nimport { $t } from \"./app/i18n\";\r\nimport { initVersionManager, getVersion } from \"./app/version\";\r\nimport RedisStorage from \"./app/common/storage/redis_storage\";\r\nimport Storage from \"./app/common/storage/sys_storage\";\r\nimport { initSystemConfig, systemConfig } from \"./app/setting\";\r\nimport SystemUser from \"./app/service/user_service\";\r\nimport SystemRemoteService from \"./app/service/remote_service\";\r\nimport Koa from \"koa\";\r\nimport { v4 } from \"uuid\";\r\nimport path from \"path\";\r\nimport koaBody, { HttpMethodEnum } from \"koa-body-patch\";\r\nimport session from \"koa-session\";\r\nimport koaStatic from \"koa-static\";\r\nimport http from \"http\";\r\nimport open from \"open\";\r\nimport { fileLogger, logger } from \"./app/service/log\";\r\nimport { middleware as protocolMiddleware } from \"./app/middleware/protocol\";\r\nimport { mountRouters } from \"./app/index\";\r\nimport versionAdapter from \"./app/service/version_adapter\";\r\nimport { removeTrail } from \"common\";\r\n\r\nfunction hasParams(name: string) {\r\n  return process.argv.includes(name);\r\n}\r\n\r\nfunction setupHttp(koaApp: Koa, port: number, host?: string) {\r\n  const httpServer = http.createServer(koaApp.callback());\r\n\r\n  httpServer.on(\"error\", (err) => {\r\n    logger.error($t(\"TXT_CODE_app.httpSetupError\"));\r\n    logger.error(err);\r\n    process.exit(1);\r\n  });\r\n\r\n  httpServer.listen(port, host);\r\n  logger.info(\"==================================\");\r\n  logger.info($t(\"TXT_CODE_app.panelStarted\"));\r\n  logger.info($t(\"TXT_CODE_app.reference\"));\r\n  logger.info($t(\"TXT_CODE_app.host\", { port }));\r\n  logger.info($t(\"TXT_CODE_app.portTip\", { port }));\r\n  logger.info($t(\"TXT_CODE_app.exitTip\", { port }));\r\n  logger.info(\"==================================\");\r\n\r\n  if (os.platform() == \"win32\" && hasParams(\"--open\")) {\r\n    open(`http://localhost:${port}/`);\r\n  }\r\n}\r\n\r\nasync function processExit() {\r\n  try {\r\n    logger.warn($t(\"TXT_CODE_cea5dba1\"));\r\n    logger.warn($t(\"TXT_CODE_b0aa2db9\"));\r\n  } catch (err) {\r\n    logger.error(err);\r\n  } finally {\r\n    process.exit(0);\r\n  }\r\n}\r\n\r\n[\"SIGTERM\", \"SIGINT\", \"SIGQUIT\"].forEach(function (sig) {\r\n  process.on(sig, () => {\r\n    logger.warn(`${sig} close process signal detected.`);\r\n    processExit();\r\n  });\r\n});\r\n\r\nprocess.stdin.on(\"data\", (v) => {\r\n  const command = v.toString().replace(\"\\n\", \"\").replace(\"\\r\", \"\").trim().toLowerCase();\r\n  if (command === \"exit\") processExit();\r\n});\r\n\r\nasync function main() {\r\n  // load global configuration file\r\n  initSystemConfig();\r\n\r\n  if (systemConfig && systemConfig?.redisUrl?.length != 0) {\r\n    await RedisStorage.initialize(systemConfig.redisUrl);\r\n    Storage.setStorageType(Storage.TYPE.REDIS);\r\n  }\r\n\r\n  initVersionManager();\r\n  const VERSION = getVersion();\r\n\r\n  console.log(`______  _______________________  ___                                         \r\n___   |/  /_  ____/_  ___/__   |/  /_____ _____________ _______ _____________\r\n__  /|_/ /_  /    _____ \\\\__  /|_/ /_  __ \\`/_  __ \\\\  __ \\`/_  __ \\`/  _ \\\\_  ___/\r\n_  /  / / / /___  ____/ /_  /  / / / /_/ /_  / / / /_/ /_  /_/ //  __/  /    \r\n/_/  /_/  \\\\____/  /____/ /_/  /_/  \\\\__,_/ /_/ /_/\\\\__,_/ _\\\\__, / \\\\___//_/     \r\n                                                        /____/     \r\n\r\n + Copyright ${new Date().getFullYear()} MCSManager Dev <https://github.com/MCSManager>\r\n + Version ${VERSION}\r\n`);\r\n\r\n  // Detect whether the configuration file is from an older version and update it if so.\r\n  versionAdapter.detectConfig();\r\n\r\n  // Initialize services\r\n  await SystemUser.initialize();\r\n  await SystemRemoteService.initialize();\r\n\r\n  const app = new Koa();\r\n\r\n  // Listen for Koa errors\r\n  app.on(\"error\", (error) => {\r\n    // Block all Koa framework level events\r\n    // When Koa is attacked by a short connection flood, it is easy for error messages to swipe the screen, which may indirectly affect the operation of some applications\r\n  });\r\n\r\n  app.use(\r\n    koaBody({\r\n      multipart: true,\r\n      parsedMethods: [\r\n        HttpMethodEnum.GET,\r\n        HttpMethodEnum.PUT,\r\n        HttpMethodEnum.POST,\r\n        HttpMethodEnum.DELETE\r\n      ],\r\n      formidable: {\r\n        maxFieldsSize: Number.MAX_VALUE,\r\n        maxFileSize: Number.MAX_VALUE,\r\n        maxFiles: 1\r\n      },\r\n      jsonLimit: \"10mb\",\r\n      onError(err, ctx) {\r\n        logger.error(\"koaBody Lib Error:\", err);\r\n      }\r\n    })\r\n  );\r\n\r\n  app.keys = [v4()];\r\n  app.use(\r\n    session(\r\n      {\r\n        key: v4(),\r\n        maxAge: 86400000,\r\n        overwrite: true,\r\n        httpOnly: true,\r\n        signed: true,\r\n        rolling: false,\r\n        renew: false,\r\n        secure: false\r\n      },\r\n      app\r\n    )\r\n  );\r\n\r\n  app.use(async (ctx, next) => {\r\n    const ignoreUrls = [\"/api/overview\", \"/api/files/status\"];\r\n    for (const iterator of ignoreUrls) {\r\n      if (ctx.URL.pathname.includes(iterator)) return await next();\r\n    }\r\n    fileLogger.info(`[HTTP] ${ctx.method}: ${ctx.URL.href}`);\r\n    fileLogger.info(\r\n      `[HTTP] IP: ${ctx.ip} USER: ${ctx.session?.userName} UUID: ${ctx.session?.uuid}`\r\n    );\r\n    await next();\r\n  });\r\n\r\n  if (systemConfig && systemConfig.prefix != \"\") {\r\n    const prefix = systemConfig.prefix;\r\n    app.use(async (ctx, next) => {\r\n      if (ctx.url.startsWith(prefix)) {\r\n        const orig = ctx.url;\r\n        ctx.url = ctx.url.slice(prefix.length);\r\n        if (!ctx.url.startsWith(\"/\")) {\r\n          ctx.url = \"/\" + ctx.url;\r\n        }\r\n        await next();\r\n        ctx.url = orig;\r\n      } else {\r\n        ctx.redirect(removeTrail(prefix, \"/\") + ctx.url);\r\n      }\r\n    });\r\n  }\r\n  app.use(protocolMiddleware);\r\n  app.use(\r\n    koaStatic(path.join(process.cwd(), \"public\"), {\r\n      maxAge: 10 * 24 * 60 * 60\r\n    })\r\n  );\r\n\r\n  mountRouters(app);\r\n\r\n  process.on(\"uncaughtException\", function (err) {\r\n    logger.error(`ERROR (uncaughtException):`, err);\r\n  });\r\n\r\n  process.on(\"unhandledRejection\", (reason, p) => {\r\n    logger.error(`ERROR (unhandledRejection):`, reason, p);\r\n  });\r\n\r\n  if (systemConfig) setupHttp(app, systemConfig.httpPort, systemConfig.httpIp);\r\n}\r\n\r\nmain().catch((err) => {\r\n  logger.error(\"main() error:\", err);\r\n  process.exit(0);\r\n});\r\n","import { IStorage } from \"./storage_interface\";\r\nimport { StorageSubsystem } from \"common\";\r\n\r\nconst storage = new StorageSubsystem();\r\n\r\nclass FileStorageSubsystemAdapter implements IStorage {\r\n  public async store(category: string, uuid: string, object: any) {\r\n    return storage.store(category, uuid, object);\r\n  }\r\n\r\n  public async load(category: string, classz: any, uuid: string) {\r\n    return storage.load(category, classz, uuid);\r\n  }\r\n\r\n  public async list(category: string) {\r\n    return storage.list(category);\r\n  }\r\n\r\n  public async delete(category: string, uuid: string) {\r\n    return storage.delete(category, uuid);\r\n  }\r\n}\r\n\r\nexport default new FileStorageSubsystemAdapter();\r\n","import { createClient } from \"redis\";\r\nimport { IStorage } from \"./storage_interface\";\r\nimport Storage from \"./sys_storage\";\r\nimport { logger } from \"../../service/log\";\r\n\r\nclass RedisStorageSubsystem implements IStorage {\r\n  private client = createClient();\r\n\r\n  private async connect() {\r\n    try {\r\n      await this.client.connect();\r\n    } catch (e) {\r\n      logger.error(\"Error occurred while trying to dial redis\\n\" + e);\r\n      logger.warn(\"Due to an unrecoverable error, daemon will temporarily store data in files.\");\r\n      Storage.setStorageType(0);\r\n    }\r\n  }\r\n\r\n  /*\r\n  Redis commands\r\n   */\r\n  private async keys(param: string) {\r\n    return await this.client.keys(param);\r\n  }\r\n\r\n  private async set(key: string, value: string) {\r\n    await this.client.set(key, value);\r\n  }\r\n\r\n  private async get(key: string) {\r\n    return await this.client.get(key);\r\n  }\r\n\r\n  private async del(key: string) {\r\n    await this.client.del(key);\r\n  }\r\n\r\n  public async initialize(url: string) {\r\n    this.client = createClient({ url: url });\r\n    logger.info(\"Attempting to connect to redis...\");\r\n    await this.connect();\r\n    logger.info(\"Connected to redis!\");\r\n  }\r\n\r\n  // Keep behavior same\r\n  private checkFileName(name: string) {\r\n    const blackList = [\"\\\\\", \"/\", \"..\"];\r\n    for (const ch of blackList) {\r\n      if (name.includes(ch)) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Stored in local file based on class definition and identifier\r\n   */\r\n  public async store(category: string, uuid: string, object: any) {\r\n    if (!this.checkFileName(uuid))\r\n      throw new Error(`UUID ${uuid} does not conform to specification`);\r\n    await this.set(category + \":\" + uuid, JSON.stringify(object));\r\n  }\r\n\r\n  /**\r\n   * Instantiate an object based on the class definition and identifier\r\n   */\r\n  public async load(category: string, classz: any, uuid: string) {\r\n    if (!this.checkFileName(uuid))\r\n      throw new Error(`UUID ${uuid} does not conform to specification`);\r\n    let result = await this.get(category + \":\" + uuid);\r\n    if (result == null) {\r\n      return null;\r\n    }\r\n    const dataObject = JSON.parse(result);\r\n    const target = new classz();\r\n    return this.defineAttr(target, dataObject);\r\n  }\r\n\r\n  /**\r\n   * Return all identifiers related to this class through the class definition\r\n   */\r\n  public async list(category: string) {\r\n    let result: string[] = [];\r\n    let m = Array<string>();\r\n    result = await this.keys(category + \"*\");\r\n    if (result != null && result.length != 0) {\r\n      for (let i of result) m.push(i.replace(category + \":\", \"\"));\r\n    }\r\n    return m;\r\n  }\r\n\r\n  /**\r\n   * Delete an identifier instance of the specified type through the class definition\r\n   */\r\n  public async delete(category: string, uuid: string) {\r\n    if (!this.checkFileName(uuid))\r\n      throw new Error(`UUID ${uuid} does not conform to specification`);\r\n    await this.del(category + \":\" + uuid);\r\n  }\r\n\r\n  // deep copy of the primitive type with the copy target as the prototype\r\n  // target copy target object copy source\r\n  protected defineAttr(target: any, object: any): any {\r\n    for (const v of Object.keys(target)) {\r\n      const objectValue = object[v];\r\n      if (objectValue === undefined) continue;\r\n      if (objectValue instanceof Array) {\r\n        target[v] = objectValue;\r\n        continue;\r\n      }\r\n      if (objectValue instanceof Object && typeof objectValue === \"object\") {\r\n        this.defineAttr(target[v], objectValue);\r\n        continue;\r\n      }\r\n      target[v] = objectValue;\r\n    }\r\n    return target;\r\n  }\r\n}\r\n\r\nexport default new RedisStorageSubsystem();\r\n","import { IStorage } from \"./storage_interface\";\r\nimport file_storage from \"./file_storage\";\r\nimport redis_storage from \"./redis_storage\";\r\n\r\nclass SystemStorage {\r\n  private storageSystem: IStorage = file_storage;\r\n\r\n  public readonly TYPE = {\r\n    FILE: 0,\r\n    REDIS: 1\r\n  };\r\n\r\n  public setStorageType(type: number) {\r\n    switch (type) {\r\n      case this.TYPE.FILE: {\r\n        // Using fs-based storage\r\n        this.storageSystem = file_storage;\r\n        break;\r\n      }\r\n      case this.TYPE.REDIS: {\r\n        // Using redis-based storage\r\n        this.storageSystem = redis_storage;\r\n        break;\r\n      }\r\n      default: {\r\n        this.storageSystem = file_storage;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  public getStorage() {\r\n    return this.storageSystem;\r\n  }\r\n}\r\n\r\nexport default new SystemStorage();\r\n","import { StorageSubsystem } from \"common\";\r\nexport default new StorageSubsystem();\r\n","const FILENAME_BLACKLIST = [\"\\\\\", \"/\", \".\", \"'\", '\"', \"?\", \"*\", \"<\", \">\"];\r\n\r\nexport { FILENAME_BLACKLIST };\r\n","import { SocketOptions, ManagerOptions } from \"socket.io-client\";\r\nexport interface IPacket {\r\n  uuid: string;\r\n  status: number;\r\n  event: string;\r\n  data: any;\r\n}\r\n\r\nexport interface IRequestPacket {\r\n  uuid: string;\r\n  data: any;\r\n}\r\n\r\nexport interface IUser {\r\n  uuid?: string;\r\n  userName?: string;\r\n  passWord?: string;\r\n  salt?: string;\r\n  permission?: number;\r\n  registerTime?: string;\r\n  loginTime?: string;\r\n  instances?: Array<any>;\r\n  isInit?: boolean;\r\n  passWordType?: number;\r\n  secret?: string;\r\n  open2FA?: boolean;\r\n}\r\n\r\nexport interface ICompleteUser {\r\n  uuid: string;\r\n  userName: string;\r\n  permission: number;\r\n  instances: Array<any>;\r\n  registerTime: string;\r\n  loginTime: string;\r\n}\r\n\r\nexport interface IRemoteService {\r\n  uuid?: string;\r\n  ip?: string;\r\n  port?: number;\r\n  prefix?: string;\r\n  remarks?: string;\r\n  apiKey?: string;\r\n}\r\n\r\n// @Entity\r\nexport class RemoteServiceConfig {\r\n  public ip = \"\";\r\n  public port = 24444;\r\n  public prefix = \"\";\r\n  public remarks = \"\";\r\n  public apiKey = \"\";\r\n  connectOpts: Partial<SocketOptions & ManagerOptions> = {\r\n    multiplex: false,\r\n    reconnectionDelayMax: 1000 * 3,\r\n    timeout: 1000 * 3,\r\n    reconnection: true,\r\n    reconnectionAttempts: 20,\r\n    rejectUnauthorized: false\r\n  };\r\n}\r\n","import { io, Socket, SocketOptions, ManagerOptions } from \"socket.io-client\";\r\nimport { RemoteServiceConfig } from \"./entity_interface\";\r\nimport { logger } from \"../service/log\";\r\nimport RemoteRequest from \"../service/remote_command\";\r\nimport { InstanceStreamListener, removeTrail } from \"common\";\r\nimport { $t, i18next } from \"../i18n\";\r\n\r\nexport default class RemoteService {\r\n  public static readonly STATUS_OK = 200;\r\n  public static readonly STATUS_ERR = 500;\r\n\r\n  public uuid: string = \"\";\r\n  public available: boolean = false;\r\n  public socket?: Socket;\r\n  public readonly instanceStream = new InstanceStreamListener();\r\n  public config: RemoteServiceConfig;\r\n\r\n  constructor(uuid: string, config: RemoteServiceConfig) {\r\n    this.uuid = uuid;\r\n    this.config = config;\r\n  }\r\n\r\n  public connect(connectOpts?: Partial<SocketOptions & ManagerOptions>) {\r\n    if (connectOpts) this.config.connectOpts = connectOpts;\r\n    // Start the formal connection to the remote Socket program\r\n    let addr = `ws://${this.config.ip}:${this.config.port}`;\r\n    if (this.config.ip.indexOf(\"wss://\") === 0 || this.config.ip.indexOf(\"ws://\") === 0) {\r\n      addr = `${this.config.ip}:${this.config.port}`;\r\n    }\r\n    const daemonInfo = `[${this.uuid}] [${addr}/${this.config.remarks}]`;\r\n\r\n    if (this.available) {\r\n      logger.info(`${$t(\"TXT_CODE_daemonInfo.resetConnect\")}:${daemonInfo}`);\r\n      this.disconnect();\r\n    }\r\n\r\n    // prevent duplicate registration of events\r\n    if (this.socket && this.socket.hasListeners(\"connect\")) {\r\n      logger.info(`${$t(\"TXT_CODE_daemonInfo.replaceConnect\")}:${daemonInfo}`);\r\n      return this.refreshReconnect();\r\n    }\r\n\r\n    logger.info(`${$t(\"TXT_CODE_daemonInfo.tryConnect\")}:${daemonInfo}`);\r\n    this.socket = io(addr, {\r\n      ...this.config.connectOpts,\r\n      path: removeTrail(this.config.prefix, \"/\") + \"/socket.io\"\r\n    });\r\n\r\n    // register built-in events\r\n    this.socket.on(\"connect\", async () => {\r\n      logger.info($t(\"TXT_CODE_daemonInfo.connect\", { v: daemonInfo }));\r\n      await this.onConnect();\r\n    });\r\n    this.socket.on(\"disconnect\", async () => {\r\n      logger.info($t(\"TXT_CODE_daemonInfo.disconnect\", { v: daemonInfo }));\r\n      await this.onDisconnect();\r\n    });\r\n    this.socket.on(\"connect_error\", async (error: Error) => {\r\n      await this.onDisconnect();\r\n    });\r\n  }\r\n\r\n  public async setLanguage(language?: string) {\r\n    if (!language) language = i18next.language;\r\n    logger.info(\r\n      `${$t(\"TXT_CODE_daemonInfo.setLanguage\")} (${this.config.ip}:${this.config.port}/${\r\n        this.config.remarks\r\n      }) language: ${language}`\r\n    );\r\n    return await new RemoteRequest(this).request(\"info/setting\", {\r\n      language\r\n    });\r\n  }\r\n\r\n  // This function is used to verify the identity. It only needs to be verified once.\r\n  // This function will be executed automatically after the connection event is triggered.\r\n  // Generally, there is no need to execute it manually.\r\n  public async auth(key?: string) {\r\n    if (key) this.config.apiKey = key;\r\n    const daemonInfo = `[${this.uuid}] [${this.config.ip}:${this.config.port}]`;\r\n    try {\r\n      const res = await new RemoteRequest(this).request(\"auth\", this.config.apiKey, 5000, true);\r\n      if (res === true) {\r\n        this.available = true;\r\n        await this.setLanguage();\r\n        logger.info($t(\"TXT_CODE_daemonInfo.authSuccess\", { v: daemonInfo }));\r\n        return true;\r\n      }\r\n      this.available = false;\r\n      logger.warn($t(\"TXT_CODE_daemonInfo.authFailure\", { v: daemonInfo }));\r\n      return false;\r\n    } catch (error: any) {\r\n      logger.warn($t(\"TXT_CODE_daemonInfo.authError\", { v: daemonInfo }));\r\n      logger.warn(error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public emit(event: string, data?: any) {\r\n    return this.socket?.emit(event, data);\r\n  }\r\n\r\n  private async onDisconnect() {\r\n    this.available = false;\r\n  }\r\n\r\n  private async onConnect() {\r\n    // this.available = true; Note: Connected is not auth;\r\n    return await this.auth(this.config.apiKey);\r\n  }\r\n\r\n  disconnect() {\r\n    if (this.socket) {\r\n      const daemonInfo = `[${this.uuid}] [${this.config.ip}:${this.config.port}]`;\r\n      logger.info($t(\"TXT_CODE_daemonInfo.closed\", { v: daemonInfo }));\r\n      this.socket.removeAllListeners();\r\n      this.socket.disconnect();\r\n      this.socket.close();\r\n      delete this.socket;\r\n    }\r\n    this.socket = undefined;\r\n    this.available = false;\r\n  }\r\n\r\n  refreshReconnect() {\r\n    this.disconnect();\r\n    this.connect();\r\n  }\r\n}\r\n","// @Entity\r\nexport default class SystemConfig {\r\n  // HTTP service port, IP and path prefix\r\n  httpPort: number = 23333;\r\n  httpIp: string = \"\";\r\n  prefix: string = \"\";\r\n\r\n  // reverse proxy mode\r\n  reverseProxyMode: boolean = false;\r\n\r\n  // data transfer port\r\n  dataPort: number = 23334;\r\n\r\n  // Distributed forwarding mode\r\n  forwardType: number = 1;\r\n\r\n  // Whether to allow cross-domain requests\r\n  crossDomain: boolean = false;\r\n  // Whether to use Gzip compression for HTTP return information\r\n  gzip: boolean = false;\r\n  // Maximum simultaneous compression tasks\r\n  maxCompress: number = 1;\r\n  // Maximum simultaneous download tasks\r\n  maxDownload: number = 10;\r\n  // Decompression implementation form\r\n  zipType: number = 1;\r\n  // Login times IP limit\r\n  loginCheckIp: boolean = true;\r\n  // login interface copy\r\n  loginInfo: string = \"\";\r\n  // Whether to open the file management function for ordinary users\r\n  canFileManager = true;\r\n\r\n  // Whether to allow template-based instance reset, which may pose a security risk.\r\n  // If you use Docker and need commercial functionality, you can try turning this feature on and testing it.\r\n  allowUsePreset = false;\r\n\r\n  // i18n\r\n  language = \"en_us\";\r\n\r\n  // Quick installation address\r\n  presetPackAddr = \"https://script.mcsmanager.com/templates.json\";\r\n  redisUrl = \"\";\r\n}\r\n","import { IUser } from \"./entity_interface\";\r\n\r\nexport enum UserPassWordType {\r\n  md5 = 0,\r\n  bcrypt = 1\r\n}\r\n\r\nexport interface IUserApp {\r\n  instanceUuid: string;\r\n  daemonId: string;\r\n  instanceInfo?: any;\r\n}\r\n\r\nexport class User implements IUser {\r\n  uuid: string = \"\";\r\n  userName: string = \"\";\r\n  passWord: string = \"\";\r\n  passWordType: number = UserPassWordType.bcrypt;\r\n  salt: string = \"\";\r\n  permission: number = 0;\r\n  registerTime: string = \"\";\r\n  loginTime: string = \"\";\r\n  instances: Array<IUserApp> = [];\r\n  apiKey: string = \"\";\r\n  isInit: boolean = false;\r\n  secret = \"\";\r\n  open2FA = false;\r\n}\r\n\r\nexport enum ROLE {\r\n  ADMIN = 10,\r\n  USER = 1,\r\n  GUEST = 0,\r\n  BAN = -1\r\n}\r\n","// I18n init configuration (Web Panel)\r\n// If you want to add the language of your own country, you need to add the code here.\r\n\r\nimport i18next from \"i18next\";\r\n\r\nimport zh_cn from \"@languages/zh_CN.json\";\r\nimport en_us from \"@languages/en_US.json\";\r\nimport zh_tw from \"@languages/zh_TW.json\";\r\nimport ja_JP from \"@languages/ja_JP.json\";\r\nimport es_ES from \"@languages/es_ES.json\";\r\nimport fr_FR from \"@languages/fr_FR.json\";\r\nimport ru_RU from \"@languages/ru_RU.json\";\r\nimport ko_KR from \"@languages/ko_KR.json\";\r\nimport de_DE from \"@languages/de_DE.json\";\r\nimport pt_BR from \"@languages/pt_BR.json\";\r\n\r\ni18next.init({\r\n  interpolation: {\r\n    escapeValue: false\r\n  },\r\n  lng: \"en_us\",\r\n  fallbackLng: \"en_us\",\r\n  resources: {\r\n    en_us: {\r\n      translation: en_us\r\n    },\r\n    zh_cn: {\r\n      translation: zh_cn\r\n    },\r\n    zh_tw: {\r\n      translation: zh_tw\r\n    },\r\n    ja_jp: {\r\n      translation: ja_JP\r\n    },\r\n    es_es: {\r\n      translation: es_ES\r\n    },\r\n    fr_fr: {\r\n      translation: fr_FR\r\n    },\r\n    ru_ru: {\r\n      translation: ru_RU\r\n    },\r\n    ko_kr: {\r\n      translation: ko_KR\r\n    },\r\n    de_de: {\r\n      translation: de_DE\r\n    },\r\n    pt_br: {\r\n      translation: pt_BR\r\n    }\r\n  }\r\n});\r\n\r\n// alias\r\nconst $t = i18next.t;\r\n\r\nexport { $t, i18next };\r\n","import Koa from \"koa\";\r\nimport Router from \"@koa/router\";\r\n\r\nimport \"./service/user_service\";\r\nimport \"./service/visual_data\";\r\nimport \"./service/remote_service\";\r\nimport \"./service/user_statistics\";\r\n\r\nimport overviewRouter from \"./routers/overview_router\";\r\nimport userRouter from \"./routers/user_overview_router\";\r\nimport loginRouter from \"./routers/login_router\";\r\nimport lowUserRouter from \"./routers/general_user_router\";\r\nimport settingsRouter from \"./routers/settings_router\";\r\nimport instanceRouter from \"./routers/instance_admin_router\";\r\nimport userInstanceRouter from \"./routers/instance_operate_router\";\r\nimport serviceRouter from \"./routers/daemon_router\";\r\nimport filemanager_router from \"./routers/filemananger_router\";\r\nimport businessInstanceRouter from \"./routers/business_instance_router\";\r\nimport businessUserRouter from \"./routers/manage_user_router\";\r\nimport scheduleRouter from \"./routers/schedule_router\";\r\nimport environmentRouter from \"./routers/environment_router\";\r\nimport exchangeRouter from \"./routers/instance_exchange_router\";\r\n\r\nexport function mountRouters(app: Koa<Koa.DefaultState, Koa.DefaultContext>) {\r\n  const apiRouter = new Router({ prefix: \"/api\" });\r\n  apiRouter.use(overviewRouter.routes()).use(overviewRouter.allowedMethods());\r\n  apiRouter.use(userInstanceRouter.routes()).use(userInstanceRouter.allowedMethods());\r\n  apiRouter.use(instanceRouter.routes()).use(instanceRouter.allowedMethods());\r\n  apiRouter.use(serviceRouter.routes()).use(serviceRouter.allowedMethods());\r\n  apiRouter.use(filemanager_router.routes()).use(filemanager_router.allowedMethods());\r\n  apiRouter.use(businessInstanceRouter.routes()).use(businessInstanceRouter.allowedMethods());\r\n  apiRouter.use(businessUserRouter.routes()).use(businessUserRouter.allowedMethods());\r\n  apiRouter.use(loginRouter.routes()).use(loginRouter.allowedMethods());\r\n  apiRouter.use(lowUserRouter.routes()).use(lowUserRouter.allowedMethods());\r\n  apiRouter.use(userRouter.routes()).use(userRouter.allowedMethods());\r\n  apiRouter.use(scheduleRouter.routes()).use(scheduleRouter.allowedMethods());\r\n  apiRouter.use(settingsRouter.routes()).use(settingsRouter.allowedMethods());\r\n  apiRouter.use(environmentRouter.routes()).use(environmentRouter.allowedMethods());\r\n  apiRouter.use(exchangeRouter.routes()).use(exchangeRouter.allowedMethods());\r\n\r\n  app.use(apiRouter.routes()).use(apiRouter.allowedMethods());\r\n}\r\n","import Koa from \"koa\";\r\nimport { GlobalVariable } from \"common\";\r\nimport userSystem from \"../service/user_service\";\r\nimport { getUuidByApiKey, ILLEGAL_ACCESS_KEY, isAjax, logout } from \"../service/passport_service\";\r\nimport { $t } from \"../i18n\";\r\n\r\nfunction requestSpeedLimit(ctx: Koa.ParameterizedContext) {\r\n  const SESSION_REQ_TIME = \"lastRequestTime\";\r\n  const INV = 40;\r\n  const currentTime = new Date().getTime();\r\n  const LastTime = ctx.session?.[SESSION_REQ_TIME];\r\n  if (!ctx.session) return false;\r\n  if (LastTime && typeof LastTime === \"number\") {\r\n    if (currentTime - LastTime < INV) return false;\r\n    ctx.session[SESSION_REQ_TIME] = currentTime;\r\n  } else {\r\n    ctx.session[SESSION_REQ_TIME] = currentTime;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n// Failed callback\r\nfunction verificationFailed(ctx: Koa.ParameterizedContext) {\r\n  ctx.status = 403;\r\n  ctx.body = `[Forbidden] ${$t(\"TXT_CODE_permission.forbidden\")}`;\r\n}\r\n\r\nfunction tokenError(ctx: Koa.ParameterizedContext) {\r\n  ctx.status = 403;\r\n  ctx.body = `[Forbidden] ${$t(\"TXT_CODE_permission.forbiddenTokenError\")}`;\r\n}\r\n\r\nfunction ajaxError(ctx: Koa.ParameterizedContext) {\r\n  ctx.status = 403;\r\n  ctx.body = `[Forbidden] ${$t(\"TXT_CODE_permission.xmlhttprequestError\")}`;\r\n}\r\n\r\nfunction apiError(ctx: Koa.ParameterizedContext) {\r\n  ctx.status = 403;\r\n  ctx.body = `[Forbidden] ${$t(\"TXT_CODE_permission.apiError\")}`;\r\n}\r\n\r\nfunction tooFast(ctx: Koa.ParameterizedContext) {\r\n  ctx.status = 500;\r\n  ctx.body = `[TooFast] ${$t(\"TXT_CODE_permission.tooFast\")}`;\r\n}\r\n\r\ninterface IPermissionCfg {\r\n  token?: boolean;\r\n  level?: number | null;\r\n  speedLimit?: boolean;\r\n}\r\n\r\n// Basic user permission middleware\r\nexport default (parameter: IPermissionCfg) => {\r\n  return async (ctx: Koa.ParameterizedContext, next: Function) => {\r\n    if (\r\n      (parameter.speedLimit == null || parameter.speedLimit === true) &&\r\n      Number(parameter.level) < 10\r\n    ) {\r\n      // Request speed check\r\n      if (!requestSpeedLimit(ctx)) {\r\n        return tooFast(ctx);\r\n      }\r\n    }\r\n\r\n    // If it is an API request, perform API-level permission judgment\r\n    /**\r\n     * @date update time: 2024-08-06\r\n     * @description Added a new \"API-KEY\" filling method\r\n     */\r\n    const key = ctx.request?.header[\"x-request-api-key\"] || ctx.query.apikey;\r\n    if (key) {\r\n      const apiKey = String(key);\r\n      const user = getUuidByApiKey(apiKey);\r\n      if (user && user.permission >= Number(parameter.level)) {\r\n        return await next();\r\n      } else {\r\n        return apiError(ctx);\r\n      }\r\n    }\r\n\r\n    // If the route requires Token verification, it will be verified, the default is automatic verification\r\n    if (parameter.token !== false) {\r\n      if (!isAjax(ctx)) return ajaxError(ctx);\r\n      const requestToken = ctx.query.token;\r\n      const realToken = ctx.session?.[\"token\"];\r\n      if (requestToken !== realToken) {\r\n        return tokenError(ctx);\r\n      }\r\n    }\r\n\r\n    // If the permission attribute is a number, the permission determination is automatically executed\r\n    if (!isNaN(parseInt(String(parameter.level)))) {\r\n      // The most basic authentication decision\r\n      if (ctx.session?.[\"login\"] === true && ctx.session[\"uuid\"] && ctx.session[\"userName\"]) {\r\n        const user = userSystem.getInstance(ctx.session[\"uuid\"]);\r\n\r\n        // ban check\r\n        if (user && user.permission < 0) {\r\n          return logout(ctx);\r\n        }\r\n\r\n        // Judgment of permissions for ordinary users and administrative users\r\n        if (user && user.permission >= Number(parameter.level)) {\r\n          return await next();\r\n        }\r\n      }\r\n      // END: to verificationFailed()\r\n    } else {\r\n      return await next();\r\n    }\r\n\r\n    // record the number of unauthorized access\r\n    GlobalVariable.set(ILLEGAL_ACCESS_KEY, GlobalVariable.get(ILLEGAL_ACCESS_KEY, 0) + 1);\r\n    return verificationFailed(ctx);\r\n  };\r\n};\r\n","import Koa from \"koa\";\r\nimport { Stream } from \"stream\";\r\nimport VisualDataSubsystem from \"../service/visual_data\";\r\nimport { systemConfig } from \"../setting\";\r\nimport { getVersion } from \"../version\";\r\n\r\n// Define standard response data format middleware\r\nexport async function middleware(\r\n  ctx: Koa.ParameterizedContext<Koa.DefaultState, Koa.DefaultContext, any>,\r\n  next: Function\r\n): Promise<void> {\r\n  // Increase the number of interface requests\r\n  if (ctx.url.startsWith(\"/api/\")) {\r\n    VisualDataSubsystem.addRequestCount();\r\n  }\r\n\r\n  // Compatible with version 9.X API parameters\r\n  if (ctx.query?.remote_uuid) ctx.query.daemonId = ctx.query.remote_uuid;\r\n  if (ctx.query?.daemon_id) ctx.query.daemonId = ctx.query.daemon_id;\r\n\r\n  // Pass the next middleware, any errors and return data will be processed according to the response protocol\r\n  try {\r\n    await next();\r\n  } catch (error: any) {\r\n    ctx.body = error;\r\n  }\r\n\r\n  if (systemConfig?.crossDomain) {\r\n    ctx.response.set(\"Access-Control-Allow-Origin\", \"*\");\r\n    ctx.response.set(\"Access-Control-Allow-Methods\", \"PUT, POST, GET, DELETE, OPTIONS\");\r\n    ctx.response.set(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"Content-Type, Content-Length, Authorization, Accept, X-Requested-With\"\r\n    );\r\n  }\r\n  ctx.response.set(\"X-Powered-By\", \"MCSManager\");\r\n  ctx.response.set(\"X-Version\", getVersion());\r\n\r\n  // Serialize and display when sending Error class\r\n  if (ctx.body instanceof Error) {\r\n    const error = ctx.body as Error;\r\n    ctx.status = 500;\r\n    ctx.body = JSON.stringify({\r\n      status: ctx.status,\r\n      data: error.message,\r\n      time: new Date().getTime()\r\n    });\r\n    return;\r\n  }\r\n\r\n  // release all data streams\r\n  if (ctx.body instanceof Stream) {\r\n    return;\r\n  }\r\n\r\n  // 404 error code\r\n  if (ctx.status == 404) {\r\n    ctx.status = 404;\r\n    ctx.body = JSON.stringify({\r\n      status: ctx.status,\r\n      data: \"[404] Not Found\",\r\n      time: new Date().getTime()\r\n    });\r\n    return;\r\n  }\r\n\r\n  // When the response text is a string, use normal formatting\r\n  if (typeof ctx.body == \"string\") {\r\n    const status = ctx.status;\r\n    const data = ctx.body;\r\n    ctx.body = JSON.stringify({\r\n      status,\r\n      data,\r\n      time: new Date().getTime()\r\n    });\r\n    return;\r\n  }\r\n\r\n  // When the return result is empty, display processing failed\r\n  if (ctx.body === null || ctx.body === false || ctx.body === undefined) {\r\n    ctx.status = 500;\r\n    ctx.body = JSON.stringify({\r\n      status: 500,\r\n      data: ctx.body || null,\r\n      time: new Date().getTime()\r\n    });\r\n    return;\r\n  }\r\n\r\n  // normal data\r\n  if (ctx.status == 200) {\r\n    ctx.body = JSON.stringify({\r\n      status: ctx.status,\r\n      data: ctx.body,\r\n      time: new Date().getTime()\r\n    });\r\n    return;\r\n  }\r\n}\r\n","import Koa from \"koa\";\r\n\r\n// Failed callback\r\nfunction verificationFailed(ctx: Koa.ParameterizedContext) {\r\n  ctx.status = 400;\r\n  ctx.body = \"Request parameters are incorrect\";\r\n}\r\n\r\n// Type check\r\nfunction check(taget: any, parameter: any) {\r\n  if (taget) {\r\n    for (const key in parameter) {\r\n      const typeVal = parameter[key];\r\n\r\n      if (taget[key] == null || taget[key] === \"\") return false;\r\n\r\n      if (typeVal === Number) {\r\n        taget[key] = Number(taget[key]);\r\n        if (isNaN(taget[key])) return false;\r\n        continue;\r\n      }\r\n\r\n      if (typeVal === String) {\r\n        taget[key] = String(taget[key]);\r\n        continue;\r\n      }\r\n\r\n      if (typeVal === Date) {\r\n        const r = new Date(taget[key]).toString();\r\n        if (r == \"Invalid Date\" || r == null) return false;\r\n        taget[key] = new Date(taget[key]);\r\n        continue;\r\n      }\r\n\r\n      if (typeVal === Array) {\r\n        if (!(taget[key] instanceof Array)) {\r\n          const object = JSON.parse(taget[key]);\r\n          if (!(object instanceof Array)) return false;\r\n          taget[key] = object;\r\n        }\r\n      }\r\n\r\n      if (typeVal === Object) {\r\n        if (!taget[key]) return false;\r\n        // const object = JSON.parse(taget[key]);\r\n        // taget[key] = object;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\ninterface IParam {\r\n  params?: any;\r\n  query?: any;\r\n  body?: any;\r\n}\r\n\r\n// Entry function\r\nexport default function (parameter: IParam) {\r\n  return async (ctx: Koa.ParameterizedContext, next: Function) => {\r\n    try {\r\n      let checkBool = true;\r\n      if (parameter[\"params\"] && !check(ctx.params, parameter[\"params\"])) checkBool = false;\r\n      if (parameter[\"query\"] && !check(ctx.query, parameter[\"query\"])) checkBool = false;\r\n      if (parameter[\"body\"] && !check(ctx.request.body, parameter[\"body\"])) checkBool = false;\r\n      if (checkBool) return await next();\r\n      return verificationFailed(ctx);\r\n    } catch (err: any) {\r\n      const error: Error = err;\r\n      ctx.status = 500;\r\n      ctx.body = `${error.message}`;\r\n    }\r\n  };\r\n}\r\n","import Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport validator from \"../middleware/validator\";\r\nimport { getUserUuid } from \"../service/passport_service\";\r\nimport RemoteServiceSubsystem from \"../service/remote_service\";\r\nimport RemoteRequest from \"../service/remote_command\";\r\nimport { isHaveInstanceByUuid } from \"../service/permission_service\";\r\nimport { $t } from \"../i18n\";\r\nimport { ROLE } from \"../entity/user\";\r\n\r\nconst router = new Router({ prefix: \"/protected_instance\" });\r\n\r\n// Routing permission verification middleware\r\nrouter.use(async (ctx, next) => {\r\n  const instanceUuid = String(ctx.query.uuid);\r\n  const daemonId = String(ctx.query.daemonId);\r\n  const userUuid = getUserUuid(ctx);\r\n  if (isHaveInstanceByUuid(userUuid, daemonId, instanceUuid)) {\r\n    await next();\r\n  } else {\r\n    ctx.status = 403;\r\n    ctx.body = $t(\"TXT_CODE_permission.forbiddenInstance\");\r\n  }\r\n});\r\n\r\n// Update limited instance information (normal users)\r\nrouter.put(\r\n  \"/low_permission\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { uuid: String, daemonId: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const config = ctx.request.body;\r\n      // User data filter\r\n      const believableConfig = {\r\n        ie: String(config.ie),\r\n        oe: String(config.oe),\r\n        stopCommand: String(config.stopCommand)\r\n      };\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      ctx.body = await new RemoteRequest(remoteService).request(\"instance/update\", {\r\n        instanceUuid,\r\n        config: believableConfig\r\n      });\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport validator from \"../middleware/validator\";\r\nimport RemoteServiceSubsystem from \"../service/remote_service\";\r\nimport RemoteRequest from \"../service/remote_command\";\r\nimport { ROLE } from \"../entity/user\";\r\n\r\nconst router = new Router({ prefix: \"/service\" });\r\n\r\n// [Top-level Permission]\r\n// Get the list of remote services\r\n// Contains only service information, not a list of instance information\r\nrouter.get(\"/remote_services_list\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  const result = new Array();\r\n  for (const iterator of RemoteServiceSubsystem.services.entries()) {\r\n    const remoteService = iterator[1];\r\n    result.push({\r\n      uuid: remoteService.uuid,\r\n      ip: remoteService.config.ip,\r\n      port: remoteService.config.port,\r\n      prefix: remoteService.config.prefix,\r\n      available: remoteService.available,\r\n      remarks: remoteService.config.remarks\r\n    });\r\n  }\r\n  ctx.body = result;\r\n});\r\n\r\n// [Top-level Permission]\r\n// Query the daemon for the specified instance\r\nrouter.get(\r\n  \"/remote_service_instances\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String, page: Number, page_size: Number } }),\r\n  async (ctx) => {\r\n    const daemonId = String(ctx.query.daemonId);\r\n    const page = Number(ctx.query.page);\r\n    const pageSize = Number(ctx.query.page_size);\r\n    const instanceName = ctx.query.instance_name;\r\n    const status = String(ctx.query.status);\r\n    const tag = String(ctx.query.tag);\r\n    const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n    let tagList: string[] = [];\r\n    try {\r\n      tagList = JSON.parse(tag);\r\n    } catch (error) {\r\n      // ignore\r\n    }\r\n    const result = await new RemoteRequest(remoteService).request(\"instance/select\", {\r\n      page,\r\n      pageSize,\r\n      condition: {\r\n        instanceName,\r\n        status,\r\n        tag: tagList.length > 0 ? tagList : null\r\n      }\r\n    });\r\n    ctx.body = result;\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// Get remote server system information\r\nrouter.get(\"/remote_services_system\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  const result = new Array();\r\n  for (const iterator of RemoteServiceSubsystem.services.entries()) {\r\n    const remoteService = iterator[1];\r\n    let instancesInfo = null;\r\n    try {\r\n      instancesInfo = await new RemoteRequest(remoteService).request(\"info/overview\");\r\n    } catch (err) {\r\n      continue;\r\n    }\r\n    result.push(instancesInfo);\r\n  }\r\n  ctx.body = result;\r\n});\r\n\r\n// [Top-level Permission]\r\n// Get remote server instance information (browse too large)\r\nrouter.get(\"/remote_services\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  const result = new Array();\r\n  for (const iterator of RemoteServiceSubsystem.services.entries()) {\r\n    const remoteService = iterator[1];\r\n    let instancesInfo = [];\r\n    try {\r\n      instancesInfo = await new RemoteRequest(remoteService).request(\"instance/overview\");\r\n    } catch (err) {\r\n      // ignore request errors\r\n    }\r\n    // send remote command if connection is available\r\n    result.push({\r\n      uuid: remoteService.uuid,\r\n      ip: remoteService.config.ip,\r\n      port: remoteService.config.port,\r\n      prefix: remoteService.config.prefix,\r\n      available: remoteService.available,\r\n      remarks: remoteService.config.remarks,\r\n      instances: instancesInfo\r\n    });\r\n  }\r\n  ctx.body = result;\r\n});\r\n\r\n// [Top-level Permission]\r\n// add remote service\r\nrouter.post(\r\n  \"/remote_service\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ body: { apiKey: String, port: Number, ip: String, remarks: String } }),\r\n  async (ctx) => {\r\n    const parameter = ctx.request.body;\r\n    // do asynchronous registration\r\n    const instance = await RemoteServiceSubsystem.registerRemoteService({\r\n      apiKey: parameter.apiKey,\r\n      port: parameter.port,\r\n      ip: parameter.ip,\r\n      prefix: parameter.prefix ?? \"\",\r\n      remarks: parameter.remarks ?? \"\"\r\n    });\r\n    ctx.body = instance.uuid;\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// Modify remote service parameters\r\nrouter.put(\r\n  \"/remote_service\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { uuid: String } }),\r\n  async (ctx) => {\r\n    const uuid = String(ctx.request.query.uuid);\r\n    const parameter = ctx.request.body;\r\n    if (!RemoteServiceSubsystem.services.has(uuid)) throw new Error(\"Instance does not exist\");\r\n    await RemoteServiceSubsystem.edit(uuid, {\r\n      port: parameter.port,\r\n      ip: parameter.ip,\r\n      prefix: parameter.prefix ?? \"\",\r\n      apiKey: parameter.apiKey,\r\n      remarks: parameter.remarks\r\n    });\r\n    ctx.body = true;\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// delete remote service\r\nrouter.delete(\r\n  \"/remote_service\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { uuid: String } }),\r\n  async (ctx) => {\r\n    const uuid = String(ctx.request.query.uuid);\r\n    if (!RemoteServiceSubsystem.services.has(uuid)) throw new Error(\"Instance does not exist\");\r\n    await RemoteServiceSubsystem.deleteRemoteService(uuid);\r\n    ctx.body = true;\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// connect to remote instance\r\nrouter.get(\r\n  \"/link_remote_service\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { uuid: String } }),\r\n  async (ctx) => {\r\n    const uuid = String(ctx.request.query.uuid);\r\n    if (!RemoteServiceSubsystem.services.has(uuid)) throw new Error(\"Instance does not exist\");\r\n    try {\r\n      RemoteServiceSubsystem.getInstance(uuid)?.connect();\r\n      ctx.body = true;\r\n    } catch (error: any) {\r\n      ctx.body = error;\r\n    }\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport validator from \"../middleware/validator\";\r\nimport RemoteServiceSubsystem from \"../service/remote_service\";\r\nimport RemoteRequest from \"../service/remote_command\";\r\nimport { ROLE } from \"../entity/user\";\r\n\r\nconst router = new Router({ prefix: \"/environment\" });\r\n\r\n// [Top-level Permission]\r\n// Get the specified remote service mirror list\r\nrouter.get(\r\n  \"/image\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"environment/images\", {});\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// create image\r\nrouter.post(\r\n  \"/image\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const config = ctx.request.body;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\r\n        \"environment/new_image\",\r\n        config\r\n      );\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// delete the specified image\r\nrouter.delete(\r\n  \"/image\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String, imageId: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const imageId = String(ctx.query.imageId);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"environment/del_image\", {\r\n        imageId\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// Get the list of existing containers of the specified remote service\r\nrouter.get(\r\n  \"/containers\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"environment/containers\", {});\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// Get the list of existing networks for the specified remote service\r\nrouter.get(\r\n  \"/networkModes\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"environment/networkModes\", {});\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// Get the image creation progress of the specified remote service\r\nrouter.get(\r\n  \"/progress\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"environment/progress\", {});\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport validator from \"../middleware/validator\";\r\nimport RemoteServiceSubsystem from \"../service/remote_service\";\r\nimport RemoteRequest from \"../service/remote_command\";\r\nimport { timeUuid } from \"../service/password\";\r\nimport { getUserPermission, getUserUuid } from \"../service/passport_service\";\r\nimport { isHaveInstanceByUuid, isTopPermissionByUuid } from \"../service/permission_service\";\r\nimport { systemConfig } from \"../setting\";\r\nimport { $t } from \"../i18n\";\r\nimport { ROLE } from \"../entity/user\";\r\nimport { removeTrail } from \"common\";\r\n\r\nconst router = new Router({ prefix: \"/files\" });\r\n\r\nrouter.use(async (ctx, next) => {\r\n  const instanceUuid = String(ctx.query.uuid);\r\n  const daemonId = String(ctx.query.daemonId);\r\n  const userUuid = getUserUuid(ctx);\r\n  if (systemConfig?.canFileManager === false && getUserPermission(ctx) < 10) {\r\n    ctx.status = 403;\r\n    ctx.body = new Error($t(\"TXT_CODE_router.file.off\"));\r\n    return;\r\n  }\r\n  if (isHaveInstanceByUuid(userUuid, daemonId, instanceUuid)) {\r\n    await next();\r\n  } else {\r\n    ctx.status = 403;\r\n    ctx.body = $t(\"TXT_CODE_permission.forbiddenInstance\");\r\n  }\r\n});\r\n\r\nrouter.get(\r\n  \"/status\",\r\n  permission({ level: ROLE.USER, speedLimit: false }),\r\n  validator({\r\n    query: { daemonId: String, uuid: String }\r\n  }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"file/status\", {\r\n        instanceUuid\r\n      });\r\n      if (!isTopPermissionByUuid(getUserUuid(ctx))) delete result.disk;\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.get(\r\n  \"/list\",\r\n  permission({ level: ROLE.USER, speedLimit: false }),\r\n  validator({\r\n    query: { daemonId: String, uuid: String, target: String, page: Number, page_size: Number }\r\n  }),\r\n  async (ctx) => {\r\n    try {\r\n      const target = String(ctx.query.target);\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const page = Number(ctx.query.page);\r\n      const pageSize = Number(ctx.query.page_size);\r\n      const fileName = String(ctx.query.file_name);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"file/list\", {\r\n        instanceUuid,\r\n        target,\r\n        pageSize,\r\n        page,\r\n        fileName\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.put(\r\n  \"/chmod\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({\r\n    query: { daemonId: String, uuid: String },\r\n    body: { target: String, chmod: Number, deep: Boolean }\r\n  }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const target = String(ctx.request.body.target);\r\n      const chmod = Number(ctx.request.body.chmod);\r\n      const deep = Number(ctx.request.body.deep);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"file/chmod\", {\r\n        target,\r\n        instanceUuid,\r\n        chmod,\r\n        deep\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.post(\r\n  \"/touch\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String }, body: { target: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const target = String(ctx.request.body.target);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"file/touch\", {\r\n        target,\r\n        instanceUuid\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.post(\r\n  \"/mkdir\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String }, body: { target: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const target = String(ctx.request.body.target);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"file/mkdir\", {\r\n        target,\r\n        instanceUuid\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.put(\r\n  \"/\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String }, body: { target: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const target = String(ctx.request.body.target);\r\n      const text = ctx.request.body.text;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\r\n        \"file/edit\",\r\n        {\r\n          instanceUuid,\r\n          target,\r\n          text\r\n        },\r\n        100000\r\n      );\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.post(\r\n  \"/copy\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String }, body: { targets: Array } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const targets = ctx.request.body.targets as [];\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"file/copy\", {\r\n        instanceUuid,\r\n        targets\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.put(\r\n  \"/move\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String }, body: { targets: Array } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const targets = ctx.request.body.targets as [];\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"file/move\", {\r\n        instanceUuid,\r\n        targets\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.delete(\r\n  \"/\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String }, body: { targets: Object } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = ctx.query.uuid;\r\n      const targets = ctx.request.body.targets;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"file/delete\", {\r\n        instanceUuid,\r\n        targets\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.post(\r\n  \"/compress\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({\r\n    query: { daemonId: String, uuid: String },\r\n    body: { source: String, targets: Object, type: Number, code: String }\r\n  }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const source = String(ctx.request.body.source);\r\n      const targets = ctx.request.body.targets;\r\n      const type = Number(ctx.request.body.type);\r\n      const code = String(ctx.request.body.code);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const res = await new RemoteRequest(remoteService).request(\r\n        \"file/compress\",\r\n        {\r\n          instanceUuid,\r\n          targets,\r\n          source,\r\n          type,\r\n          code\r\n        },\r\n        0\r\n      );\r\n      ctx.body = res;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.all(\r\n  \"/download\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { uuid: String, daemonId: String, file_name: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const fileName = String(ctx.query.file_name);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const addr = `${remoteService?.config.ip}:${remoteService?.config.port}${\r\n        remoteService?.config.prefix ? removeTrail(remoteService.config.prefix, \"/\") : \"\"\r\n      }`;\r\n      const password = timeUuid();\r\n      await new RemoteRequest(remoteService).request(\"passport/register\", {\r\n        name: \"download\",\r\n        password: password,\r\n        parameter: {\r\n          fileName,\r\n          instanceUuid\r\n        }\r\n      });\r\n      ctx.body = {\r\n        password,\r\n        addr\r\n      };\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.all(\r\n  \"/upload\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { uuid: String, daemonId: String, upload_dir: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const uploadDir = String(ctx.query.upload_dir);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const addr = `${remoteService?.config.ip}:${remoteService?.config.port}${\r\n        remoteService?.config.prefix ? removeTrail(remoteService.config.prefix, \"/\") : \"\"\r\n      }`;\r\n      const password = timeUuid();\r\n      await new RemoteRequest(remoteService).request(\"passport/register\", {\r\n        name: \"upload\",\r\n        password: password,\r\n        parameter: {\r\n          uploadDir,\r\n          instanceUuid\r\n        }\r\n      });\r\n      ctx.body = {\r\n        password,\r\n        addr\r\n      };\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import Koa from \"koa\";\r\nimport Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport { bind2FA, confirm2FaQRCode, getUserUuid, logout } from \"../service/passport_service\";\r\nimport userSystem from \"../service/user_service\";\r\nimport { getToken, isAjax } from \"../service/passport_service\";\r\nimport { isTopPermissionByUuid } from \"../service/permission_service\";\r\nimport validator from \"../middleware/validator\";\r\nimport { v4 } from \"uuid\";\r\nimport { $t } from \"../i18n\";\r\nimport { ROLE } from \"../entity/user\";\r\nimport { getInstancesByUuid } from \"../service/instance_service\";\r\nimport { toBoolean } from \"common\";\r\n\r\nconst router = new Router({ prefix: \"/auth\" });\r\n\r\n// [Low-level Permission]\r\n// add token return\r\nrouter.get(\r\n  \"/token\",\r\n  permission({ level: ROLE.USER, token: false, speedLimit: false }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    // Some and only Ajax requests can get the token\r\n    if (isAjax(ctx)) {\r\n      ctx.body = getToken(ctx);\r\n    } else {\r\n      throw new Error(\"The request is not an Ajax request.\");\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// get user data\r\nrouter.get(\"/\", permission({ level: ROLE.USER, token: false, speedLimit: false }), async (ctx) => {\r\n  // Default permission to get me\r\n  let uuid = getUserUuid(ctx);\r\n  // The front end can choose to require advanced data\r\n  const advanced = ctx.query.advanced;\r\n\r\n  // Admin permissions can be obtained from anyone\r\n  if (isTopPermissionByUuid(uuid) && ctx.query.uuid) uuid = String(ctx.query.uuid);\r\n\r\n  // Some and only Ajax requests grant access\r\n  if (isAjax(ctx)) {\r\n    const res = await getInstancesByUuid(uuid, undefined, toBoolean(advanced) || false);\r\n    res.token = getToken(ctx);\r\n    ctx.body = res;\r\n  }\r\n});\r\n\r\n// [Low-level Permission]\r\n// Modify personal user information\r\nrouter.put(\"/update\", permission({ level: ROLE.USER }), async (ctx: Koa.ParameterizedContext) => {\r\n  const userUuid = getUserUuid(ctx);\r\n  if (userUuid) {\r\n    const config = ctx.request.body;\r\n    const { passWord, isInit } = config;\r\n    if (!userSystem.validatePassword(passWord))\r\n      throw new Error($t(\"TXT_CODE_router.user.passwordCheck\"));\r\n    await userSystem.edit(userUuid, { passWord, isInit });\r\n    ctx.body = logout(ctx);\r\n  }\r\n});\r\n\r\n// [Low-level Permission]\r\n// API generation and shutdown\r\nrouter.put(\"/api\", permission({ level: ROLE.USER }), async (ctx: Koa.ParameterizedContext) => {\r\n  const userUuid = getUserUuid(ctx);\r\n  const enable = ctx.request.body.enable;\r\n  const user = userSystem.getInstance(userUuid);\r\n  let newKey = \"\";\r\n  try {\r\n    if (user) {\r\n      if (enable) {\r\n        newKey = v4().replace(/-/gim, \"\");\r\n        await userSystem.edit(userUuid, {\r\n          apiKey: newKey\r\n        });\r\n      } else {\r\n        await userSystem.edit(userUuid, {\r\n          apiKey: \"\"\r\n        });\r\n      }\r\n    }\r\n    ctx.body = newKey;\r\n  } catch (error: any) {\r\n    ctx.body = error;\r\n  }\r\n});\r\n\r\n// [Low-level Permission]\r\n// 2FA\r\nrouter.post(\"/bind2fa\", permission({ level: 1 }), async (ctx: Koa.ParameterizedContext) => {\r\n  const userUuid = getUserUuid(ctx);\r\n  if (userUuid) {\r\n    const qrcode = await bind2FA(ctx);\r\n    ctx.body = qrcode;\r\n  }\r\n});\r\n\r\n// [Low-level Permission]\r\n// 2FA\r\nrouter.post(\r\n  \"/confirm2fa\",\r\n  permission({ level: 1 }),\r\n  validator({ body: { enable: Boolean } }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    const enable = Boolean(ctx.request.body.enable);\r\n    const userUuid = getUserUuid(ctx);\r\n    await confirm2FaQRCode(userUuid, enable);\r\n    ctx.body = true;\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport validator from \"../middleware/validator\";\r\nimport RemoteServiceSubsystem from \"../service/remote_service\";\r\nimport RemoteRequest from \"../service/remote_command\";\r\nimport { multiOperationForwarding } from \"../service/instance_service\";\r\nimport { timeUuid } from \"../service/password\";\r\nimport { $t } from \"../i18n\";\r\nimport axios from \"axios\";\r\nimport { systemConfig } from \"../setting\";\r\nimport { getUserUuid } from \"../service/passport_service\";\r\nimport { isHaveInstanceByUuid, isTopPermissionByUuid } from \"../service/permission_service\";\r\nimport { ROLE } from \"../entity/user\";\r\nimport { removeTrail } from \"common\";\r\n\r\nconst router = new Router({ prefix: \"/instance\" });\r\n\r\n// [Low-level Permission]\r\n// Get the details of an instance\r\nrouter.get(\r\n  \"/\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      if (!isHaveInstanceByUuid(getUserUuid(ctx), daemonId, instanceUuid))\r\n        throw new Error($t(\"TXT_CODE_permission.forbidden\"));\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/detail\", {\r\n        instanceUuid\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// create instance\r\nrouter.post(\r\n  \"/\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const config = ctx.request.body;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/new\", config);\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// upload the file when creating the instance\r\nrouter.post(\r\n  \"/upload\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String, upload_dir: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      // const uploadDir = String(ctx.query.upload_dir);\r\n      const config = ctx.request.body;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/new\", config);\r\n      const newInstanceUuid = result.instanceUuid;\r\n      if (!newInstanceUuid) throw new Error($t(\"TXT_CODE_router.instance.createError\"));\r\n      // Send a cross-end file upload task to the daemon\r\n      const addr = `${remoteService?.config.ip}:${remoteService?.config.port}${\r\n        remoteService?.config.prefix ? removeTrail(remoteService.config.prefix, \"/\") : \"\"\r\n      }`;\r\n      const password = timeUuid();\r\n      await new RemoteRequest(remoteService).request(\"passport/register\", {\r\n        name: \"upload\",\r\n        password: password,\r\n        parameter: {\r\n          uploadDir: \".\",\r\n          instanceUuid: newInstanceUuid\r\n        }\r\n      });\r\n      ctx.body = {\r\n        instanceUuid: newInstanceUuid,\r\n        password,\r\n        addr\r\n      };\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// Update instance information (manage users)\r\nrouter.put(\r\n  \"/\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const config = ctx.request.body;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/update\", {\r\n        instanceUuid,\r\n        config\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// delete instance\r\nrouter.delete(\r\n  \"/\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { daemonId: String }, body: { uuids: Object, deleteFile: Boolean } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuids = ctx.request.body.uuids;\r\n      const deleteFile = ctx.request.body.deleteFile;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/delete\", {\r\n        instanceUuids,\r\n        deleteFile\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Top-level Permission]\r\n// Open instance routing in batches\r\nrouter.post(\"/multi_open\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  try {\r\n    const instances = ctx.request.body;\r\n    multiOperationForwarding(instances, async (daemonId: string, instanceUuids: string[]) => {\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      new RemoteRequest(remoteService)\r\n        .request(\"instance/open\", {\r\n          instanceUuids\r\n        })\r\n        .catch(() => {});\r\n    });\r\n    ctx.body = true;\r\n  } catch (err) {\r\n    ctx.body = err;\r\n  }\r\n});\r\n\r\n// [Top-level Permission]\r\n//Close instance routing in batches\r\nrouter.post(\"/multi_stop\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  try {\r\n    const instances = ctx.request.body;\r\n    multiOperationForwarding(instances, async (daemonId: string, instanceUuids: string[]) => {\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      new RemoteRequest(remoteService)\r\n        .request(\"instance/stop\", {\r\n          instanceUuids\r\n        })\r\n        .catch(() => {});\r\n    });\r\n    ctx.body = true;\r\n  } catch (err) {\r\n    ctx.body = err;\r\n  }\r\n});\r\n\r\n// [Top-level Permission]\r\n// batch terminate instance routing\r\nrouter.post(\"/multi_kill\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  try {\r\n    const instances = ctx.request.body;\r\n    multiOperationForwarding(instances, async (daemonId: string, instanceUuids: string[]) => {\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      new RemoteRequest(remoteService)\r\n        .request(\"instance/kill\", { instanceUuids })\r\n        .catch((err) => {});\r\n    });\r\n    ctx.body = true;\r\n  } catch (err) {\r\n    ctx.body = err;\r\n  }\r\n});\r\n\r\n// [Top-level Permission]\r\n// restart instance routing in batches\r\nrouter.post(\"/multi_restart\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  try {\r\n    const instances = ctx.request.body;\r\n    multiOperationForwarding(instances, async (daemonId: string, instanceUuids: string[]) => {\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      new RemoteRequest(remoteService)\r\n        .request(\"instance/restart\", { instanceUuids })\r\n        .catch((err) => {});\r\n    });\r\n    ctx.body = true;\r\n  } catch (err) {\r\n    ctx.body = err;\r\n  }\r\n});\r\n\r\n// [Top-level Permission]\r\n// Get quick install list\r\nrouter.get(\"/quick_install_list\", permission({ level: ROLE.USER }), async (ctx) => {\r\n  if (systemConfig?.allowUsePreset === false && !isTopPermissionByUuid(getUserUuid(ctx))) {\r\n    ctx.status = 403;\r\n    ctx.body = new Error($t(\"TXT_CODE_b5a47731\"));\r\n    return;\r\n  }\r\n\r\n  const ADDR = systemConfig?.presetPackAddr;\r\n  try {\r\n    const response = await axios.request({\r\n      method: \"GET\",\r\n      url: ADDR\r\n    });\r\n    if (response.status !== 200) throw new Error(\"Response code != 200\");\r\n    ctx.body = response.data;\r\n  } catch (err) {\r\n    ctx.body = [];\r\n  }\r\n});\r\n\r\n// [Top-level Permission]\r\n// forward request\r\nrouter.all(\r\n  \"/forward\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { target: String } }),\r\n  async (ctx) => {\r\n    const ADDR = String(ctx.query.target);\r\n    try {\r\n      const response = await axios.request({\r\n        method: ctx.request.method,\r\n        url: ADDR,\r\n        data: ctx.request.body\r\n      });\r\n      if (response.status !== 200) throw new Error(\"Response code != 200\");\r\n      ctx.body = response.data;\r\n    } catch (err) {\r\n      ctx.body = [];\r\n    }\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport validator from \"../middleware/validator\";\r\nimport { ROLE } from \"../entity/user\";\r\nimport {\r\n  buyOrRenewInstance,\r\n  getNodeStatus,\r\n  parseUserName,\r\n  queryInstanceByUserId,\r\n  RequestAction\r\n} from \"../service/exchange_service\";\r\nimport { toText } from \"common\";\r\nimport { logger } from \"../service/log\";\r\nimport Koa from \"koa\";\r\nimport UserSSOService from \"../service/user_sso_service\";\r\nimport { loginSuccess } from \"../service/passport_service\";\r\nimport { $t } from \"../i18n\";\r\n\r\nconst router = new Router({ prefix: \"/exchange\" });\r\n\r\nrouter.post(\r\n  \"/\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({\r\n    body: {\r\n      request_action: String\r\n    }\r\n  }),\r\n  async (ctx) => {\r\n    try {\r\n      const requestAction = toText(ctx.request.body.request_action) as RequestAction;\r\n      const params = ctx.request.body.data ?? {};\r\n      logger.info(\"Get exchange request, action: %s, params: %j\", requestAction, params);\r\n      if (requestAction === RequestAction.PING) {\r\n        ctx.body = await getNodeStatus(params);\r\n        return;\r\n      }\r\n      if ([RequestAction.RENEW, RequestAction.BUY].includes(requestAction)) {\r\n        ctx.body = await buyOrRenewInstance(requestAction, params);\r\n        return;\r\n      }\r\n      if (requestAction === RequestAction.QUERY_INSTANCE) {\r\n        ctx.body = await queryInstanceByUserId(params);\r\n        return;\r\n      }\r\n      if (requestAction === RequestAction.SSO_TOKEN) {\r\n        ctx.body = UserSSOService.generateSSOToken(parseUserName(params?.username));\r\n        return;\r\n      }\r\n    } catch (err) {\r\n      logger.error(\"Exchange request error: \" + err);\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nrouter.get(\r\n  \"/sso\",\r\n  permission({ token: false, level: null }),\r\n  validator({\r\n    query: { username: String, token: String, instanceId: String, daemonId: String, origin: String }\r\n  }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    const userName = parseUserName(String(ctx.request.query.username));\r\n    const token = String(ctx.request.query.token);\r\n    const redirect = `${decodeURIComponent(\r\n      String(ctx.request.query.origin)\r\n    )}/#/instances/terminal?daemonId=${ctx.request.query.daemonId}&instanceId=${\r\n      ctx.request.query.instanceId\r\n    }&from=sso`;\r\n    if (UserSSOService.verifySSOToken(userName, token)) {\r\n      logger.warn(\"SSO login: username: %s, token: %s, redirect: %s\", userName, token, redirect);\r\n      loginSuccess(ctx, userName);\r\n      return ctx.redirect(redirect);\r\n    } else {\r\n      throw new Error($t(\"TXT_CODE_13411df7\"));\r\n    }\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport validator from \"../middleware/validator\";\r\nimport RemoteServiceSubsystem from \"../service/remote_service\";\r\nimport RemoteRequest, { RemoteRequestTimeoutError } from \"../service/remote_command\";\r\nimport { timeUuid } from \"../service/password\";\r\nimport { getUserUuid } from \"../service/passport_service\";\r\nimport { isHaveInstanceByUuid, isTopPermission } from \"../service/permission_service\";\r\nimport { $t } from \"../i18n\";\r\nimport { isTopPermissionByUuid } from \"../service/permission_service\";\r\nimport { isEmpty, toText, toBoolean, toNumber } from \"common\";\r\nimport { ROLE } from \"../entity/user\";\r\nimport axios from \"axios\";\r\nimport { systemConfig } from \"../setting\";\r\nimport { IQuickStartTemplate } from \"common/global\";\r\n\r\nconst router = new Router({ prefix: \"/protected_instance\" });\r\n\r\n// Routing permission verification middleware\r\nrouter.use(async (ctx, next) => {\r\n  const instanceUuid = String(ctx.query.uuid);\r\n  const daemonId = String(ctx.query.daemonId);\r\n  const userUuid = getUserUuid(ctx);\r\n  if (isHaveInstanceByUuid(userUuid, daemonId, instanceUuid)) {\r\n    await next();\r\n  } else {\r\n    ctx.status = 403;\r\n    ctx.body = $t(\"TXT_CODE_permission.forbiddenInstance\");\r\n  }\r\n});\r\n\r\n// [Low-level Permission]\r\n// Enable instance routing\r\nrouter.all(\r\n  \"/open\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/open\", {\r\n        instanceUuids: [instanceUuid]\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      if (err instanceof RemoteRequestTimeoutError) {\r\n        ctx.body = {};\r\n        return;\r\n      }\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// The instance closes the route\r\nrouter.all(\r\n  \"/stop\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/stop\", {\r\n        instanceUuids: [instanceUuid]\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// Send the command route to the instance\r\n// At this stage, WS cross-panel command transfer has been implemented, and this interface is reserved as an API interface\r\nrouter.all(\r\n  \"/command\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String, command: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const command = String(ctx.query.command);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/command\", {\r\n        instanceUuid,\r\n        command\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// restart the instance\r\nrouter.all(\r\n  \"/restart\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/restart\", {\r\n        instanceUuids: [instanceUuid]\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// terminate the instance\r\nrouter.all(\r\n  \"/kill\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/kill\", {\r\n        instanceUuids: [instanceUuid]\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// start asynchronous task\r\nrouter.post(\r\n  \"/asynchronous\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({\r\n    query: { daemonId: String, uuid: String, task_name: String },\r\n    body: {}\r\n  }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const taskName = String(ctx.query.task_name).toLowerCase().trim();\r\n      const parameter = ctx.request.body;\r\n\r\n      // some asynchronous tasks are only allowed for administrators\r\n      const needTopPermissionTask = [\"quick_install\"];\r\n      if (\r\n        needTopPermissionTask.includes(taskName) &&\r\n        !isTopPermissionByUuid(ctx.session?.[\"uuid\"])\r\n      ) {\r\n        throw new Error(\"illegal access\");\r\n      }\r\n\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/asynchronous\", {\r\n        instanceUuid,\r\n        taskName,\r\n        parameter\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// stop an asynchronous task\r\nrouter.all(\r\n  \"/stop_asynchronous\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({\r\n    query: { daemonId: String, uuid: String }\r\n  }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const parameter = ctx.request.body;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      // No permission check is required because \"Parameter.TaskId\" is not easily obtained.\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/stop_asynchronous\", {\r\n        instanceUuid,\r\n        parameter\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// query asynchronous task status\r\nrouter.all(\r\n  \"/query_asynchronous\",\r\n  permission({ level: ROLE.ADMIN, speedLimit: false }),\r\n  validator({\r\n    query: { daemonId: String, uuid: String }\r\n  }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const taskName = String(ctx.query.task_name);\r\n      const parameter = ctx.request.body;\r\n      const taskId = parameter.taskId;\r\n      // Must have administrator to query all asynchronous tasks\r\n      if (!taskId && !isTopPermissionByUuid(getUserUuid(ctx))) {\r\n        throw new Error(\"Unauthorized access\");\r\n      }\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      ctx.body = await new RemoteRequest(remoteService).request(\"instance/query_asynchronous\", {\r\n        instanceUuid,\r\n        taskName,\r\n        parameter\r\n      });\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// Request to establish a data stream dedicated channel with the daemon\r\nrouter.post(\r\n  \"/stream_channel\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const addr = `${remoteService?.config.ip}:${remoteService?.config.port}`;\r\n      const prefix = remoteService?.config.prefix;\r\n      const password = timeUuid();\r\n      await new RemoteRequest(remoteService).request(\"passport/register\", {\r\n        name: \"stream_channel\",\r\n        password: password,\r\n        parameter: {\r\n          instanceUuid\r\n        }\r\n      });\r\n      ctx.body = {\r\n        password,\r\n        addr,\r\n        prefix\r\n      };\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// Get the instance configuration file list based on the file list\r\nrouter.post(\r\n  \"/process_config/list\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const files = ctx.request.body.files;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\r\n        \"instance/process_config/list\",\r\n        {\r\n          instanceUuid,\r\n          files\r\n        }\r\n      );\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// Get the content of the specified configuration file\r\nrouter.get(\r\n  \"/process_config/file\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String, fileName: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const fileName = String(ctx.query.fileName);\r\n      const type = String(ctx.query.type);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\r\n        \"instance/process_config/file\",\r\n        {\r\n          instanceUuid,\r\n          fileName,\r\n          config: null,\r\n          type\r\n        }\r\n      );\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// Update the content of the specified configuration file\r\nrouter.put(\r\n  \"/process_config/file\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String, fileName: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const fileName = String(ctx.query.fileName);\r\n      const type = String(ctx.query.type);\r\n      const config = ctx.request.body;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\r\n        \"instance/process_config/file\",\r\n        {\r\n          instanceUuid,\r\n          fileName,\r\n          config,\r\n          type\r\n        }\r\n      );\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// Update instance low-privilege configuration data (normal user)\r\nrouter.put(\r\n  \"/instance_update\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({\r\n    query: { uuid: String, daemonId: String },\r\n    body: {}\r\n  }),\r\n  async (ctx) => {\r\n    try {\r\n      // Here is the low-privileged user configuration setting interface,\r\n      // in order to prevent data injection, a layer of filtering must be performed\r\n      const daemonId = toText(ctx.query.daemonId);\r\n      const instanceUuid = toText(ctx.query.uuid);\r\n      const config = ctx.request.body;\r\n\r\n      let instanceTags: string[] | null = null;\r\n\r\n      if (config.tag instanceof Array && isTopPermissionByUuid(getUserUuid(ctx))) {\r\n        instanceTags = (config.tag as any[]).map((tag: any) => {\r\n          const tmp = String(tag).trim();\r\n          if (tmp.length > 9) throw new Error($t(\"TXT_CODE_6d8bc58d\"));\r\n          return tmp;\r\n        });\r\n        if (instanceTags.length > 6) {\r\n          throw new Error($t(\"TXT_CODE_dc9fb6ce\"));\r\n        }\r\n        instanceTags = instanceTags!.sort((a, b) => (a > b ? 1 : -1));\r\n      }\r\n\r\n      // Steam Rcon configuration\r\n      const rconIp = toText(config.rconIp);\r\n      const rconPort = toNumber(config.rconPort);\r\n      const rconPassword = toText(config.rconPassword);\r\n      const enableRcon = toBoolean(config.enableRcon);\r\n\r\n      // Ping protocol configuration\r\n      const pingConfig = {\r\n        ip: toText(config.pingConfig?.ip),\r\n        port: toNumber(config.pingConfig?.port),\r\n        type: config.pingConfig?.type\r\n      };\r\n\r\n      // event task configuration\r\n      const eventTask = {\r\n        autoStart: toBoolean(config.eventTask?.autoStart),\r\n        autoRestart: toBoolean(config.eventTask?.autoRestart)\r\n      };\r\n\r\n      // web terminal settings\r\n      const terminalOption = {\r\n        haveColor: toBoolean(config.terminalOption?.haveColor),\r\n        pty: toBoolean(config.terminalOption?.pty),\r\n        ptyWindowCol: toNumber(config.terminalOption?.ptyWindowCol),\r\n        ptyWindowRow: toNumber(config.terminalOption?.ptyWindowRow)\r\n      };\r\n\r\n      // extra service\r\n      const extraServiceConfig = {\r\n        openFrpTunnelId: toText(config.extraServiceConfig?.openFrpTunnelId),\r\n        openFrpToken: toText(config.extraServiceConfig?.openFrpToken)\r\n      };\r\n\r\n      const crlf = !isEmpty(config.crlf) ? toNumber(config?.crlf) : null;\r\n      const oe = !isEmpty(config.oe) ? toText(config?.oe) : null;\r\n      const ie = !isEmpty(config.ie) ? toText(config?.ie) : null;\r\n      const stopCommand = config.stopCommand ? toText(config.stopCommand) : null;\r\n\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId || \"\");\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/update\", {\r\n        instanceUuid,\r\n        config: {\r\n          pingConfig: !isEmpty(config.pingConfig) ? pingConfig : null,\r\n          eventTask: !isEmpty(config.eventTask) ? eventTask : null,\r\n          terminalOption: !isEmpty(config.terminalOption) ? terminalOption : null,\r\n          extraServiceConfig: !isEmpty(config.extraServiceConfig) ? extraServiceConfig : null,\r\n          crlf,\r\n          oe,\r\n          ie,\r\n          stopCommand,\r\n          rconIp,\r\n          rconPort,\r\n          rconPassword,\r\n          enableRcon,\r\n          tag: instanceTags\r\n        }\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// Get the terminal log of an instance\r\nrouter.get(\r\n  \"/outputlog\",\r\n  permission({ level: ROLE.USER, speedLimit: false }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      let result = await new RemoteRequest(remoteService).request(\"instance/outputlog\", {\r\n        instanceUuid\r\n      });\r\n      if (ctx.query.size) {\r\n        let size,\r\n          sizeStr = ctx.query.size;\r\n        if (sizeStr instanceof Array) {\r\n          sizeStr = sizeStr[0];\r\n        }\r\n        size = parseInt(sizeStr);\r\n        if (sizeStr.toLowerCase().endsWith(\"kb\")) {\r\n          size *= 1024;\r\n        }\r\n        if (result.length > size) {\r\n          result = result.slice(-size);\r\n        }\r\n      }\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\nrouter.post(\r\n  \"/install_instance\",\r\n  permission({ level: ROLE.USER, speedLimit: true }),\r\n  validator({\r\n    query: { daemonId: String, uuid: String },\r\n    body: { description: String, title: String }\r\n  }),\r\n  async (ctx) => {\r\n    if (systemConfig?.allowUsePreset === false && !isTopPermissionByUuid(getUserUuid(ctx))) {\r\n      ctx.status = 403;\r\n      ctx.body = new Error($t(\"TXT_CODE_b5a47731\"));\r\n      return;\r\n    }\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const description = String(ctx.request.body.description);\r\n      const title = String(ctx.request.body.title);\r\n\r\n      const presetUrl = systemConfig?.presetPackAddr;\r\n      if (!presetUrl) throw new Error(\"Preset Addr is empty!\");\r\n\r\n      const { data: presetConfig } = await axios<IQuickStartTemplate>({\r\n        url: presetUrl,\r\n        method: \"GET\"\r\n      });\r\n\r\n      const packages = presetConfig.packages;\r\n\r\n      if (!(packages instanceof Array)) throw new Error(\"Preset Config is not array!\");\r\n      const targetPresetConfig = packages.find(\r\n        (v) => v.title === title && v.description === description\r\n      );\r\n      if (!targetPresetConfig) throw new Error(\"Preset Config is not found!\");\r\n\r\n      const remoteService = RemoteServiceSubsystem.getInstance(daemonId);\r\n      const result = await new RemoteRequest(remoteService).request(\"instance/asynchronous\", {\r\n        taskName: \"install_instance\",\r\n        instanceUuid,\r\n        parameter: targetPresetConfig\r\n      });\r\n      ctx.body = result;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import Koa from \"koa\";\r\nimport Router from \"@koa/router\";\r\nimport validator from \"../middleware/validator\";\r\nimport permission from \"../middleware/permission\";\r\nimport { check, login, logout, checkBanIp, loginSuccess } from \"../service/passport_service\";\r\nimport { systemConfig } from \"../setting\";\r\nimport userSystem, { TwoFactorError } from \"../service/user_service\";\r\nimport { logger } from \"../service/log\";\r\nimport { $t } from \"../i18n\";\r\nimport axios from \"axios\";\r\nimport { GlobalVariable } from \"common\";\r\nimport { ROLE } from \"../entity/user\";\r\nimport UserSSOService from \"../service/user_sso_service\";\r\nconst router = new Router({ prefix: \"/auth\" });\r\n\r\n// [Public Permission]\r\n// login route\r\nrouter.post(\r\n  \"/login\",\r\n  permission({ token: false, level: null }),\r\n  validator({ body: { username: String, password: String } }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    const userName = String(ctx.request.body.username);\r\n    const passWord = String(ctx.request.body.password);\r\n    const code = String(ctx.request.body.code);\r\n    if (!checkBanIp(ctx)) throw new Error($t(\"TXT_CODE_router.login.ban\"));\r\n    if (check(ctx)) return (ctx.body = \"Logined\");\r\n    try {\r\n      ctx.body = login(ctx, userName, passWord, code);\r\n    } catch (error: any) {\r\n      if (error instanceof TwoFactorError && !code) {\r\n        ctx.body = \"NEED_2FA\";\r\n        return;\r\n      }\r\n      ctx.body = error;\r\n    }\r\n  }\r\n);\r\n\r\n// [Public Permission]\r\n// exit route\r\nrouter.get(\r\n  \"/logout\",\r\n  permission({ token: false, level: null, speedLimit: false }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    logout(ctx);\r\n    ctx.body = true;\r\n  }\r\n);\r\n\r\n// [Public Permission]\r\n// Display the text of the login interface\r\nrouter.all(\r\n  \"/login_info\",\r\n  permission({ token: false, level: null, speedLimit: false }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    ctx.body = {\r\n      loginInfo: systemConfig?.loginInfo\r\n    };\r\n  }\r\n);\r\n\r\n// [Public Permission]\r\n// Get the state information that the panel can expose\r\nrouter.all(\r\n  \"/status\",\r\n  permission({ token: false, level: null, speedLimit: false }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    let isInstall = true;\r\n    if (userSystem.objects.size === 0) {\r\n      isInstall = false;\r\n    }\r\n    ctx.body = {\r\n      versionChange: GlobalVariable.get(\"versionChange\", null),\r\n      isInstall,\r\n      language: systemConfig?.language || null,\r\n      settings: {\r\n        canFileManager: systemConfig?.canFileManager || false,\r\n        allowUsePreset: systemConfig?.allowUsePreset || false\r\n      }\r\n    };\r\n  }\r\n);\r\n\r\n// [Public Permission]\r\n// Install the panel, only available when the number of user entities is 0\r\nrouter.all(\r\n  \"/install\",\r\n  permission({ token: false, level: null }),\r\n  validator({ body: { username: String, password: String } }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    const userName = ctx.request.body.username;\r\n    const passWord = ctx.request.body.password;\r\n    if (userSystem.objects.size === 0) {\r\n      if (!userSystem.validatePassword(passWord))\r\n        throw new Error($t(\"TXT_CODE_router.user.passwordCheck\"));\r\n      logger.info($t(\"TXT_CODE_router.login.init\", { userName }));\r\n      await userSystem.create({\r\n        userName,\r\n        passWord,\r\n        permission: 10\r\n      });\r\n      login(ctx, userName, passWord);\r\n      return (ctx.body = true);\r\n    }\r\n    throw new Error($t(\"TXT_CODE_router.user.installed\"));\r\n  }\r\n);\r\n\r\nrouter.all(\r\n  \"/proxy\",\r\n  validator({ query: { target: String } }),\r\n  permission({ level: ROLE.ADMIN }),\r\n  async (ctx) => {\r\n    try {\r\n      const response = await axios.request({\r\n        method: (ctx.query.method as string) || ctx.method,\r\n        url: String(ctx.query.target)\r\n      });\r\n      if (response.status !== 200) throw new Error(\"Response code != 200\");\r\n      ctx.body = response.data;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import Koa from \"koa\";\r\nimport Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport validator from \"../middleware/validator\";\r\nimport { register } from \"../service/passport_service\";\r\nimport userSystem from \"../service/user_service\";\r\nimport { $t } from \"../i18n\";\r\nimport { ROLE } from \"../entity/user\";\r\n\r\nconst router = new Router({ prefix: \"/auth\" });\r\n\r\n// Add user\r\nrouter.post(\r\n  \"/\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ body: { username: String, password: String, permission: Number } }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    const userName = String(ctx.request.body.username);\r\n    const passWord = String(ctx.request.body.password);\r\n    const permission = Number(ctx.request.body.permission);\r\n    if (!userSystem.validatePassword(passWord))\r\n      throw new Error($t(\"TXT_CODE_router.user.invalidPassword\"));\r\n    if (userSystem.existUserName(userName))\r\n      throw new Error($t(\"TXT_CODE_router.user.existsUserName\"));\r\n    ctx.body = await register(ctx, userName, passWord, permission);\r\n  }\r\n);\r\n\r\n// Delete user\r\nrouter.del(\"/\", permission({ level: ROLE.ADMIN }), async (ctx: Koa.ParameterizedContext) => {\r\n  const uuids = ctx.request.body;\r\n  try {\r\n    for (const iterator of uuids) {\r\n      await userSystem.deleteInstance(iterator);\r\n    }\r\n    ctx.body = true;\r\n  } catch (error: any) {\r\n    ctx.throw(500, $t(\"TXT_CODE_router.user.deleteFailure\") as string);\r\n  }\r\n});\r\n\r\n// User search function\r\nrouter.get(\r\n  \"/search\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  validator({ query: { page: Number, page_size: Number } }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    const userName = String(ctx.query.userName);\r\n    const role = String(ctx.query.role);\r\n    const page = Number(ctx.query.page);\r\n    const pageSize = Number(ctx.query.page_size);\r\n    const condition: any = {};\r\n    if (userName) condition[\"userName\"] = `%${userName}%`;\r\n    if (role) condition[\"permission\"] = Number(role);\r\n    let resultPage = userSystem.getQueryWrapper().selectPage(condition, page, pageSize);\r\n    // make a copy, delete redundant\r\n    resultPage = JSON.parse(JSON.stringify(resultPage));\r\n    resultPage.data.forEach((v) => {\r\n      v.passWord = \"\";\r\n      v.salt = \"\";\r\n    });\r\n    ctx.body = resultPage;\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import { IPanelOverviewResponse } from \"common/global\";\r\nimport Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport RemoteServiceSubsystem from \"../service/remote_service\";\r\nimport VisualDataSubsystem from \"../service/visual_data\";\r\nimport RemoteRequest from \"../service/remote_command\";\r\nimport os from \"os\";\r\nimport { systemInfo } from \"common\";\r\nimport { getVersion, specifiedDaemonVersion } from \"../version\";\r\nimport { GlobalVariable } from \"common\";\r\nimport { ROLE } from \"../entity/user\";\r\nimport {\r\n  LOGIN_FAILED_KEY,\r\n  ILLEGAL_ACCESS_KEY,\r\n  LOGIN_COUNT,\r\n  LOGIN_FAILED_COUNT_KEY,\r\n  BAN_IP_COUNT\r\n} from \"../service/passport_service\";\r\n\r\nconst router = new Router({ prefix: \"/overview\" });\r\n\r\n// [Top-level Permission]\r\n// Control panel home page information overview routing\r\nrouter.get(\"/\", permission({ level: ROLE.ADMIN, token: false }), async (ctx) => {\r\n  // Get the information of the remote service\r\n  const remoteInfoList = new Array();\r\n  for (const iterator of RemoteServiceSubsystem.services.entries()) {\r\n    const remoteService = iterator[1];\r\n    let remoteInfo: any = {};\r\n    try {\r\n      remoteInfo = await new RemoteRequest(remoteService).request(\"info/overview\");\r\n    } catch (err) {\r\n      // ignore request errors and continue looping\r\n    }\r\n    // assign some identifier value\r\n    remoteInfo.uuid = remoteService.uuid;\r\n    remoteInfo.ip = remoteService.config.ip;\r\n    remoteInfo.port = remoteService.config.port;\r\n    remoteInfo.prefix = remoteService.config.prefix;\r\n    remoteInfo.available = remoteService.available;\r\n    remoteInfo.remarks = remoteService.config.remarks;\r\n    remoteInfoList.push(remoteInfo);\r\n  }\r\n  const selfInfo = systemInfo();\r\n  // Get the information of the system where the panel is located\r\n  const overviewData: IPanelOverviewResponse = {\r\n    version: getVersion(),\r\n    specifiedDaemonVersion: specifiedDaemonVersion(),\r\n    process: {\r\n      cpu: selfInfo.processCpu,\r\n      memory: process.memoryUsage().rss,\r\n      cwd: selfInfo.cwd\r\n    },\r\n    record: {\r\n      logined: GlobalVariable.get(LOGIN_COUNT, 0),\r\n      illegalAccess: GlobalVariable.get(ILLEGAL_ACCESS_KEY, 0),\r\n      banips: GlobalVariable.get(BAN_IP_COUNT, 0),\r\n      loginFailed: GlobalVariable.get(LOGIN_FAILED_COUNT_KEY, 0)\r\n    },\r\n    system: {\r\n      user: os.userInfo(),\r\n      time: new Date().getTime(),\r\n      totalmem: selfInfo.totalmem,\r\n      freemem: selfInfo.freemem,\r\n      type: selfInfo.type,\r\n      version: os.version(),\r\n      node: process.version,\r\n      hostname: selfInfo.hostname,\r\n      loadavg: selfInfo.loadavg,\r\n      platform: selfInfo.platform,\r\n      release: selfInfo.release,\r\n      uptime: os.uptime(),\r\n      cpu: selfInfo.cpuUsage\r\n    },\r\n    chart: {\r\n      system: VisualDataSubsystem.getSystemChartArray(),\r\n      request: VisualDataSubsystem.getStatusChartArray()\r\n    },\r\n    remoteCount: RemoteServiceSubsystem.count(),\r\n    remote: remoteInfoList\r\n  };\r\n\r\n  ctx.body = overviewData;\r\n});\r\n\r\nexport default router;\r\n","import Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport validator from \"../middleware/validator\";\r\nimport RemoteServiceSubsystem from \"../service/remote_service\";\r\nimport RemoteRequest from \"../service/remote_command\";\r\nimport { getUserUuid } from \"../service/passport_service\";\r\nimport { isHaveInstanceByUuid } from \"../service/permission_service\";\r\nimport { FILENAME_BLACKLIST } from \"../const\";\r\nimport { $t } from \"../i18n\";\r\nimport { ROLE } from \"../entity/user\";\r\nconst router = new Router({ prefix: \"/protected_schedule\" });\r\n\r\n// Routing permission verification middleware\r\nrouter.use(async (ctx, next) => {\r\n  const instanceUuid = String(ctx.query.uuid);\r\n  const daemonId = String(ctx.query.daemonId);\r\n  const userUuid = getUserUuid(ctx);\r\n  if (isHaveInstanceByUuid(userUuid, daemonId, instanceUuid)) {\r\n    await next();\r\n  } else {\r\n    ctx.status = 403;\r\n    ctx.body = $t(\"TXT_CODE_permission.forbiddenInstance\");\r\n  }\r\n});\r\n\r\n// [Low-level Permission]\r\n// Get the list of scheduled tasks\r\nrouter.get(\r\n  \"/\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const list = await new RemoteRequest(RemoteServiceSubsystem.getInstance(daemonId)).request(\r\n        \"schedule/list\",\r\n        {\r\n          instanceUuid\r\n        }\r\n      );\r\n      ctx.body = list;\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// create a scheduled task\r\nrouter.post(\r\n  \"/\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({\r\n    query: { daemonId: String, uuid: String },\r\n    body: { name: String, count: Number, time: String, action: String, type: Number }\r\n  }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const task = ctx.request.body;\r\n\r\n      // Scheduled task name needs file name format check\r\n      const name = String(task.name);\r\n      FILENAME_BLACKLIST.forEach((ch) => {\r\n        if (name.includes(ch)) throw new Error($t(\"TXT_CODE_router.schedule.invalidName\"));\r\n      });\r\n\r\n      ctx.body = await new RemoteRequest(RemoteServiceSubsystem.getInstance(daemonId)).request(\r\n        \"schedule/register\",\r\n        {\r\n          instanceUuid,\r\n          name,\r\n          count: Number(task.count),\r\n          time: String(task.time),\r\n          action: String(task.action),\r\n          payload: String(task.payload),\r\n          type: Number(task.type)\r\n        }\r\n      );\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\n// [Low-level Permission]\r\n// delete scheduled task\r\nrouter.delete(\r\n  \"/\",\r\n  permission({ level: ROLE.USER }),\r\n  validator({ query: { daemonId: String, uuid: String } }),\r\n  async (ctx) => {\r\n    try {\r\n      const daemonId = String(ctx.query.daemonId);\r\n      const instanceUuid = String(ctx.query.uuid);\r\n      const name = String(ctx.query.task_name);\r\n      ctx.body = await new RemoteRequest(RemoteServiceSubsystem.getInstance(daemonId)).request(\r\n        \"schedule/delete\",\r\n        {\r\n          instanceUuid,\r\n          name\r\n        }\r\n      );\r\n    } catch (err) {\r\n      ctx.body = err;\r\n    }\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import Router from \"@koa/router\";\r\nimport remoteService from \"../service/remote_service\";\r\nimport permission from \"../middleware/permission\";\r\nimport validator from \"../middleware/validator\";\r\nimport { saveSystemConfig, systemConfig } from \"../setting\";\r\nimport { logger } from \"../service/log\";\r\nimport { i18next, $t } from \"../i18n\";\r\nimport userSystem from \"../service/user_service\";\r\nimport { v4 } from \"uuid\";\r\nimport path from \"path\";\r\nimport * as fs from \"fs-extra\";\r\nimport {\r\n  getFrontendLayoutConfig,\r\n  resetFrontendLayoutConfig,\r\n  setFrontendLayoutConfig\r\n} from \"../service/frontend_layout\";\r\nimport { ROLE } from \"../entity/user\";\r\nimport { SAVE_DIR_PATH } from \"../service/frontend_layout\";\r\nimport FileManager from \"../../../../daemon/src/service/system_file\";\r\n\r\nconst router = new Router({ prefix: \"/overview\" });\r\n\r\n// [Top-level Permission]\r\n// Get panel configuration items\r\nrouter.get(\"/setting\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  ctx.body = systemConfig;\r\n});\r\n\r\n// [Top-level Permission]\r\n// Update panel configuration items\r\nrouter.put(\"/setting\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  const config = ctx.request.body;\r\n  if (config && systemConfig) {\r\n    if (config.httpIp != null) systemConfig.httpIp = config.httpIp;\r\n    if (config.httpPort != null) systemConfig.httpPort = config.httpPort;\r\n    if (config.prefix != null) systemConfig.prefix = config.prefix;\r\n    if (config.reverseProxyMode != null)\r\n      systemConfig.reverseProxyMode = Boolean(config.reverseProxyMode);\r\n    if (config.crossDomain != null) systemConfig.crossDomain = config.crossDomain;\r\n    if (config.gzip != null) systemConfig.gzip = config.gzip;\r\n    if (config.maxCompress != null) systemConfig.maxCompress = config.maxCompress;\r\n    if (config.maxDownload != null) systemConfig.maxDownload = config.maxDownload;\r\n    if (config.zipType != null) systemConfig.zipType = config.zipType;\r\n    if (config.loginCheckIp != null) systemConfig.loginCheckIp = config.loginCheckIp;\r\n    if (config.forwardType != null) systemConfig.forwardType = Number(config.forwardType);\r\n    if (config.dataPort != null) systemConfig.dataPort = Number(config.dataPort);\r\n    if (config.loginInfo != null) systemConfig.loginInfo = String(config.loginInfo);\r\n    if (config.canFileManager != null) systemConfig.canFileManager = Boolean(config.canFileManager);\r\n    if (config.allowUsePreset != null) systemConfig.allowUsePreset = Boolean(config.allowUsePreset);\r\n    if (config.presetPackAddr != null) systemConfig.presetPackAddr = String(config.presetPackAddr);\r\n    if (config.language != null) {\r\n      logger.warn($t(\"TXT_CODE_e29a9317\"), config.language);\r\n      systemConfig.language = String(config.language);\r\n      await i18next.changeLanguage(systemConfig.language.toLowerCase());\r\n      remoteService.changeDaemonLanguage(systemConfig.language);\r\n    }\r\n    saveSystemConfig(systemConfig);\r\n    ctx.body = \"OK\";\r\n    return;\r\n  }\r\n  ctx.body = new Error($t(\"TXT_CODE_e4d6cc20\"));\r\n});\r\n\r\n// [Public Permission]\r\n// Update config when install\r\nrouter.put(\"/install\", async (ctx) => {\r\n  const config = ctx.request.body;\r\n  if (userSystem.objects.size === 0 && systemConfig) {\r\n    if (config.language != null) {\r\n      logger.warn($t(\"TXT_CODE_e29a9317\"), config.language);\r\n      systemConfig.language = String(config.language);\r\n      i18next.changeLanguage(systemConfig.language.toLowerCase());\r\n      remoteService.changeDaemonLanguage(systemConfig.language);\r\n    }\r\n    saveSystemConfig(systemConfig);\r\n    ctx.body = \"OK\";\r\n    return;\r\n  }\r\n  ctx.body = new Error($t(\"TXT_CODE_d37f0418\"));\r\n});\r\n\r\n// [Public router]\r\nrouter.get(\"/layout\", async (ctx) => {\r\n  ctx.body = getFrontendLayoutConfig();\r\n});\r\n\r\n// [Top-level Permission]\r\n// Set frontend layout\r\nrouter.post(\"/layout\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  const config = ctx.request.body;\r\n  setFrontendLayoutConfig(config);\r\n  ctx.body = true;\r\n});\r\n\r\n// [Top-level Permission]\r\n// Reset frontend layout\r\nrouter.delete(\"/layout\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  resetFrontendLayoutConfig();\r\n  ctx.body = true;\r\n});\r\n\r\n// [Top-level Permission]\r\n// Upload file to asserts directory, only administrator can upload\r\nrouter.post(\"/upload_assets\", permission({ level: ROLE.ADMIN }), async (ctx) => {\r\n  const tmpFiles = ctx.request.files?.file;\r\n  try {\r\n    if (!tmpFiles || !(tmpFiles instanceof Array)) throw new Error($t(\"TXT_CODE_e4d6cc20\"));\r\n    if (!tmpFiles[0].filepath || !fs.existsSync(tmpFiles[0].filepath))\r\n      throw new Error($t(\"TXT_CODE_1a499109\"));\r\n    const tmpFile = tmpFiles[0];\r\n    const newFileName = v4() + path.extname(tmpFile.originalFilename || \"\");\r\n    if (!FileManager.checkFileName(newFileName))\r\n      throw new Error(\"Access denied: Malformed file name\");\r\n    const saveDirPath = path.join(process.cwd(), SAVE_DIR_PATH);\r\n    if (!fs.existsSync(saveDirPath)) fs.mkdirsSync(saveDirPath);\r\n    await fs.move(tmpFile.filepath, path.join(saveDirPath, newFileName));\r\n    ctx.body = newFileName;\r\n  } finally {\r\n    tmpFiles?.forEach((v) => {\r\n      if (v?.filepath) fs.remove(v.filepath, () => {});\r\n    });\r\n  }\r\n});\r\n\r\nexport default router;\r\n","import Koa from \"koa\";\r\nimport Router from \"@koa/router\";\r\nimport permission from \"../middleware/permission\";\r\nimport userSystem from \"../service/user_service\";\r\nimport { ICompleteUser } from \"../entity/entity_interface\";\r\nimport { $t } from \"../i18n\";\r\nimport { ROLE } from \"../entity/user\";\r\n\r\nconst router = new Router({ prefix: \"/auth\" });\r\n\r\n// [Top-level Permission]\r\nrouter.put(\"/\", permission({ level: ROLE.ADMIN }), async (ctx: Koa.ParameterizedContext) => {\r\n  const { uuid, config } = ctx.request.body;\r\n  const { passWord } = config;\r\n  if (passWord && !userSystem.validatePassword(passWord))\r\n    throw new Error($t(\"TXT_CODE_router.user.passwordCheck\"));\r\n  try {\r\n    // If the administrator resets the user's password, 2FA is automatically turned off.\r\n    if (passWord) {\r\n      config.secret = \"\";\r\n      config.open2FA = false;\r\n    }\r\n    await userSystem.edit(uuid, config);\r\n    ctx.body = true;\r\n  } catch (error: any) {\r\n    ctx.throw(500, error.message);\r\n  }\r\n});\r\n\r\n// [Top-level Permission]\r\nrouter.get(\r\n  \"/overview\",\r\n  permission({ level: ROLE.ADMIN }),\r\n  async (ctx: Koa.ParameterizedContext) => {\r\n    const users: Array<ICompleteUser> = [];\r\n    userSystem.objects.forEach((user) => {\r\n      users.push({\r\n        uuid: user.uuid,\r\n        userName: user.userName,\r\n        permission: user.permission,\r\n        instances: user.instances,\r\n        loginTime: user.loginTime,\r\n        registerTime: user.loginTime\r\n      });\r\n    });\r\n    ctx.body = users;\r\n  }\r\n);\r\n\r\nexport default router;\r\n","import { v4 } from \"uuid\";\r\n\r\nexport class UniversalRemoteSubsystem<T> {\r\n  public readonly services: Map<string, T>;\r\n\r\n  constructor() {\r\n    this.services = new Map<string, T>();\r\n  }\r\n\r\n  setInstance(uuid: string, object: T): void {\r\n    if (this.services.get(uuid)) throw new Error(\"Instance already exists\");\r\n    this.services.set(uuid, object);\r\n  }\r\n\r\n  getInstance(uuid: string) {\r\n    return this.services.get(uuid);\r\n  }\r\n\r\n  deleteInstance(uuid: string) {\r\n    return this.services.delete(uuid);\r\n  }\r\n\r\n  randdomUuid() {\r\n    return v4().replace(/-/gim, \"\");\r\n  }\r\n}\r\n","import RemoteServiceSubsystem from \"../service/remote_service\";\r\nimport RemoteRequest from \"../service/remote_command\";\r\nimport user_service from \"../service/user_service\";\r\nimport { customAlphabet } from \"nanoid\";\r\nimport { t } from \"i18next\";\r\nimport { toNumber, toText } from \"common\";\r\nimport { AdvancedInstanceInfo, getInstancesByUuid } from \"./instance_service\";\r\nimport type { IGlobalInstanceConfig } from \"common/global\";\r\n\r\n// ------- Protocol Define -------\r\nexport interface NodeStatusProtocol {\r\n  name: string;\r\n  id: string;\r\n  ip: string;\r\n  port: number;\r\n  available: boolean;\r\n  running: number;\r\n  instances: number;\r\n}\r\n\r\nexport interface InstanceInfoProtocol {\r\n  instance_id: string;\r\n  name: string;\r\n  expire: number;\r\n  status: number;\r\n  lines: Array<{ title: string; value: any }>;\r\n  ports: PortInfo[];\r\n}\r\n\r\nexport interface BuyResponseProtocol {\r\n  instance_id: string;\r\n  instance_config: any;\r\n  username: string;\r\n  password: string;\r\n  uuid: string;\r\n  expire: number;\r\n  instance_info?: InstanceInfoProtocol;\r\n}\r\n\r\nexport interface BuyRequestProtocol {\r\n  category_id: number;\r\n  node_id: string;\r\n  username: string;\r\n  hours: number;\r\n  payload: any;\r\n  code?: string;\r\n  instance_id?: string;\r\n}\r\nexport enum RequestAction {\r\n  BUY = \"buy\",\r\n  RENEW = \"renew\",\r\n  QUERY_INSTANCE = \"query_instance\",\r\n  PING = \"ping\",\r\n  SSO_TOKEN = \"sso_token\"\r\n}\r\n\r\nexport interface PortInfo {\r\n  host: number;\r\n  container: number;\r\n  protocol: string;\r\n}\r\n\r\n// ------- Define End ------\r\n\r\nconst getNanoId = customAlphabet(\r\n  \"1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",\r\n  6\r\n);\r\n\r\nfunction formatInstanceData(instance: AdvancedInstanceInfo): InstanceInfoProtocol {\r\n  let ports: string[] = instance.docker?.ports ?? [];\r\n  let portRules: Array<PortInfo> = [];\r\n  if (ports?.length > 0) {\r\n    ports.forEach((line: string) => {\r\n      // line = \"23333:24444/tcp\"\r\n      const [ports, protocol] = line.split(\"/\");\r\n      if (!ports || !protocol) return;\r\n      const [host, container] = ports.split(\":\");\r\n      if (isNaN(Number(container)) || isNaN(Number(host))) return;\r\n      portRules.push({\r\n        protocol,\r\n        container: Number(container),\r\n        host: Number(host)\r\n      });\r\n    });\r\n  }\r\n  const lines = [];\r\n  if (instance.info?.maxPlayers && Number(instance.info?.maxPlayers) != -1) {\r\n    lines.push({\r\n      title: t(\"TXT_CODE_7e9727bd\"),\r\n      value: `${instance.info?.currentPlayers}/${instance.info?.maxPlayers}`\r\n    });\r\n  }\r\n  return {\r\n    instance_id: instance.instanceUuid,\r\n    name: instance.nickname || \"\",\r\n    status: instance.status || 0,\r\n    ports: portRules,\r\n    expire: instance.endTime || 0,\r\n    lines\r\n  };\r\n}\r\n\r\nexport function parseUserName(t?: string) {\r\n  if (!t || typeof t !== \"string\") return \"\";\r\n  if (t.startsWith(\"User-\")) return t;\r\n  return `User-${toText(t) ?? \"\"}`;\r\n}\r\n\r\nexport async function buyOrRenewInstance(\r\n  request_action: RequestAction,\r\n  params: BuyRequestProtocol\r\n): Promise<BuyResponseProtocol> {\r\n  const node_id = toText(params.node_id) ?? \"\";\r\n  const instance_id = toText(params.instance_id) ?? \"\";\r\n  const username = parseUserName(params.username);\r\n  const hours = toNumber(params.hours) ?? 0;\r\n  const payload: Partial<IGlobalInstanceConfig> = params.payload ?? {};\r\n\r\n  const remoteService = RemoteServiceSubsystem.getInstance(node_id || \"\");\r\n  if (!remoteService?.available) {\r\n    throw new Error(t(\"TXT_CODE_bed32084\"));\r\n  }\r\n\r\n  const remoteRequest = new RemoteRequest(remoteService);\r\n\r\n  if (request_action === RequestAction.BUY) {\r\n    payload.category = params.category_id || 0;\r\n    payload.endTime =\r\n      (payload.endTime ? Number(payload.endTime) : Date.now()) + hours * 3600 * 1000;\r\n    payload.nickname = username + \"-\" + getNanoId(6);\r\n    const { instanceUuid: newInstanceId, config: newInstanceConfig } = await remoteRequest.request(\r\n      \"instance/new\",\r\n      payload\r\n    );\r\n    if (!newInstanceId) throw new Error(t(\"TXT_CODE_728fdabf\"));\r\n\r\n    let user = user_service.getUserByUserName(username);\r\n    let newPassword = \"\";\r\n\r\n    if (user) {\r\n      await user_service.edit(user.uuid, {\r\n        instances: [\r\n          ...user.instances,\r\n          {\r\n            instanceUuid: newInstanceId,\r\n            daemonId: node_id\r\n          }\r\n        ]\r\n      });\r\n    } else {\r\n      newPassword = getNanoId(12);\r\n      user = await user_service.create({\r\n        userName: username,\r\n        passWord: newPassword,\r\n        permission: 1,\r\n        instances: [\r\n          {\r\n            instanceUuid: newInstanceId,\r\n            daemonId: node_id\r\n          }\r\n        ]\r\n      });\r\n    }\r\n    return {\r\n      instance_id: newInstanceId,\r\n      instance_config: newInstanceConfig,\r\n      username: user.userName,\r\n      password: newPassword,\r\n      uuid: user.uuid,\r\n      expire: toNumber(newInstanceConfig.endTime) || 0,\r\n      instance_info: formatInstanceData(newInstanceConfig)\r\n    };\r\n  }\r\n\r\n  if (request_action === RequestAction.RENEW) {\r\n    const instanceInfo = await remoteRequest.request(\"instance/detail\", {\r\n      instanceUuid: instance_id\r\n    });\r\n\r\n    const config: IGlobalInstanceConfig = instanceInfo.config || {};\r\n\r\n    if (config.category && config.category != params.category_id) {\r\n      throw new Error(t(\"TXT_CODE_c5b38d90\"));\r\n    }\r\n\r\n    if (!config) throw new Error(t(\"TXT_CODE_348c9098\"));\r\n\r\n    const curExpireTime = Number(config.endTime);\r\n    if (!curExpireTime || isNaN(curExpireTime) || curExpireTime < Date.now()) {\r\n      config.endTime = Date.now() + hours * 3600 * 1000;\r\n    } else {\r\n      config.endTime = curExpireTime + hours * 3600 * 1000;\r\n    }\r\n\r\n    await remoteRequest.request(\"instance/update\", {\r\n      instanceUuid: instance_id,\r\n      config: config\r\n    });\r\n\r\n    return {\r\n      instance_id,\r\n      instance_config: config,\r\n      expire: toNumber(config.endTime) || 0,\r\n      username: \"\",\r\n      password: \"\",\r\n      uuid: \"\"\r\n    };\r\n  }\r\n\r\n  throw new Error(t(\"TXT_CODE_4aaec75c\"));\r\n}\r\n\r\nexport async function queryInstanceByUserId(\r\n  params: Record<string, any>\r\n): Promise<InstanceInfoProtocol[]> {\r\n  const name = parseUserName(params.username) || \"\";\r\n  const targetDaemonId = toText(params.node_id) ?? undefined;\r\n  const user = user_service.getUserByUserName(name);\r\n  if (!user) throw new Error(t(\"TXT_CODE_903b6c50\"));\r\n\r\n  const { instances = [] } = await getInstancesByUuid(user.uuid, targetDaemonId, true);\r\n  const newInstancesInfo = instances.map((v) => {\r\n    return formatInstanceData(v);\r\n  });\r\n  return newInstancesInfo;\r\n}\r\n\r\nexport async function getNodeStatus(params: Record<string, any>): Promise<NodeStatusProtocol> {\r\n  const nodeId = toText(params.node_id) ?? \"\";\r\n  const remoteService = RemoteServiceSubsystem.getInstance(nodeId);\r\n  if (!remoteService?.available) {\r\n    throw new Error(t(\"TXT_CODE_bed32084\"));\r\n  }\r\n  const remoteRequest = new RemoteRequest(remoteService);\r\n  const remoteInfo = await remoteRequest.request(\"info/overview\");\r\n  remoteInfo.uuid = remoteService.uuid;\r\n  remoteInfo.available = remoteService.available;\r\n\r\n  remoteInfo.ip = remoteService.config?.ip;\r\n  remoteInfo.port = remoteService.config?.port;\r\n  remoteInfo.prefix = remoteService.config?.prefix;\r\n  remoteInfo.remarks = remoteService.config?.remarks;\r\n\r\n  return {\r\n    name: String(remoteInfo.remarks),\r\n    id: String(remoteInfo.uuid),\r\n    ip: String(remoteInfo.ip),\r\n    port: Number(remoteInfo.port),\r\n    available: Boolean(remoteInfo.available),\r\n    running: Number(remoteInfo.instance.running),\r\n    instances: Number(remoteInfo.instance.total)\r\n  };\r\n}\r\n","import { v4 } from \"uuid\";\r\nimport { IPageLayoutConfig } from \"../../../../common/global\";\r\nimport { $t as t } from \"../i18n\";\r\nimport storage from \"../common/system_storage\";\r\nimport { GlobalVariable } from \"common\";\r\nimport path from \"path\";\r\nimport fs from \"fs-extra\";\r\n\r\nconst LAYOUT_CONFIG_NAME = \"layout.json\";\r\n\r\nexport const SAVE_DIR_PATH = \"public/upload_files/\";\r\n\r\nfunction getRandomId() {\r\n  return v4();\r\n}\r\n\r\nexport function getFrontendLayoutConfig(): string {\r\n  let layoutConfig: string = \"\";\r\n  if (storage.fileExists(LAYOUT_CONFIG_NAME)) {\r\n    layoutConfig = storage.readFile(LAYOUT_CONFIG_NAME);\r\n  }\r\n  if (layoutConfig) {\r\n    if (GlobalVariable.get(\"versionChange\")) {\r\n      const latestLayoutConfig = getDefaultFrontendLayoutConfig();\r\n      const currentLayoutConfig = JSON.parse(layoutConfig) as IPageLayoutConfig[];\r\n      for (const page of latestLayoutConfig) {\r\n        if (!currentLayoutConfig.find((item) => item.page === page.page)) {\r\n          currentLayoutConfig.push(page);\r\n        }\r\n      }\r\n      GlobalVariable.set(\"versionChange\", null);\r\n      setFrontendLayoutConfig(currentLayoutConfig);\r\n      return JSON.stringify(currentLayoutConfig);\r\n    }\r\n    return layoutConfig as string;\r\n  } else {\r\n    return JSON.stringify(getDefaultFrontendLayoutConfig());\r\n  }\r\n}\r\n\r\nexport function setFrontendLayoutConfig(config: IPageLayoutConfig[]) {\r\n  storage.writeFile(LAYOUT_CONFIG_NAME, JSON.stringify(config, null, 2));\r\n}\r\n\r\nexport function resetFrontendLayoutConfig() {\r\n  storage.deleteFile(LAYOUT_CONFIG_NAME);\r\n  const filesDir = path.join(process.cwd(), SAVE_DIR_PATH);\r\n  if (fs.existsSync(filesDir)) {\r\n    for (const fileName of fs.readdirSync(filesDir)) {\r\n      fs.remove(path.join(filesDir, fileName), () => {});\r\n    }\r\n  }\r\n}\r\n\r\nexport enum LayoutCardHeight {\r\n  MINI = \"100px\",\r\n  SMALL = \"200px\",\r\n  MEDIUM = \"400px\",\r\n  BIG = \"600px\",\r\n  LARGE = \"800px\",\r\n  AUTO = \"unset\"\r\n}\r\n\r\nfunction getDefaultFrontendLayoutConfig(): IPageLayoutConfig[] {\r\n  return [\r\n    {\r\n      page: \"__settings__\",\r\n      items: [],\r\n      theme: {\r\n        backgroundImage: \"\"\r\n      }\r\n    },\r\n    {\r\n      page: \"/\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          type: \"StatusBlock\",\r\n          title: t(\"TXT_CODE_e627e546\"),\r\n          meta: {\r\n            type: \"node\"\r\n          },\r\n          width: 3,\r\n          description: t(\"TXT_CODE_55ade942\"),\r\n          height: LayoutCardHeight.SMALL\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          type: \"StatusBlock\",\r\n          title: t(\"TXT_CODE_88e9361a\"),\r\n          meta: {\r\n            type: \"instance\"\r\n          },\r\n          width: 3,\r\n          description: t(\"TXT_CODE_55ade942\"),\r\n          height: LayoutCardHeight.SMALL\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          type: \"StatusBlock\",\r\n          title: t(\"TXT_CODE_db64faf6\"),\r\n          meta: {\r\n            type: \"users\"\r\n          },\r\n          width: 3,\r\n          description: t(\"TXT_CODE_55ade942\"),\r\n          height: LayoutCardHeight.SMALL\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          type: \"StatusBlock\",\r\n          title: t(\"TXT_CODE_66056676\"),\r\n          meta: {\r\n            type: \"system\"\r\n          },\r\n          width: 3,\r\n          description: t(\"TXT_CODE_55ade942\"),\r\n          height: LayoutCardHeight.SMALL\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"DataOverview\",\r\n          title: t(\"TXT_CODE_721157a3\"),\r\n          width: 9,\r\n          description: t(\"TXT_CODE_55ade942\"),\r\n          height: LayoutCardHeight.MEDIUM\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"QuickStart\",\r\n          title: t(\"TXT_CODE_2799a1dd\"),\r\n          width: 3,\r\n          description: t(\"TXT_CODE_55ade942\"),\r\n          height: LayoutCardHeight.MEDIUM\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"RequestChart\",\r\n          title: t(\"TXT_CODE_a4037a98\"),\r\n          width: 6,\r\n          description: t(\"TXT_CODE_55ade942\"),\r\n          height: LayoutCardHeight.SMALL\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"InstanceChart\",\r\n          title: t(\"TXT_CODE_d6d9c42c\"),\r\n          width: 6,\r\n          description: t(\"TXT_CODE_55ade942\"),\r\n          height: LayoutCardHeight.SMALL\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"NodeOverview\",\r\n          title: t(\"TXT_CODE_bfb50126\"),\r\n          width: 12,\r\n          description: t(\"TXT_CODE_55ade942\"),\r\n          height: LayoutCardHeight.MEDIUM\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/instances\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"InstanceList\",\r\n          title: t(\"TXT_CODE_e21473bc\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/instances/terminal\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {\r\n            viewType: \"inner\"\r\n          },\r\n          type: \"Terminal\",\r\n          title: t(\"TXT_CODE_4ccdd3a0\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.BIG,\r\n          disableDelete: true\r\n        },\r\n\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"InstanceBaseInfo\",\r\n          title: t(\"TXT_CODE_eadb4f60\"),\r\n          width: 4,\r\n          height: LayoutCardHeight.SMALL\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"InstanceManagerBtns\",\r\n          title: t(\"TXT_CODE_efd37c48\"),\r\n          width: 8,\r\n          height: LayoutCardHeight.SMALL,\r\n          disableDelete: true\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/instances/terminal/files\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"InstanceFileManager\",\r\n          title: t(\"TXT_CODE_ae533703\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/instances/terminal/serverConfig\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"InstanceServerConfigOverview\",\r\n          title: t(\"TXT_CODE_d07742fe\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/instances/terminal/serverConfig/fileEdit\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"InstanceServerConfigFile\",\r\n          title: t(\"TXT_CODE_1c45f7fe\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/instances/schedule\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"Schedule\",\r\n          title: t(\"TXT_CODE_b7d026f8\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/users\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"UserList\",\r\n          title: t(\"TXT_CODE_97d17cce\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/users/resources\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"UserAccessSettings\",\r\n          title: t(\"TXT_CODE_eb579d63\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/settings\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"Settings\",\r\n          title: t(\"TXT_CODE_3fe97dcc\"),\r\n          width: 8,\r\n          height: LayoutCardHeight.LARGE,\r\n          disableDelete: true\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/node\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"NodeList\",\r\n          title: t(\"TXT_CODE_20509fa0\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/node/image\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"ImageManager\",\r\n          title: t(\"TXT_CODE_e6c30866\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/node/image/new\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"NewImage\",\r\n          title: t(\"TXT_CODE_3d09f0ac\"),\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/quickstart\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"QuickStartFlow\",\r\n          title: t(\"TXT_CODE_9b99b72e\"),\r\n          width: 8,\r\n          height: LayoutCardHeight.AUTO\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/quickstart/minecraft\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"McPreset\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"EmptyCard\",\r\n          title: \"\",\r\n          width: 12,\r\n          height: LayoutCardHeight.MINI\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/customer\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          type: \"UserStatusBlock\",\r\n          title: t(\"TXT_CODE_7411336e\"),\r\n          meta: {\r\n            type: \"instance_all\"\r\n          },\r\n          width: 3,\r\n          height: LayoutCardHeight.SMALL,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          type: \"UserStatusBlock\",\r\n          title: t(\"TXT_CODE_f912fadc\"),\r\n          meta: {\r\n            type: \"instance_running\"\r\n          },\r\n          width: 3,\r\n          height: LayoutCardHeight.SMALL,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          type: \"UserStatusBlock\",\r\n          title: t(\"TXT_CODE_15f2e564\"),\r\n          meta: {\r\n            type: \"instance_stop\"\r\n          },\r\n          width: 3,\r\n          height: LayoutCardHeight.SMALL,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          type: \"UserStatusBlock\",\r\n          title: t(\"TXT_CODE_342a04a9\"),\r\n          meta: {\r\n            type: \"instance_error\"\r\n          },\r\n          width: 3,\r\n          height: LayoutCardHeight.SMALL,\r\n          disableDelete: true\r\n        },\r\n        {\r\n          id: getRandomId(),\r\n          type: \"UserInstanceList\",\r\n          title: t(\"TXT_CODE_d655beec\"),\r\n          meta: {\r\n            type: \"instance_error\"\r\n          },\r\n          width: 12,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/login\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"LoginCard\",\r\n          title: t(\"TXT_CODE_ccb60658\"),\r\n          width: 4,\r\n          height: LayoutCardHeight.AUTO,\r\n          disableDelete: true\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/404\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"Page404\",\r\n          title: t(\"TXT_CODE_6aa286df\"),\r\n          width: 6,\r\n          height: LayoutCardHeight.MINI,\r\n          disableDelete: true\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      page: \"/_open_page\",\r\n      items: [\r\n        {\r\n          id: getRandomId(),\r\n          meta: {},\r\n          type: \"DefaultCard\",\r\n          title: t(\"TXT_CODE_463375d2\"),\r\n          width: 6,\r\n          height: LayoutCardHeight.SMALL\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n}\r\n","import userSystem from \"../service/user_service\";\r\nimport RemoteServiceSubsystem from \"../service/remote_service\";\r\nimport RemoteRequest from \"../service/remote_command\";\r\nimport { t } from \"i18next\";\r\n\r\nexport enum INSTANCE_STATUS {\r\n  BUSY = -1,\r\n  STOP = 0,\r\n  STOPPING = 1,\r\n  STARTING = 2,\r\n  RUNNING = 3\r\n}\r\nexport const INSTANCE_STATUS_TEXT: Record<number, string> = {\r\n  [INSTANCE_STATUS.BUSY]: t(\"TXT_CODE_342a04a9\"),\r\n  [INSTANCE_STATUS.STOP]: t(\"TXT_CODE_15f2e564\"),\r\n  [INSTANCE_STATUS.STOPPING]: t(\"TXT_CODE_a409b8a9\"),\r\n  [INSTANCE_STATUS.STARTING]: t(\"TXT_CODE_175b570d\"),\r\n  [INSTANCE_STATUS.RUNNING]: t(\"TXT_CODE_bdb620b9\")\r\n};\r\n\r\nexport interface AdvancedInstanceInfo {\r\n  instanceUuid: string;\r\n  daemonId: string;\r\n  hostIp?: string;\r\n  remarks?: string;\r\n  status?: number;\r\n  nickname?: string;\r\n  ie?: string;\r\n  oe?: string;\r\n  endTime?: number;\r\n  lastDatetime?: number;\r\n  stopCommand?: string;\r\n  processType?: string;\r\n  docker?: Record<string, any>;\r\n  info?: Record<string, any>;\r\n}\r\n\r\n// Multi-forward operation method\r\nexport function multiOperationForwarding(\r\n  instances: any[],\r\n  callback: (daemonId: string, instanceUuids: string[]) => void\r\n) {\r\n  // classification table\r\n  const map = new Map<string, string[]>();\r\n  // Classify remote hosts and instance IDs based on information\r\n  for (const instanceInfo of instances) {\r\n    const daemonId: string = instanceInfo.daemonId;\r\n    const instanceUuid: string = instanceInfo.instanceUuid;\r\n    if (map.has(daemonId)) {\r\n      map.get(daemonId)?.push(instanceUuid);\r\n    } else {\r\n      map.set(daemonId, [instanceUuid]);\r\n    }\r\n  }\r\n  // Pack and forward the classified data separately\r\n  for (const iterator of map) {\r\n    const daemonId = iterator[0];\r\n    const instanceUuids = iterator[1];\r\n    callback(daemonId, instanceUuids);\r\n  }\r\n}\r\n\r\nexport async function getInstancesByUuid(\r\n  uuid: string,\r\n  targetDaemonId?: string,\r\n  advanced: boolean = false\r\n) {\r\n  const user = userSystem.getInstance(uuid);\r\n  if (!user) throw new Error(\"The UID does not exist\");\r\n\r\n  // Advanced functions are optional, analyze each instance data\r\n  let resInstances: AdvancedInstanceInfo[] = [];\r\n  if (advanced) {\r\n    const instances = user.instances;\r\n    for (const iterator of instances) {\r\n      if (targetDaemonId && targetDaemonId !== iterator.daemonId) continue;\r\n      const remoteService = RemoteServiceSubsystem.getInstance(iterator.daemonId);\r\n      if (!remoteService) {\r\n        // If the remote service doesn't exist at all, load a deleted prompt\r\n        resInstances.push({\r\n          hostIp: \"-- Unknown --\",\r\n          instanceUuid: iterator.instanceUuid,\r\n          daemonId: iterator.daemonId,\r\n          status: -1,\r\n          nickname: \"-- Unknown --\",\r\n          remarks: \"\",\r\n          ie: \"\",\r\n          oe: \"\",\r\n          endTime: 0,\r\n          lastDatetime: 0,\r\n          stopCommand: \"\",\r\n          processType: \"\",\r\n          docker: {},\r\n          info: {}\r\n        });\r\n        continue;\r\n      }\r\n      try {\r\n        // Note: UUID can be integrated here to save the returned traffic, and this optimization will not be done for the time being\r\n        let instancesInfo = await new RemoteRequest(remoteService).request(\"instance/section\", {\r\n          instanceUuids: [iterator.instanceUuid]\r\n        });\r\n        instancesInfo = instancesInfo[0];\r\n        resInstances.push({\r\n          hostIp: `${remoteService.config.ip}:${remoteService.config.port}`,\r\n          remarks: remoteService.config.remarks,\r\n          instanceUuid: instancesInfo.instanceUuid,\r\n          daemonId: remoteService.uuid,\r\n          status: instancesInfo.status,\r\n          nickname: instancesInfo.config.nickname,\r\n          ie: instancesInfo.config.ie,\r\n          oe: instancesInfo.config.oe,\r\n          endTime: instancesInfo.config.endTime,\r\n          lastDatetime: instancesInfo.config.lastDatetime,\r\n          stopCommand: instancesInfo.config.stopCommand,\r\n          processType: instancesInfo.config.processType,\r\n          docker: instancesInfo.config.docker || {},\r\n          info: instancesInfo.info || {}\r\n        });\r\n      } catch (error: any) {\r\n        resInstances.push({\r\n          hostIp: `${remoteService.config.ip}:${remoteService.config.port}`,\r\n          instanceUuid: iterator.instanceUuid,\r\n          daemonId: iterator.daemonId,\r\n          status: -1,\r\n          nickname: \"--\",\r\n          remarks: remoteService.config.remarks,\r\n          ie: \"\",\r\n          oe: \"\",\r\n          endTime: 0,\r\n          lastDatetime: 0,\r\n          stopCommand: \"\",\r\n          processType: \"\",\r\n          docker: {},\r\n          info: {}\r\n        });\r\n      }\r\n    }\r\n  } else {\r\n    resInstances = user.instances;\r\n  }\r\n  // respond to user data\r\n  return {\r\n    uuid: user.uuid,\r\n    userName: user.userName,\r\n    loginTime: user.loginTime,\r\n    registerTime: user.registerTime,\r\n    instances: resInstances,\r\n    permission: user.permission,\r\n    apiKey: user.apiKey,\r\n    isInit: user.isInit,\r\n    open2FA: user.open2FA,\r\n    secret: user.secret,\r\n    token: \"\"\r\n  };\r\n}\r\n","import fs from \"fs-extra\";\r\nimport log4js from \"log4js\";\r\n\r\nconst LOG_FILE_PATH = \"logs/current.log\";\r\n\r\n// save the log file separately on each startup\r\nif (fs.existsSync(LOG_FILE_PATH)) {\r\n  const time = new Date();\r\n  const timeString = `${time.getFullYear()}-${\r\n    time.getMonth() + 1\r\n  }-${time.getDate()}_${time.getHours()}-${time.getMinutes()}-${time.getSeconds()}`;\r\n  fs.renameSync(LOG_FILE_PATH, `logs/${timeString}.log`);\r\n}\r\n\r\nlog4js.configure({\r\n  appenders: {\r\n    out: {\r\n      type: \"stdout\",\r\n      layout: {\r\n        type: \"pattern\",\r\n        pattern: \"[%d{MM/dd hh:mm:ss}] [%[%p%]] %m\"\r\n      }\r\n    },\r\n    file: {\r\n      type: \"file\",\r\n      filename: LOG_FILE_PATH,\r\n      layout: {\r\n        type: \"pattern\",\r\n        pattern: \"%d %p %m\"\r\n      }\r\n    }\r\n  },\r\n  categories: {\r\n    default: {\r\n      appenders: [\"out\", \"file\"],\r\n      level: \"info\"\r\n    },\r\n    file: {\r\n      appenders: [\"file\"],\r\n      level: \"info\"\r\n    }\r\n  }\r\n});\r\n\r\nconst logger = log4js.getLogger(\"default\");\r\nconst fileLogger = log4js.getLogger(\"file\");\r\n\r\nfunction fullTime(): string {\r\n  const date = new Date();\r\n  return `${date.getFullYear()}/${date.getMonth()}/${date.getDate()}`;\r\n}\r\n\r\nfunction fullLocalTime(): string {\r\n  return new Date().toLocaleTimeString();\r\n}\r\n\r\nexport { logger, fileLogger, fullTime, fullLocalTime };\r\n","import Koa from \"koa\";\r\nimport { authenticator } from \"otplib\";\r\nimport QRCode from \"qrcode\";\r\nimport userSystem from \"./user_service\";\r\nimport { timeUuid } from \"./password\";\r\nimport { GlobalVariable, toText } from \"common\";\r\nimport { systemConfig } from \"../setting\";\r\nimport { logger } from \"./log\";\r\nimport { User } from \"../entity/user\";\r\nimport { $t } from \"../i18n\";\r\n\r\nexport const BAN_IP_COUNT = \"banip\";\r\nexport const LOGIN_FAILED_KEY = \"loginFailed\";\r\nexport const ILLEGAL_ACCESS_KEY = \"illegalAccess\";\r\nexport const LOGIN_COUNT = \"loginCount\";\r\nexport const LOGIN_FAILED_COUNT_KEY = \"loginFailedCount\";\r\n\r\nexport function login(\r\n  ctx: Koa.ParameterizedContext,\r\n  userName: string,\r\n  passWord: string,\r\n  twoFACode?: string\r\n): string {\r\n  // record the number of login requests\r\n  GlobalVariable.set(LOGIN_COUNT, GlobalVariable.get(LOGIN_COUNT, 0) + 1);\r\n  const ip = getLoginIp(ctx);\r\n  // check user information\r\n  try {\r\n    userSystem.checkUser({ userName, passWord }, twoFACode);\r\n    // The number of errors to reset this IP after successful login\r\n    const ipMap = GlobalVariable.get(LOGIN_FAILED_KEY);\r\n    if (ipMap) delete ipMap[ip || \"\"];\r\n\r\n    // Session Session state changes to logged in\r\n    return loginSuccess(ctx, userName);\r\n  } catch (err) {\r\n    // record the number of login failures\r\n    GlobalVariable.set(LOGIN_FAILED_COUNT_KEY, GlobalVariable.get(LOGIN_FAILED_COUNT_KEY, 0) + 1);\r\n    if (ctx.session) {\r\n      ctx.session[\"login\"] = null;\r\n      ctx.session[\"token\"] = null;\r\n      ctx.session.save();\r\n    }\r\n    logger.info(`[LOGIN] IP: ${ip}, Try login ${userName} failed!`);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport function loginSuccess(ctx: Koa.ParameterizedContext, userName: string) {\r\n  const ip = getLoginIp(ctx);\r\n  const user = userSystem.getUserByUserName(userName);\r\n  if (!user) throw new Error($t(\"TXT_CODE_router.login.nameOrPassError\"));\r\n  if (!ctx.session) throw new Error(\"Session is Null!\");\r\n\r\n  user.loginTime = new Date().toLocaleString();\r\n  ctx.session[\"login\"] = true;\r\n  ctx.session[\"userName\"] = userName;\r\n  ctx.session[\"uuid\"] = user.uuid;\r\n  ctx.session[\"token\"] = timeUuid();\r\n  ctx.session.save();\r\n\r\n  logger.info($t(\"TXT_CODE_42036f92\"));\r\n  logger.info(`[LOGIN] IP: ${ip} Login ${userName} successful!`);\r\n  logger.info(`[LOGIN] Token: ${ctx.session[\"token\"]}`);\r\n  logger.info($t(\"TXT_CODE_42036f92\"));\r\n\r\n  return String(ctx.session[\"token\"]);\r\n}\r\n\r\nexport function getLoginIp(ctx: Koa.ParameterizedContext) {\r\n  return systemConfig?.reverseProxyMode\r\n    ? toText(ctx.header[\"x-real-ip\"])\r\n    : ctx.socket.remoteAddress;\r\n}\r\n\r\nexport async function bind2FA(ctx: Koa.ParameterizedContext) {\r\n  if (!ctx.session) throw new Error(\"Session is Null!\");\r\n  const userName = ctx.session[\"userName\"];\r\n  const user = userSystem.getUserByUserName(userName);\r\n  if (!user) throw new Error(\"User is Null!\");\r\n  try {\r\n    const secret = authenticator.generateSecret();\r\n    const qrCode = await QRCode.toDataURL(\r\n      authenticator.keyuri(userName, \"MCSManager Panel\", secret)\r\n    );\r\n    userSystem.edit(user.uuid, { secret, open2FA: false });\r\n    return qrCode;\r\n  } catch (err) {\r\n    user.secret = \"\";\r\n  }\r\n}\r\n\r\nexport async function confirm2FaQRCode(userUuid: string, isEnable: boolean) {\r\n  await userSystem.edit(userUuid, {\r\n    open2FA: isEnable\r\n  });\r\n}\r\n\r\nexport function check(ctx: Koa.ParameterizedContext) {\r\n  if (!ctx.session) return false;\r\n  if (ctx.session[\"login\"] && ctx.session[\"userName\"] && ctx.session[\"token\"]) return true;\r\n  return false;\r\n}\r\n\r\nexport function logout(ctx: Koa.ParameterizedContext): boolean {\r\n  if (!ctx.session) return false;\r\n  ctx.session[\"login\"] = null;\r\n  ctx.session[\"userName\"] = null;\r\n  ctx.session[\"uuid\"] = null;\r\n  ctx.session[\"token\"] = null;\r\n  ctx.session.maxAge = 0;\r\n  ctx.session.save();\r\n  return true;\r\n}\r\n\r\nexport async function register(\r\n  ctx: Koa.ParameterizedContext,\r\n  userName: string,\r\n  passWord: string,\r\n  permission: number\r\n) {\r\n  let f = true;\r\n  // Check for duplicate usernames.\r\n  userSystem.objects.forEach((user) => {\r\n    if (user && user.userName == userName) f = false;\r\n  });\r\n  if (f) {\r\n    // Next. UUID and other data will be automatically generated.\r\n    const { uuid } = await userSystem.create({\r\n      userName,\r\n      passWord,\r\n      permission\r\n    });\r\n\r\n    return {\r\n      uuid,\r\n      userName,\r\n      permission\r\n    };\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function getUserPermission(ctx: Koa.ParameterizedContext): number {\r\n  let user: User | undefined | null = undefined;\r\n  if (isApiRequest(ctx)) {\r\n    user = getUuidByApiKey(getApiKey(ctx));\r\n  } else {\r\n    user = userSystem.getInstance(ctx.session?.[\"uuid\"] || \"\");\r\n  }\r\n  if (!user) return 0;\r\n  return user.permission ?? 0;\r\n}\r\n\r\nexport function getUserNameBySession(ctx: Koa.ParameterizedContext): string {\r\n  if (isApiRequest(ctx)) {\r\n    const user = getUuidByApiKey(getApiKey(ctx));\r\n    return user ? user.userName : \"\";\r\n  }\r\n  return ctx.session?.[\"userName\"];\r\n}\r\n\r\nexport function getUserUuid(ctx: Koa.ParameterizedContext): string {\r\n  if (isApiRequest(ctx)) {\r\n    const user = getUuidByApiKey(getApiKey(ctx));\r\n    if (user && user.uuid) {\r\n      return user.uuid;\r\n    } else {\r\n      return \"\";\r\n    }\r\n  }\r\n  return ctx.session?.[\"uuid\"] || \"\";\r\n}\r\n\r\nexport function getToken(ctx: Koa.ParameterizedContext): string {\r\n  return ctx.session?.[\"token\"] || \"\";\r\n}\r\n\r\nexport function isAjax(ctx: Koa.ParameterizedContext) {\r\n  return (\r\n    ctx.header[\"x-requested-with\"] &&\r\n    ctx.header[\"x-requested-with\"].toString().toLocaleLowerCase() === \"xmlhttprequest\"\r\n  );\r\n}\r\n\r\nexport function checkBanIp(ctx: Koa.ParameterizedContext) {\r\n  if (!GlobalVariable.map.has(LOGIN_FAILED_KEY)) GlobalVariable.set(LOGIN_FAILED_KEY, {});\r\n  // This IpMap also needs to be used when logging in\r\n  const ipMap = GlobalVariable.get(LOGIN_FAILED_KEY);\r\n\r\n  const ip =\r\n    (systemConfig?.reverseProxyMode ? toText(ctx.header[\"x-real-ip\"]) : ctx.socket.remoteAddress) ||\r\n    \"\";\r\n\r\n  if (ipMap[ip] > 10 && systemConfig?.loginCheckIp === true) {\r\n    if (ipMap[ip] != 999) {\r\n      // record the number of bans\r\n      GlobalVariable.set(BAN_IP_COUNT, GlobalVariable.get(BAN_IP_COUNT, 0) + 1);\r\n      setTimeout(() => {\r\n        delete ipMap[ip];\r\n        // delete the number of bans\r\n        GlobalVariable.set(BAN_IP_COUNT, GlobalVariable.get(BAN_IP_COUNT, 1) - 1);\r\n      }, 1000 * 60 * 10);\r\n    }\r\n    ipMap[ip] = 999;\r\n    return false;\r\n  }\r\n  if (!isNaN(Number(ipMap[ip]))) ipMap[ip] = Number(ipMap[ip]) + 1;\r\n  else ipMap[ip] = 1;\r\n  return true;\r\n}\r\n\r\nexport function getUuidByApiKey(apiKey: string) {\r\n  const pageData = userSystem.getQueryWrapper().selectPage(\r\n    {\r\n      apiKey\r\n    },\r\n    1,\r\n    1\r\n  );\r\n  if (pageData.total === 1) {\r\n    return pageData.data[0];\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function isApiRequest(ctx: Koa.ParameterizedContext) {\r\n  return ctx.query.apikey ? true : false;\r\n}\r\n\r\nexport function getApiKey(ctx: Koa.ParameterizedContext) {\r\n  return String(ctx.query.apikey);\r\n}\r\n","import { v4 } from \"uuid\";\r\n\r\nexport function timeUuid() {\r\n  let uuid = v4().replace(/-/gim, \"\");\r\n  const t = new Date().getTime() + \"\";\r\n  uuid = uuid + t;\r\n  return uuid;\r\n}\r\n","import userSystem from \"./user_service\";\r\nimport { User } from \"../entity/user\";\r\n\r\nexport function isHaveInstance(user: User, daemonId: string, instanceUuid: string) {\r\n  if (isTopPermission(user)) return true;\r\n  if (user && user.instances) {\r\n    for (const v of user.instances) {\r\n      if (daemonId === v.daemonId && instanceUuid === v.instanceUuid) return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function isTopPermission(user: User) {\r\n  if (!user) return false;\r\n  return user.permission >= 10;\r\n}\r\n\r\nexport function isTopPermissionByUuid(uuid: string) {\r\n  const user = userSystem.getInstance(uuid);\r\n  if (!user) return false;\r\n  return isTopPermission(user);\r\n}\r\n\r\nexport function isHaveInstanceByUuid(uuid: string, daemonId: string, instanceUuid: string) {\r\n  const user = userSystem.getInstance(uuid);\r\n  if (!user) return false;\r\n  return isHaveInstance(user, daemonId, instanceUuid);\r\n}\r\n","import { v4 } from \"uuid\";\r\nimport { IPacket, IRequestPacket } from \"../entity/entity_interface\";\r\nimport RemoteService from \"../entity/remote_service\";\r\nimport { $t } from \"../i18n\";\r\n\r\nclass RemoteError extends Error {\r\n  constructor(msg: string) {\r\n    super(msg);\r\n  }\r\n}\r\n\r\nexport class RemoteRequestTimeoutError extends RemoteError {\r\n  constructor(msg: string) {\r\n    super(msg);\r\n  }\r\n}\r\n\r\n// Use RemoteRequest to send Socket.io events and data to remote services,\r\n// and support synchronous response data (such as HTTP).\r\nexport default class RemoteRequest {\r\n  constructor(public readonly rService?: RemoteService) {\r\n    if (!this.rService || !this.rService.socket) throw new Error($t(\"TXT_CODE_ca8072bd\"));\r\n  }\r\n\r\n  // request to remote daemon\r\n  public async request<T = any>(\r\n    event: string,\r\n    data?: any,\r\n    timeout = 6000,\r\n    force = false\r\n  ): Promise<T> {\r\n    if (!this.rService || !this.rService.socket) throw new Error($t(\"TXT_CODE_3d94ea16\"));\r\n    if (!this.rService.available && !force)\r\n      throw new Error($t(\"TXT_CODE_b7d38e78\") + ` IP: ${this.rService.config.ip}`);\r\n    if (!this.rService.socket.connected && !force)\r\n      throw new Error($t(\"TXT_CODE_7c650d80\") + ` IP: ${this.rService.config.ip}`);\r\n\r\n    return new Promise((resolve, reject) => {\r\n      let countdownTask: NodeJS.Timeout;\r\n      const uuid = [v4(), new Date().getTime()].join(\"\");\r\n      const protocolData: IRequestPacket = { uuid, data };\r\n\r\n      const fn = (msg: IPacket) => {\r\n        if (msg.uuid === uuid) {\r\n          if (countdownTask) clearTimeout(countdownTask);\r\n          this.rService?.socket?.removeListener(event, fn);\r\n          if (msg.status == RemoteService.STATUS_OK) resolve(msg.data);\r\n          else if (msg.data.err) {\r\n            reject(new RemoteError(msg.data.err));\r\n          } else {\r\n            reject(new RemoteError(msg.data));\r\n          }\r\n        }\r\n      };\r\n\r\n      if (timeout) {\r\n        countdownTask = setTimeout(() => {\r\n          this.rService?.socket?.removeListener(event, fn);\r\n          reject(\r\n            new RemoteRequestTimeoutError(\r\n              [$t(\"TXT_CODE_bd99b64e\"), this.rService?.config.ip].join(\" \")\r\n            )\r\n          );\r\n        }, timeout);\r\n      }\r\n\r\n      this.rService?.socket?.on(event, fn);\r\n      // send command\r\n      this.rService?.emit(event, protocolData);\r\n    });\r\n  }\r\n}\r\n","import { logger } from \"./log\";\r\nimport { IRemoteService, RemoteServiceConfig } from \"../entity/entity_interface\";\r\nimport RemoteService from \"../entity/remote_service\";\r\nimport { UniversalRemoteSubsystem } from \"./base/urs\";\r\nimport Storage from \"../common/storage/sys_storage\";\r\nimport fs from \"fs-extra\";\r\nimport path from \"path\";\r\nimport { $t } from \"../i18n\";\r\n\r\n// The RemoteServiceSubsystem will be one of the most important systems\r\n// main function is to store remote services everywhere\r\n// Scan local services, unified management, remote calls and proxies, etc.\r\nclass RemoteServiceSubsystem extends UniversalRemoteSubsystem<RemoteService> {\r\n  async initialize() {\r\n    // If it is the first startup, it will automatically try to connect to \"LocalHost\",\r\n    // otherwise it will automatically read from the configuration file and connect to all remote services.\r\n    for (const uuid of await Storage.getStorage().list(\"RemoteServiceConfig\")) {\r\n      const config = (await Storage.getStorage().load(\r\n        \"RemoteServiceConfig\",\r\n        RemoteServiceConfig,\r\n        uuid\r\n      )) as RemoteServiceConfig;\r\n      const newService = new RemoteService(uuid, config);\r\n      this.setInstance(uuid, newService);\r\n      newService.connect();\r\n    }\r\n\r\n    // If there is no daemon process, check whether there is a daemon process locally\r\n    if (this.services.size === 0) {\r\n      await this.initConnectLocalhost(\"\");\r\n    }\r\n\r\n    logger.info($t(\"TXT_CODE_systemRemoteService.nodeCount\", { n: this.services.size }));\r\n\r\n    // Register for periodic connection status checks\r\n    setInterval(() => this.connectionStatusCheckTask(), 1000 * 60);\r\n  }\r\n\r\n  // Register a NEW remote service to system and connect it.\r\n  // Like: this.registerRemoteService({\r\n  // ip: \"127.0.0.1\",\r\n  // apiKey: \"test_key\",\r\n  // port: 24444\r\n  // });\r\n  async registerRemoteService(config: IRemoteService) {\r\n    const instance = await this.newInstance(config);\r\n    if (!instance) throw new Error($t(\"TXT_CODE_3bfb9e04\"));\r\n    await Storage.getStorage().store(\"RemoteServiceConfig\", instance.uuid, instance.config);\r\n    instance.connect();\r\n    return instance;\r\n  }\r\n\r\n  // Delete the specified remote service based on UUID\r\n  async deleteRemoteService(uuid: string) {\r\n    if (this.getInstance(uuid)) {\r\n      this.getInstance(uuid)?.disconnect();\r\n      this.deleteInstance(uuid);\r\n      await Storage.getStorage().delete(\"RemoteServiceConfig\", uuid);\r\n    }\r\n  }\r\n\r\n  // According to the IRemoteService, New a RemoteService object\r\n  // Used to initialize objects.\r\n  async newInstance(config: IRemoteService) {\r\n    const instance = new RemoteService(\r\n      config.uuid || this.randdomUuid(),\r\n      new RemoteServiceConfig()\r\n    );\r\n    this.setInstance(instance.uuid, instance);\r\n    await this.edit(instance.uuid, config);\r\n    return instance;\r\n  }\r\n\r\n  // Edit the configuration file of the instance\r\n  async edit(uuid: string, config: IRemoteService) {\r\n    const instance = this.getInstance(uuid);\r\n    if (!instance) return;\r\n    if (config.remarks) instance.config.remarks = config.remarks;\r\n    if (config.ip) instance.config.ip = config.ip;\r\n    if (config.port) instance.config.port = config.port;\r\n    if (config.prefix != null) instance.config.prefix = config.prefix;\r\n    if (config.apiKey) instance.config.apiKey = config.apiKey;\r\n    await Storage.getStorage().store(\"RemoteServiceConfig\", instance.uuid, instance.config);\r\n  }\r\n\r\n  // Scannce localhost service\r\n  // First use, need to scan the local host\r\n  // Note: Every time you execute \"initConnectLocalhost\",\r\n  // it will be managed by the subsystem (regardless of whether the target exists).\r\n  async initConnectLocalhost(key?: string) {\r\n    const ip = \"localhost\";\r\n    const localKeyFilePath = path.normalize(\r\n      path.join(process.cwd(), \"../daemon/data/Config/global.json\")\r\n    );\r\n    logger.info($t(\"TXT_CODE_systemRemoteService.loadDaemonTitle\", { localKeyFilePath }));\r\n    if (fs.existsSync(localKeyFilePath)) {\r\n      logger.info($t(\"TXT_CODE_systemRemoteService.autoCheckDaemon\"));\r\n      const localDaemonConfig = JSON.parse(\r\n        fs.readFileSync(localKeyFilePath, { encoding: \"utf-8\" })\r\n      );\r\n      const localKey = localDaemonConfig.key;\r\n      const localPort = localDaemonConfig.port;\r\n      return await this.registerRemoteService({ apiKey: localKey, port: localPort, ip });\r\n    } else if (key) {\r\n      const port = 24444;\r\n      return await this.registerRemoteService({ apiKey: key, port, ip });\r\n    }\r\n    logger.warn($t(\"TXT_CODE_systemRemoteService.error\"));\r\n\r\n    // After 5 seconds, determine whether the daemon has been connected until a daemon is connected\r\n    setTimeout(() => {\r\n      if (this.services.size === 0) return this.initConnectLocalhost();\r\n    }, 5 * 1000);\r\n  }\r\n\r\n  count() {\r\n    let total = 0;\r\n    let available = 0;\r\n    this.services.forEach((v) => {\r\n      total++;\r\n      if (v.available) available++;\r\n    });\r\n    return { available, total };\r\n  }\r\n\r\n  // Periodic connection status check\r\n  connectionStatusCheckTask() {\r\n    this.services?.forEach((v) => {\r\n      if (v && v.available === false) {\r\n        logger.warn(\r\n          `Daemon exception detected: ${v.config.remarks} ${v.config.ip}:${v.config.port}, reconnecting...`\r\n        );\r\n        return v.connect();\r\n      }\r\n    });\r\n  }\r\n\r\n  changeDaemonLanguage(language: string) {\r\n    for (const iterator of this.services.entries()) {\r\n      iterator[1].setLanguage(language);\r\n    }\r\n  }\r\n}\r\n\r\nexport default new RemoteServiceSubsystem();\r\n","import md5 from \"md5\";\r\nimport { v4 } from \"uuid\";\r\nimport { IUserApp, User, UserPassWordType } from \"../entity/user\";\r\nimport { logger } from \"./log\";\r\nimport { IUser } from \"../entity/entity_interface\";\r\nimport Storage from \"../common/storage/sys_storage\";\r\nimport { QueryWrapper, LocalFileSource } from \"common\";\r\nimport { $t } from \"../i18n\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport { authenticator } from \"otplib\";\r\nimport { t } from \"i18next\";\r\n\r\nexport class TwoFactorError extends Error {}\r\n\r\nclass UserSubsystem {\r\n  public readonly objects: Map<string, User> = new Map();\r\n\r\n  async initialize() {\r\n    for (const uuid of await Storage.getStorage().list(\"User\")) {\r\n      const user = (await Storage.getStorage().load(\"User\", User, uuid)) as User;\r\n      this.objects.set(uuid, user);\r\n    }\r\n    logger.info($t(\"TXT_CODE_systemUser.userCount\", { n: this.objects.size }));\r\n  }\r\n\r\n  async create(config: IUser): Promise<User> {\r\n    const newUuid = v4().replace(/-/gim, \"\");\r\n    // Initialize necessary user data\r\n    const instance = new User();\r\n    instance.uuid = newUuid;\r\n    instance.registerTime = new Date().toLocaleString();\r\n    // add to the user system\r\n    this.setInstance(newUuid, instance);\r\n    await this.edit(instance.uuid, config);\r\n    // Persistently save user information\r\n    await Storage.getStorage().store(\"User\", instance.uuid, instance);\r\n    return instance;\r\n  }\r\n\r\n  // Update user detail\r\n  async edit(uuid: string, config: any) {\r\n    const instance = this.getInstance(uuid);\r\n    if (!instance) return;\r\n    if (config.userName) instance.userName = config.userName;\r\n    if (config.isInit != null) instance.isInit = Boolean(config.isInit);\r\n    if (config.permission) instance.permission = config.permission;\r\n    if (config.registerTime) instance.registerTime = config.registerTime;\r\n    if (config.loginTime) instance.loginTime = config.loginTime;\r\n    if (config.apiKey != null) instance.apiKey = config.apiKey;\r\n    if (config.secret != null) instance.secret = String(config.secret);\r\n    if (config.open2FA != null) instance.open2FA = Boolean(config.open2FA);\r\n    if (config.instances) this.setUserInstances(uuid, config.instances);\r\n    if (config.passWord) {\r\n      instance.passWordType = UserPassWordType.bcrypt;\r\n      instance.passWord = bcrypt.hashSync(config.passWord, 10);\r\n    }\r\n    await Storage.getStorage().store(\"User\", uuid, instance);\r\n  }\r\n\r\n  validatePassword(password = \"\") {\r\n    if (password.length < 9 || password.length > 36) return false;\r\n    const reg = /(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])/;\r\n    return reg.test(password);\r\n  }\r\n\r\n  check2FA(code: string, user: IUser) {\r\n    if (!user.secret)\r\n      throw new Error(\"Please contact the administrator to reset the account password\");\r\n    return authenticator.check(code, user?.secret);\r\n  }\r\n\r\n  checkUser(info: IUser, code2FA?: string) {\r\n    const inputPassword = info.passWord || \"\";\r\n    for (const [uuid, user] of this.objects) {\r\n      if (user.userName === info.userName) {\r\n        if (user.open2FA && user.secret && !this.check2FA(code2FA || \"\", user))\r\n          throw new TwoFactorError(t(\"TXT_CODE_3d68e43b\"));\r\n        if (user.passWordType === UserPassWordType.bcrypt) {\r\n          if (!bcrypt.compareSync(inputPassword, user.passWord))\r\n            throw new Error($t(\"TXT_CODE_fefbb457\"));\r\n        } else {\r\n          if (!(md5(inputPassword) === user.passWord)) throw new Error($t(\"TXT_CODE_fefbb457\"));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  existUserName(userName: string): boolean {\r\n    let flag = false;\r\n    this.objects.forEach((user) => {\r\n      if (user.userName === userName) return (flag = true);\r\n    });\r\n    return flag;\r\n  }\r\n\r\n  setUserInstances(uuid: string, instanceIds: IUserApp[]) {\r\n    const user = this.getInstance(uuid);\r\n    if (!user) return;\r\n    instanceIds.forEach((value) => {\r\n      if (!value.daemonId || !value.instanceUuid)\r\n        throw new Error(\"Type error, The instances of user must be IUserHaveInstance array.\");\r\n    });\r\n    user.instances = [];\r\n    instanceIds.forEach((value) => {\r\n      user.instances.push({\r\n        instanceUuid: String(value.instanceUuid),\r\n        daemonId: String(value.daemonId)\r\n      });\r\n    });\r\n  }\r\n\r\n  getUserByUserName(userName: string) {\r\n    for (const map of this.objects) {\r\n      const user = map[1];\r\n      if (user.userName === userName) return user;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getInstance(uuid: string) {\r\n    return this.objects.get(uuid);\r\n  }\r\n\r\n  setInstance(uuid: string, object: User) {\r\n    this.objects.set(uuid, object);\r\n  }\r\n\r\n  hasInstance(uuid: string) {\r\n    return this.objects.has(uuid);\r\n  }\r\n\r\n  async deleteInstance(uuid: string) {\r\n    if (this.hasInstance(uuid)) {\r\n      this.objects.delete(uuid);\r\n      await Storage.getStorage().delete(\"User\", uuid);\r\n    }\r\n  }\r\n\r\n  getQueryWrapper() {\r\n    return new QueryWrapper(new LocalFileSource<User>(this.objects));\r\n  }\r\n}\r\n\r\nexport default new UserSubsystem();\r\n","import { v4 } from \"uuid\";\r\n\r\nexport default class UserSSOService {\r\n  private static tokens = new Map<string, string>();\r\n\r\n  constructor() {}\r\n\r\n  public static generateSSOToken(username: string) {\r\n    if (!username || typeof username !== \"string\") throw new Error(\"username is required!\");\r\n    const token = v4();\r\n    UserSSOService.tokens.set(token, username);\r\n    if (UserSSOService.tokens.size > 1000) {\r\n      UserSSOService.tokens.delete(UserSSOService.tokens.keys().next().value);\r\n    }\r\n    return token;\r\n  }\r\n\r\n  public static verifySSOToken(username: string, token: string) {\r\n    const name = UserSSOService.tokens.get(token);\r\n    if (name === username) {\r\n      UserSSOService.tokens.delete(token);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","import axios from \"axios\";\r\nimport { getVersion } from \"../version\";\r\n\r\n// This function module is used for MCSManager user statistics,\r\n// the purpose is to know the number of existing daily activities and installations.\r\n// User statistics will not send any private data, user data, system information, etc.\r\nconst st = new Date().getTime();\r\nconst version = getVersion();\r\n\r\nasync function statistics() {\r\n  return await axios.get(\"http://statistics.mcsmanager.com/\", {\r\n    params: {\r\n      st,\r\n      version\r\n    },\r\n    timeout: 1000 * 30\r\n  });\r\n}\r\n\r\n// Only one request within 24 hours counts as valid statistics, and repeated requests are ignored\r\n// This is set to request once every 24 hours\r\nsetInterval(async () => {\r\n  try {\r\n    return await statistics();\r\n  } catch (error: any) {\r\n    // ignore\r\n  }\r\n}, 1000 * 60 * 60 * 24);\r\n\r\n// Count once when the panel starts\r\nstatistics()\r\n  .then(() => {})\r\n  .catch(() => {});\r\n","import StorageSubsystem from \"../common/system_storage\";\r\nimport { t } from \"i18next\";\r\nimport { logger } from \"./log\";\r\n\r\nfunction readCategoryConfig(configCategory: string, callback: (config: any) => boolean) {\r\n  const configPaths = StorageSubsystem.readDir(configCategory);\r\n  for (const configPath of configPaths) {\r\n    try {\r\n      const config = JSON.parse(StorageSubsystem.readFile(configPath));\r\n      if (callback(config)) {\r\n        logger.info(t(\"TXT_CODE_6b2a9cab\"), configPath);\r\n        StorageSubsystem.writeFile(configPath, JSON.stringify(config, null, 4));\r\n      }\r\n    } catch (error: any) {\r\n      logger.error(t(\"TXT_CODE_fb75aba9\"), error);\r\n    }\r\n  }\r\n}\r\n\r\nfunction refactorUserConfig(config: any) {\r\n  let changed = false;\r\n  const { instances } = config;\r\n  if (instances instanceof Array && instances.length > 0) {\r\n    for (const iterator of instances) {\r\n      if (typeof iterator.serviceUuid === \"string\") {\r\n        iterator.daemonId = iterator.serviceUuid;\r\n        delete iterator.serviceUuid;\r\n        changed = true;\r\n      }\r\n    }\r\n  }\r\n  return changed;\r\n}\r\n\r\nfunction detectConfig() {\r\n  readCategoryConfig(\"User\", refactorUserConfig);\r\n}\r\n\r\nexport default { detectConfig };\r\n","import { logger } from \"./log\";\r\nimport { systemInfo } from \"common\";\r\nimport RemoteServiceSubsystem from \"./remote_service\";\r\nimport RemoteRequest from \"./remote_command\";\r\n\r\n// Visual data subsystem: responsible for collecting system data and event data, and providing some methods to display them\r\nclass LineQueue<T> {\r\n  private readonly arr = new Array<T>();\r\n\r\n  constructor(public readonly maxSize: number, defaultValue: T) {\r\n    for (let index = 0; index < maxSize; index++) {\r\n      this.arr.push(defaultValue);\r\n    }\r\n  }\r\n\r\n  push(data: T) {\r\n    if (this.arr.length < this.maxSize) {\r\n      this.arr.push(data);\r\n    } else {\r\n      this.arr.shift();\r\n      this.arr.push(data);\r\n    }\r\n  }\r\n\r\n  getArray() {\r\n    return this.arr;\r\n  }\r\n}\r\n\r\ninterface ISystemChartInfo {\r\n  cpu: number;\r\n  mem: number;\r\n}\r\n\r\ninterface IWebChartInfo {\r\n  value: number;\r\n  totalInstance: number;\r\n  runningInstance: number;\r\n}\r\n\r\nclass VisualDataSubsystem {\r\n  public readonly countMap: Map<string, number> = new Map<string, number>();\r\n\r\n  // system information table\r\n  public readonly systemChart = new LineQueue<ISystemChartInfo>(60, { cpu: 0, mem: 0 });\r\n  // panel state table\r\n  public readonly statusChart = new LineQueue<IWebChartInfo>(60, {\r\n    value: 0,\r\n    totalInstance: 0,\r\n    runningInstance: 0\r\n  });\r\n\r\n  // request count counter\r\n  private requestCount = 0;\r\n\r\n  constructor() {\r\n    // system information table\r\n    setInterval(() => {\r\n      const info = systemInfo();\r\n      if (info) {\r\n        this.systemChart.push({\r\n          cpu: Number((info.cpuUsage * 100).toFixed(1)),\r\n          mem: Number((info.memUsage * 100).toFixed(1))\r\n        });\r\n      } else {\r\n        this.systemChart.push({\r\n          cpu: 0,\r\n          mem: 0\r\n        });\r\n      }\r\n    }, 1000 * 10);\r\n\r\n    // state table\r\n    setInterval(async () => {\r\n      // Calculate the total number of instances and the number of running instances\r\n      const remoteInfoList = new Array();\r\n      for (const iterator of RemoteServiceSubsystem.services.entries()) {\r\n        try {\r\n          remoteInfoList.push(await new RemoteRequest(iterator[1]).request(\"info/overview\"));\r\n        } catch (err) {}\r\n      }\r\n      let totalInstance = 0;\r\n      let runningInstance = 0;\r\n      for (const iterator of remoteInfoList) {\r\n        if (iterator.instance) {\r\n          totalInstance += iterator.instance.total;\r\n          runningInstance += iterator.instance.running;\r\n        }\r\n      }\r\n      this.statusChart.push({\r\n        value: this.requestCount,\r\n        totalInstance,\r\n        runningInstance\r\n      });\r\n      this.requestCount = 0;\r\n    }, 1000 * 10);\r\n  }\r\n\r\n  addRequestCount() {\r\n    this.requestCount++;\r\n  }\r\n\r\n  getSystemChartArray() {\r\n    return this.systemChart.getArray();\r\n  }\r\n\r\n  getStatusChartArray() {\r\n    return this.statusChart.getArray();\r\n  }\r\n\r\n  // Trigger counting event\r\n  emitCountEvent(eventName: string) {\r\n    const v = this.countMap.get(eventName);\r\n    if (v) {\r\n      this.countMap.set(eventName, v + 1);\r\n    } else {\r\n      this.countMap.set(eventName, 1);\r\n    }\r\n  }\r\n\r\n  // Trigger counting event\r\n  eventCount(eventName: string) {\r\n    return this.countMap.get(eventName);\r\n  }\r\n\r\n  // Trigger log event\r\n  emitLogEvent(eventName: string, source: any) {\r\n    const time = new Date().toLocaleString();\r\n    logger.info(`The object [${source}] triggered the [${eventName}] event at ${time}`);\r\n  }\r\n}\r\n\r\nexport default new VisualDataSubsystem();\r\n","// global configuration initialization\r\n\r\nimport SystemConfig from \"./entity/setting\";\r\nimport StorageSystem from \"./common/system_storage\";\r\nimport { i18next } from \"./i18n\";\r\nlet systemConfig: SystemConfig | null = null;\r\n\r\n// System persistence configuration table\r\nexport function initSystemConfig() {\r\n  systemConfig = StorageSystem.load(\"SystemConfig\", SystemConfig, \"config\");\r\n  if (!systemConfig) {\r\n    systemConfig = new SystemConfig();\r\n    StorageSystem.store(\"SystemConfig\", \"config\", systemConfig);\r\n  }\r\n  if (systemConfig.language) i18next.changeLanguage(systemConfig.language);\r\n}\r\n\r\nexport function saveSystemConfig(_systemConfig: SystemConfig) {\r\n  StorageSystem.store(\"SystemConfig\", \"config\", _systemConfig);\r\n}\r\n\r\nexport { systemConfig };\r\n","import * as fs from \"fs-extra\";\r\nimport { GlobalVariable } from \"common\";\r\nimport { logger } from \"./service/log\";\r\nimport storage from \"./common/system_storage\";\r\n\r\ninterface PackageInfo {\r\n  name: string;\r\n  version: string;\r\n  daemonVersion: string;\r\n  description: string;\r\n}\r\n\r\nconst PACKAGE_JSON = \"package.json\";\r\nconst VERSION_LOG_TEXT_NAME = \"current-version.txt\";\r\nlet currentVersion = \"\";\r\n\r\nexport function initVersionManager() {\r\n  try {\r\n    GlobalVariable.set(\"version\", \"Unknown\");\r\n    if (fs.existsSync(PACKAGE_JSON)) {\r\n      const data: PackageInfo = JSON.parse(fs.readFileSync(PACKAGE_JSON, { encoding: \"utf-8\" }));\r\n      if (data.version) {\r\n        GlobalVariable.set(\"version\", data.version);\r\n        currentVersion = String(data.version);\r\n      }\r\n    }\r\n  } catch (error: any) {\r\n    logger.error(\"Version Check failure:\", error);\r\n  }\r\n\r\n  if (currentVersion && storage.fileExists(VERSION_LOG_TEXT_NAME)) {\r\n    const LastLaunchedVersion = storage.readFile(VERSION_LOG_TEXT_NAME);\r\n    if (LastLaunchedVersion && LastLaunchedVersion != currentVersion) {\r\n      logger.warn(`Version changed from ${LastLaunchedVersion} to ${currentVersion}`);\r\n      GlobalVariable.set(\"versionChange\", currentVersion);\r\n    }\r\n  }\r\n  storage.writeFile(VERSION_LOG_TEXT_NAME, currentVersion);\r\n}\r\n\r\nexport function getVersion(): string {\r\n  return GlobalVariable.get(\"version\", \"Unknown\");\r\n}\r\n\r\nexport function specifiedDaemonVersion() {\r\n  try {\r\n    const data: any = JSON.parse(fs.readFileSync(PACKAGE_JSON, { encoding: \"utf-8\" }));\r\n    return data.daemonVersion ?? \"1.0.0\";\r\n  } catch (error: any) {\r\n    return \"1.0.0\";\r\n  }\r\n}\r\n","module.exports = require(\"@koa/router\");","module.exports = require(\"axios\");","module.exports = require(\"bcryptjs\");","module.exports = require(\"events\");","module.exports = require(\"fs-extra\");","module.exports = require(\"i18next\");","module.exports = require(\"iconv-lite\");","module.exports = require(\"koa\");","module.exports = require(\"koa-body-patch\");","module.exports = require(\"koa-session\");","module.exports = require(\"koa-static\");","module.exports = require(\"log4js\");","module.exports = require(\"md5\");","module.exports = require(\"module-alias/register\");","module.exports = require(\"nanoid\");","module.exports = require(\"open\");","module.exports = require(\"os-utils\");","module.exports = require(\"otplib\");","module.exports = require(\"qrcode\");","module.exports = require(\"redis\");","module.exports = require(\"socket.io-client\");","module.exports = require(\"uuid\");","module.exports = require(\"child_process\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"stream\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/app.ts\");\n",""],"names":[],"sourceRoot":""}